"use strict";function ConsoleMyLog(e){2>hostIndex&&console.log(e)}!function(){window.Ice=window.Ice||{},Ice.Slice=Ice.Slice||{},window.IceMX=window.IceMX||{},window.IceSSL=window.IceSSL||{};var Slice=Ice.Slice;!function(){var e={module:function(e){var t=window[e];return void 0===t&&(t={},window[e]=t),t},require:function(e){return window}};Ice.__require=function(){return window},Ice.Slice=Ice.Slice||{},Ice.__M=e}(),function(){Ice.Class=function(){var e,t,n;1==arguments.length?t=arguments[0]:2==arguments.length&&(e=arguments[0],t=arguments[1]),void 0!==t&&(n=t.__init__,n&&delete t.__init__);var i=n||function(){};if(void 0!==e&&(i.prototype=new e,i.prototype.constructor=i),void 0!==t)for(var r in t)i.prototype[r]=t[r];return i}}(),function(){var __M=Ice.__M,Slice=Ice.Slice,eq=function(e,t){return e===t?!0:null===e||void 0===e||null===t||void 0===t?!1:e.prototype!==t.prototype?!1:"function"==typeof e.equals?e.equals(t):e instanceof Array?ArrayUtil.equals(e,t,eq):!1},ArrayUtil={clone:function(e){return void 0===e?e:null===e?[]:e.slice()},equals:function(e,t,n){if(e.length!=t.length)return!1;var i,r,o=n||eq;for(i=0,r=e.length;r>i;++i)if(!o.call(o,e[i],t[i]))return!1;return!0},shuffle:function(e){for(var t=e.length;t>1;--t){var n=e[t-1],i=Math.floor(Math.random()*t);e[t-1]=e[i],e[i]=n}},indexOf:function(e,t,n){if(void 0===n||null===n)return e.indexOf(t);for(var i=0;i<e.length;++i)if(n.call(n,e[i],t))return i;return-1},filter:function(e,t,n){n=void 0===n?t:n;for(var i=[],r=0;r<e.length;++r)t.call(n,e[r],r,e)&&i.push(e[r]);return i}};ArrayUtil.eq=eq,Slice.defineSequence=function(module,name,valueHelper,fixed,elementType){var helper=null;Object.defineProperty(module,name,{get:function(){return null===helper&&(helper=Ice.StreamHelpers.generateSeqHelper(eval(valueHelper),fixed,eval(elementType))),helper}})},Ice.ArrayUtil=ArrayUtil}(),function(){var e=Ice.Class({__init__:function(e,t){this._name=e,this._value=t},equals:function(e){if(this===e)return!0;var t=Object.getPrototypeOf(this);return e instanceof t.constructor?this._value==e._value:!1},hashCode:function(){return this._value},toString:function(){return this._name}});Ice.EnumBase=e;var t=e.prototype;Object.defineProperty(t,"name",{enumerable:!0,get:function(){return this._name}}),Object.defineProperty(t,"value",{enumerable:!0,get:function(){return this._value}});var n=Ice.Class({__init__:function(e){this._enumType=e},write:function(e,t){this._enumType.__write(e,t)},writeOpt:function(e,t,n){this._enumType.__writeOpt(e,t,n)},read:function(e){return this._enumType.__read(e)},readOpt:function(e,t){return this._enumType.__readOpt(e,t)}});Ice.EnumHelper=n;var i=function(e,t){e.writeEnum(t)},r=function(e,t,n){e.writeOptValue(t,Ice.OptionalFormat.Size,Ice.BasicStream.prototype.writeEnum,n)},o=Ice.Slice;o.defineEnum=function(t){var o=function(t,n){e.call(this,t,n)};o.prototype=new e,o.prototype.constructor=o;var c=[],s=0;for(var a in t){var h=t[a],u=new o(a,h);c[h]=u,Object.defineProperty(o,a,{enumerable:!0,value:u}),h>s&&(s=h)}return Object.defineProperty(o,"minWireSize",{get:function(){return 1}}),o.__write=i,o.__read=function(e){return e.readEnum(o)},o.__writeOpt=r,o.__readOpt=function(e,t){return e.readOptEnum(t,o)},o.__helper=new n(o),Object.defineProperty(o,"valueOf",{value:function(e){return void 0===e?o:c[e]}}),Object.defineProperty(o,"maxValue",{value:s}),Object.defineProperty(o.prototype,"maxValue",{value:s}),o}}(),function(){Ice.DispatchStatus={DispatchOK:0,DispatchUserException:1,DispatchAsync:2}}(),function(){function e(e,t,n){switch(e){case 92:t.push("\\\\");break;case 39:t.push("\\'");break;case 34:t.push('\\"');break;case 8:t.push("\\b");break;case 12:t.push("\\f");break;case 10:t.push("\\n");break;case 13:t.push("\\r");break;case 9:t.push("\\t");break;default:if(e>=32&&126>=e){var i=String.fromCharCode(e);null!==n&&-1!==n.indexOf(i)?(t.push("\\"),t.push(i)):t.push(i)}else{t.push("\\");for(var r=e.toString(8),o=r.length;3>o;o++)t.push("0");t.push(r)}}}function t(e,t){var n=e.charCodeAt(t);if(!(n>=32&&126>=n)){var i;throw i=t>0?"character after `"+e.substring(0,t)+"'":"first character",i+=" is not a printable ASCII character (ordinal "+n+")",new Error(i)}return n}function n(e,n,i,r){if(n>=i)throw new Error("EOF while decoding string");var o;if("\\"!=e.charAt(n))o=t(e,n++);else{if(n+1==i)throw new Error("trailing backslash");switch(e.charAt(++n)){case"\\":case"'":case'"':o=e.charCodeAt(n++);break;case"b":++n,o="\b".charCodeAt(0);break;case"f":++n,o="\f".charCodeAt(0);break;case"n":++n,o="\n".charCodeAt(0);break;case"r":++n,o="\r".charCodeAt(0);break;case"t":++n,o="	".charCodeAt(0);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":for(var c="01234567",s=0,a=0;3>a&&i>n;++a){var h=e.charAt(n++);if(-1==c.indexOf(h)){--n;break}s=8*s+parseInt(h)}if(s>255){var u="octal value \\"+s.toString(8)+" ("+s+") is out of range";throw new Error(u)}o=s;break;default:o=t(e,n++)}}return r.value=n,o}function i(e,t,i,r){for(var o,c,s,a={value:0};i>t;)o=n(e,t,i,a),t=a.value,128>o?r.push(String.fromCharCode(o)):o>191&&224>o?(c=n(e,t,i,a),t=a.value,r.push(String.fromCharCode((31&o)<<6|63&c))):(c=n(e,t,i,a),t=a.value,s=n(e,t,i,a),t=a.value,r.push(String.fromCharCode((15&o)<<12|(63&c)<<6|63&s)))}Ice.Debug;Ice.StringUtil={findFirstOf:function(e,t,n){n=void 0===n?0:n;for(var i=e.length,r=n;i>r;r++){var o=e.charAt(r);if(-1!=t.indexOf(o))return r}return-1},findFirstNotOf:function(e,t,n){n=void 0===n?0:n;for(var i=e.length,r=n;i>r;r++){var o=e.charAt(r);if(-1==t.indexOf(o))return r}return-1},escapeString:function(t,n){n=void 0===n?null:n;var i,r;if(null!==n)for(i=0,r=n.length;r>i;++i)if(n.charCodeAt(i)<32||n.charCodeAt(i)>126)throw new Error("special characters must be in ASCII range 32-126");var o,c=[];for(i=0,r=t.length;r>i;++i)o=t.charCodeAt(i),128>o?e(o,c,n):o>127&&2048>o?(e(o>>6|192,c,n),e(63&o|128,c,n)):(e(o>>12|224,c,n),e(o>>6&63|128,c,n),e(63&o|128,c,n));return c.join("")},unescapeString:function(e,t,n){t=void 0===t?0:t,n=void 0===n?e.length:n;var r=[];return i(e,t,n,r),r.join("")},splitString:function(e,t){for(var n=[],i="",r=0,o=null;r<e.length;)if(null!==o||'"'!==e.charAt(r)&&"'"!==e.charAt(r)){if(null===o&&"\\"===e.charAt(r)&&r+1<e.length&&('"'===e.charAt(r+1)||"'"===e.charAt(r+1)))++r;else if(null!==o&&"\\"===e.charAt(r)&&r+1<e.length&&e.charAt(r+1)===o)++r;else{if(null!==o&&e.charAt(r)===o){++r,o=null;continue}if(-1!==t.indexOf(e.charAt(r))&&null===o){++r,i.length>0&&(n.push(i),i="");continue}}r<e.length&&(i+=e.charAt(r++))}else o=e.charAt(r++);return i.length>0&&n.push(i),null!==o?null:n},checkQuote:function(e,t){t=void 0===t?0:t;var n=e.charAt(t);if('"'==n||"'"==n){t++;for(var i,r=e.length;r>t&&-1!=(i=e.indexOf(n,t));){if("\\"!=e.charAt(i-1))return i;t=i+1}return-1}return 0},hashCode:function(e){for(var t=0,n=e.length,i=0;n>i;i++)t=31*t+e.charCodeAt(i);return t},toInt:function(e){var t=parseInt(e,10);if(isNaN(t))throw new Error("conversion of `"+e+"' to int failed");return t}}}(),function(){var e=Ice.StringUtil;Ice.HashUtil={addBoolean:function(e,t){return(e<<5)+e^(t?0:1)},addString:function(t,n){return void 0!==n&&null!==n&&(t=(t<<5)+t^e.hashCode(n)),t},addNumber:function(e,t){return(e<<5)+e^t},addHashable:function(e,t){return void 0!==t&&null!==t&&(e=(e<<5)+e^t.hashCode()),e},addArray:function(e,t,n){if(void 0!==t&&null!==t)for(var i=0;i<t.length;++i)e=n(e,t[i]);return e}}}(),function(){var e=Ice.Class({__init__:function(e,t){this.high=e,this.low=t},hashCode:function(){return this.low},equals:function(t){return this===t?!0:t instanceof e?this.high===t.high&&this.low===t.low:!1},toString:function(){return this.high+":"+this.low},toNumber:function(){if(0!==(this.high&e.SIGN_MASK)){var t=~this.low,n=~this.high;if(4294967295>t)t+=1;else if(t=0,n+=1,n>e.HIGH_MAX)return Number.NEGATIVE_INFINITY;return-1*(n*e.HIGH_MASK)+t}return this.high>e.HIGH_MAX?Number.POSITIVE_INFINITY:this.high*e.HIGH_MASK+this.low}});e.SIGN_MASK=2147483648,e.HIGH_MASK=4294967296,e.HIGH_MAX=2097151,Ice.Long=e}(),function(){var e=Ice.Class,t=function(e,n,i,r){if(r+="  ",null===n)return"\n"+r+e+": (null)";if(void 0===n)return"\n"+r+e+": (undefined)";if("stack"==e||"function"==typeof n)return"";if("object"!=typeof n)return"\n"+r+e+': "'+n+'"';if(-1!=i.indexOf(n))return"\n"+r+e+": (recursive)";i.push(n);var o="\n"+r+e+":";for(var c in n)0!==e.indexOf("_")&&"function"!=typeof n[c]&&(o+=r+t(c,n[c],i,r));return o},n=e(Error,{__init__:function(e){e&&(this.ice_cause=e)},ice_name:function(){return"Ice::Exception"},toString:function(){var e=this.ice_name();for(var n in this)e+=t(n,this[n],[],"");return Ice.__printStackTraces===!0&&this.stack&&(e+="\n"+this.stack),e}});n.captureStackTrace=function(e){var t=(new Error).stack;void 0!==t&&Object.defineProperty(e,"stack",{get:function(){return t}})},Ice.Exception=n;var i=e(n,{__init__:function(e){n.call(this,e),n.captureStackTrace(this)},ice_name:function(){return"Ice::LocalException"}});Ice.LocalException=i;var r=Ice.Slice;r.defineLocalException=function(e,t,n){var i=e;return i.prototype=new t,i.prototype.constructor=i,i.prototype.ice_name=function(){return n},i};var o=e(n,{__init__:function(e){n.call(this,e),n.captureStackTrace(this)},ice_name:function(){return"Ice::UserException"},__write:function(e){e.startWriteException(null),c(this,e,this.__mostDerivedType()),e.endWriteException()},__read:function(e){e.startReadException(),s(this,e,this.__mostDerivedType()),e.endReadException(!1)},__usesClasses:function(){return!1}});Ice.UserException=o;var c=function(e,t,n){void 0!==n&&n!==o&&(t.startWriteSlice(n.__id,-1,n.__parent===o),n.prototype.__writeMemberImpl&&n.prototype.__writeMemberImpl.call(e,t),t.endWriteSlice(),c(e,t,n.__parent))},s=function(e,t,n){void 0!==n&&n!==o&&(t.startReadSlice(),n.prototype.__readMemberImpl&&n.prototype.__readMemberImpl.call(e,t),t.endReadSlice(),s(e,t,n.__parent))},a=function(e){e.startWriteException(this.__slicedData),c(this,e,this.__mostDerivedType()),e.endWriteException()},h=function(e){e.startReadException(),s(this,e,this.__mostDerivedType()),this.__slicedData=e.endReadException(!0)};r.defineUserException=function(e,t,n,i,r,o,c){var s=e;return s.__parent=t,s.prototype=new t,s.__id="::"+n,s.prototype.ice_name=function(){return n},s.prototype.constructor=s,s.prototype.__mostDerivedType=function(){return s},o&&(s.prototype.__write=a,s.prototype.__read=h),s.prototype.__writeMemberImpl=i,s.prototype.__readMemberImpl=r,c&&(s.prototype.__usesClasses=function(){return!0}),s}}(),function(){Ice.OptionalFormat=Ice.Slice.defineEnum({F1:0,F2:1,F4:2,F8:3,Size:4,VSize:5,FSize:6,Class:7})}(),function(){Ice.FormatType=Ice.Slice.defineEnum({DefaultFormat:0,CompactFormat:1,SlicedFormat:2})}(),function(){function setInternal(e,t,n,i,r){for(var o=e._table[r];null!==o;o=o._nextInBucket)if(o._hash===i&&e.keysEqual(t,o._key))return void(o._value=n);e.add(t,n,i,r)}function compareEquals(e,t){return e===t?!0:void 0===e||null===e||void 0===t||null===t?!1:e.equals(t)}function compareIdentity(e,t){return e===t}var __M=Ice.__M,StringUtil=Ice.StringUtil,HashMap=Ice.Class({__init__:function(e,t){var n,i,r;arguments;"function"==typeof e?(i=e,r=t):e instanceof HashMap&&(n=e,i=n.keyComparator,r=n.valueComparator),this._size=0,this._head=null,this._initialCapacity=32,this._loadFactor=.75,this._table=[],this._keyComparator="function"==typeof i?i:compareIdentity,this._valueComparator="function"==typeof r?r:compareIdentity;var o,c;if(n instanceof HashMap&&n._size>0){for(this._threshold=n._threshold,c=n._table.length,this._table.length=c,o=0;c>o;o++)this._table[o]=null;this.merge(n)}else for(this._threshold=this._initialCapacity*this._loadFactor,o=0;o<this._initialCapacity;o++)this._table[o]=null},set:function(e,t){var n=this.computeHash(e),i=this.hashIndex(n,this._table.length);return setInternal(this,e,t,n,i)},get:function(e){var t=this.findEntry(e,this.computeHash(e));return void 0!==t?t._value:void 0},has:function(e){return void 0!==this.findEntry(e,this.computeHash(e))},"delete":function(e){for(var t=this.computeHash(e),n=this.hashIndex(t,this._table.length),i=null,r=this._table[n];null!==r;r=r._nextInBucket){if(r._hash===t&&this.keysEqual(e,r._key))return this._size--,null!==i?i._nextInBucket=r._nextInBucket:this._table[n]=r._nextInBucket,null!==r._prev&&(r._prev._next=r._next),null!==r._next&&(r._next._prev=r._prev),this._head===r&&(this._head=r._next),r._value;i=r}},clear:function(){for(var e=0;e<this._table.length;++e)this._table[e]=null;this._head=null,this._size=0},forEach:function(e,t){t=void 0===t?e:t;for(var n=this._head;null!==n;n=n._next)e.call(t,n._key,n._value)},equals:function(e,t){if(null===e||!(e instanceof HashMap)||this._size!==e._size)return!1;for(var n=this,i=t||function(e,t){return n._valueComparator.call(n._valueComparator,e,t)},r=this._head;null!==r;r=r._next){var o=e.findEntry(r._key,r._hash);if(void 0===o||!i(r._value,o._value))return!1}return!0},clone:function(){return new HashMap(this)},merge:function(e){for(var t=e._head;null!==t;t=t._next)setInternal(this,t._key,t._value,t._hash,this.hashIndex(t._hash,this._table.length))},add:function(e,t,n,i){var r=Object.create(null,{key:{enumerable:!0,get:function(){return this._key}},value:{enumerable:!0,get:function(){return this._value}},next:{enumerable:!0,get:function(){return this._next}},_key:{enumerable:!1,writable:!0,value:e},_value:{enumerable:!1,writable:!0,value:t},_prev:{enumerable:!1,writable:!0,value:null},_next:{enumerable:!1,writable:!0,value:null},_nextInBucket:{enumerable:!1,writable:!0,value:null},_hash:{enumerable:!1,writable:!0,value:n}});r._nextInBucket=this._table[i],this._table[i]=r,r._next=this._head,null!==this._head&&(this._head._prev=r),this._head=r,this._size++,this._size>=this._threshold&&this.resize(2*this._table.length)},resize:function(e){for(var t=(this._table,[]),n=0;e>n;n++)t[n]=null;for(var i=this._head;null!==i;i=i._next){var r=this.hashIndex(i._hash,e);i._nextInBucket=t[r],t[r]=i}this._table=t,this._threshold=e*this._loadFactor},findEntry:function(e,t){for(var n=this.hashIndex(t,this._table.length),i=this._table[n];null!==i;i=i._nextInBucket)if(i._hash===t&&this.keysEqual(e,i._key))return i},hashIndex:function(e,t){return e&t-1},computeHash:function(e){if("function"==typeof e.hashCode)return e.hashCode();var t=0,n=typeof e;if("string"===n||e instanceof String)t=StringUtil.hashCode(e);else if("number"===n||e instanceof Number)t=e.toFixed(0);else if("boolean"===n||e instanceof Boolean)t=e?1:0;else if(null!==e)throw"cannot compute hash for value of type "+n;return t},keysEqual:function(e,t){return this._keyComparator.call(this._keyComparator,e,t)}});Ice.HashMap=HashMap,HashMap.compareEquals=compareEquals,HashMap.compareIdentity=compareIdentity;var prototype=HashMap.prototype;Object.defineProperty(prototype,"size",{get:function(){return this._size}}),Object.defineProperty(prototype,"entries",{get:function(){return this._head}});var Slice=Ice.Slice;Slice.defineDictionary=function(module,name,helperName,keyHelper,valueHelper,fixed,keysEqual,valueType,valuesEqual){void 0!==keysEqual||void 0!==valuesEqual?module[name]=function(e){return new HashMap(e||keysEqual,valuesEqual)}:module[name]=HashMap;var helper=null;Object.defineProperty(module,helperName,{get:function(){return null===helper&&(helper=Ice.StreamHelpers.generateDictHelper(eval(keyHelper),eval(valueHelper),fixed,eval(valueType),module[name])),helper}})}}(),function(){var e=Ice.Class,t=Object.defineProperty,n=(Ice.HashMap,Ice.OptionalFormat),i={};i.FSizeOptHelper=function(){this.writeOpt=function(e,t,i){if(void 0!==i&&e.writeOpt(t,n.FSize)){var r=e.startSize();this.write(e,i),e.endSize(r)}},this.readOpt=function(e,t){var i;return e.readOpt(t,n.FSize)&&(e.skip(4),i=this.read(e)),i}},i.VSizeOptHelper=function(){this.writeOpt=function(e,t,i){void 0!==i&&e.writeOpt(t,n.VSize)&&(e.writeSize(this.minWireSize),this.write(e,i))},this.readOpt=function(e,t){var i;return e.readOpt(t,n.VSize)&&(e.skipSize(),i=this.read(e)),i}},i.VSizeContainerOptHelper=function(e){this.writeOpt=function(t,i,r){if(void 0!==r&&t.writeOpt(i,n.VSize)){var o=this.size(r);t.writeSize(o>254?o*e+5:o*e+1),this.write(t,r)}},this.readOpt=function(e,t){var i;return e.readOpt(t,n.VSize)&&(e.skipSize(),i=this.read(e)),i}},i.VSizeContainer1OptHelper=function(){this.writeOpt=function(e,t,i){void 0!==i&&e.writeOpt(t,n.VSize)&&this.write(e,i)},this.readOpt=function(e,t){var i;return e.readOpt(t,n.VSize)&&(i=this.read(e)),i}};var r=e({write:function(e,t){if(null===t||0===t.length)e.writeSize(0);else{var n=this.elementHelper;e.writeSize(t.length);for(var i=0;i<t.length;++i)n.write(e,t[i])}},read:function(e){var t=this.elementHelper,n=e.readAndCheckSeqSize(t.minWireSize),i=[];i.length=n;for(var r=0;n>r;++r)i[r]=t.read(e);return i},size:function(e){return null===e||void 0===e?0:e.length}});t(r.prototype,"minWireSize",{get:function(){return 1}});var o=new r;o.write=function(e,t){return e.writeByteSeq(t)},o.read=function(e){return e.readByteSeq()},t(o,"elementHelper",{get:function(){return Ice.ByteHelper}}),i.VSizeContainer1OptHelper.call(o);var c=function(e){var t=e.readAndCheckSeqSize(1),n=[];n.length=t;for(var i=this.elementType,r=function(t){e.readObject(function(e){n[t]=e},i)},o=0;t>o;++o)r(o);return n};i.generateSeqHelper=function(e,n,s){if(e===Ice.ByteHelper)return o;var a=new r;return n?1===e.minWireSize?i.VSizeContainer1OptHelper.call(a):i.VSizeContainerOptHelper.call(a,e.minWireSize):i.FSizeOptHelper.call(a),t(a,"elementHelper",{get:function(){return e}}),e==Ice.ObjectHelper&&(t(a,"elementType",{get:function(){return s}}),a.read=c),a};var s=e({write:function(e,t){if(null===t||0===t.size)e.writeSize(0);else{var n=this.keyHelper,i=this.valueHelper;e.writeSize(t.size);for(var r=t.entries;null!==r;r=r.next)n.write(e,r.key),i.write(e,r.value)}},read:function(e){for(var t=this.mapType,n=new t,i=e.readSize(),r=this.keyHelper,o=this.valueHelper,c=0;i>c;++c)n.set(r.read(e),o.read(e));return n},size:function(e){return null===e||void 0===e?0:e.size}});Object.defineProperty(s.prototype,"minWireSize",{get:function(){return 1}});var a=function(e){for(var t=e.readSize(),n=this.mapType,i=new n,r=this.valueType,o=function(t){e.readObject(function(e){i.set(t,e)},r)},c=this.keyHelper,s=0;t>s;++s)o(c.read(e));return i};i.generateDictHelper=function(e,n,r,o,c){var h=new s;return r?i.VSizeContainerOptHelper.call(h,e.minWireSize+n.minWireSize):i.FSizeOptHelper.call(h),t(h,"mapType",{get:function(){return c}}),t(h,"keyHelper",{get:function(){return e}}),t(h,"valueHelper",{get:function(){return n}}),n==Ice.ObjectHelper&&(t(h,"valueType",{get:function(){return o}}),h.read=a),h},Ice.StreamHelpers=i}(),function(){var e={Pending:0,Success:1,Failed:2},t=function(t,n){var i=t.__state===e.Success?n.onResponse:n.onException;try{if("function"!=typeof i)n.promise.setState(t.__state,t._args);else{var r=i.apply(null,t._args);r&&"function"==typeof r.then?r.then(function(){var e=arguments;n.promise.succeed.apply(n.promise,e)},function(){var e=arguments;n.promise.fail.apply(n.promise,e)}):n.promise.succeed(r)}}catch(o){n.promise.fail.call(n.promise,o)}},n=Ice.Class({__init__:function(){this.__state=e.Pending,this.__listeners=[]},then:function(e,t){var i=new n,r=this;return setTimeout(function(){r.__listeners.push({promise:i,onResponse:e,onException:t}),r.resolve()},0),i},exception:function(e){return this.then(null,e)},"finally":function(e){var t=new n,i=this,r=function(n){return function(){var i=arguments;try{var r=e.apply(null,i);if(r&&"function"==typeof r.then){var o=function(){n.apply(t,i)};r.then(o).exception(o)}else n.apply(t,i)}catch(c){n.apply(t,i)}}};return setTimeout(function(){i.then(r(t.succeed),r(t.fail))}),t},delay:function(e){var t=new n,i=this,r=function(t,n){return function(){var i=arguments;setTimeout(function(){n.apply(t,i)},e)}};return setTimeout(function(){i.then(r(t,t.succeed),r(t,t.fail))}),t},resolve:function(){if(this.__state!==e.Pending)for(var n;n=this.__listeners.pop();)t(this,n)},setState:function(t,n){if(this.__state===e.Pending&&t!==e.Pending){this.__state=t,this._args=n;var i=this;setTimeout(function(){i.resolve()},0)}},succeed:function(){var t=arguments;return this.setState(e.Success,t),this},fail:function(){var t=arguments;return this.setState(e.Failed,t),this},succeeded:function(){return this.__state===e.Success},failed:function(){return this.__state===e.Failed},completed:function(){return this.__state!==e.Pending}});n.all=function(){if(1===arguments.length&&arguments[0]instanceof Array)return n.all.apply(this,arguments[0]);var e=new n,t=Array.prototype.slice.call(arguments),i=new Array(arguments.length),r=t.length;0===r&&e.succeed.apply(e,i);for(var o=0;o<t.length;++o)!function(n){t[n]&&"function"==typeof t[n].then?t[n].then(function(){i[n]=arguments,r--,0===r&&e.succeed.apply(e,i)},function(){e.fail.apply(e,arguments)}):(i[n]=t[n],r--,0===r&&e.succeed.apply(e,i))}(o);return e},n["try"]=function(e){return(new n).succeed().then(e)},n.delay=function(e){if(arguments.length>1){var t=new n,i=Array.prototype.slice.call(arguments);return e=i.pop(),t.succeed.apply(t,i).delay(e)}return(new n).succeed().delay(e)},Ice.Promise=n}(),function(){var e=Ice.Long;ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(e,t){var n=new Uint8Array(this);t=void 0===t?n.length:t;for(var i=new Uint8Array(new ArrayBuffer(t-e)),r=0,o=i.length;o>r;r++)i[r]=n[r+e];return i.buffer});var t="BufferOverflowException",n="BufferUnderflowException",i="IndexOutOfBoundsException",r=Ice.Class({__init__:function(e){void 0!==e?(this.b=e,this.v=new DataView(this.b)):(this.b=null,this.v=null),this._position=0,this._limit=0,this._shrinkCounter=0},empty:function(){return 0===this._limit},resize:function(e){0===e?this.clear():e>this.capacity&&this.reserve(e),this._limit=e},clear:function(){this.b=null,this.v=null,this._position=0,this._limit=0},expand:function(e){var t=0===this.capacity?e:this._position+e;t>this._limit&&this.resize(t)},reset:function(){this._limit>0&&2*this._limit<this.capacity?++this._shrinkCounter>2&&(this.reserve(this._limit),this._shrinkCounter=0):this._shrinkCounter=0,this._limit=0,this._position=0},reserve:function(e){if(e>this.capacity){var t=Math.max(e,2*this.capacity);if(t=Math.max(1024,t),this.b){var n=new Uint8Array(t);n.set(new Uint8Array(this.b)),this.b=n.buffer}else this.b=new ArrayBuffer(t);this.v=new DataView(this.b)}else{if(!(e<this.capacity))return;this.b=this.b.slice(0,this.capacity),this.v=new DataView(this.b)}},put:function(e){if(this._position===this._limit)throw new Error(t);this.v.setUint8(this._position,e),this._position++},putAt:function(e,t){if(e>=this._limit)throw new Error(i);this.v.setUint8(e,t)},putArray:function(e){if(!(e instanceof Uint8Array))throw new TypeError("argument is not a Uint8Array");if(e.byteLength>0){if(this._position+e.length>this._limit)throw new Error(t);new Uint8Array(this.b,0,this.b.byteLength).set(e,this._position),this._position+=e.byteLength}},putShort:function(e){if(this._position+2>this._limit)throw new Error(t);this.v.setInt16(this._position,e,!0),this._position+=2},putInt:function(e){if(this._position+4>this._limit)throw new Error(t);this.v.setInt32(this._position,e,!0),this._position+=4},putIntAt:function(e,t){if(e+4>this._limit||0>e)throw new Error(i);this.v.setInt32(e,t,!0)},putFloat:function(e){if(this._position+4>this._limit)throw new Error(t);this.v.setFloat32(this._position,e,!0),this._position+=4},putDouble:function(e){if(this._position+8>this._limit)throw new Error(t);this.v.setFloat64(this._position,e,!0),this._position+=8},putLong:function(e){if(this._position+8>this._limit)throw new Error(t);this.v.setInt32(this._position,e.low,!0),this._position+=4,this.v.setInt32(this._position,e.high,!0),this._position+=4},writeString:function(e,t){var n=unescape(encodeURIComponent(t));e.writeSize(n.length),e.expand(n.length),this.putString(n,n.length)},putString:function(e,n){if(this._position+n>this._limit)throw new Error(t);for(var i=0;n>i;++i)this.v.setUint8(this._position,e.charCodeAt(i)),this._position++},get:function(){if(this._position>=this._limit)throw new Error(n);var e=this.v.getUint8(this._position);return this._position++,e},getAt:function(e){if(0>e||e>=this._limit)throw new Error(i);return this.v.getUint8(e)},getArray:function(e){if(this._position+e>this._limit)throw new Error(n);var t=this.b.slice(this._position,this._position+e);return this._position+=e,new Uint8Array(t)},getArrayAt:function(e,t){if(e+t>this._limit)throw new Error(n);return t=void 0===t?this.b.byteLength-e:t,new Uint8Array(this.b.slice(e,e+t))},getShort:function(){if(this._limit-this._position<2)throw new Error(n);var e=this.v.getInt16(this._position,!0);return this._position+=2,e},getInt:function(){if(this._limit-this._position<4)throw new Error(n);var e=this.v.getInt32(this._position,!0);return this._position+=4,e},getFloat:function(){if(this._limit-this._position<4)throw new Error(n);var e=this.v.getFloat32(this._position,!0);return this._position+=4,e},getDouble:function(){if(this._limit-this._position<8)throw new Error(n);var e=this.v.getFloat64(this._position,!0);return this._position+=8,e},getLong:function(){if(this._limit-this._position<8)throw new Error(n);var t=new e;return t.low=this.v.getInt32(this._position,!0),this._position+=4,t.high=this.v.getInt32(this._position,!0),this._position+=4,t},getString:function(e){if(this._position+e>this._limit)throw new Error(n);for(var t=new DataView(this.b,this._position,e),i="",r=0;e>r;++r)i+=String.fromCharCode(t.getUint8(r));return this._position+=e,i=decodeURIComponent(escape(i))}}),o=r.prototype;Object.defineProperty(o,"position",{get:function(){return this._position},set:function(e){e>=0&&e<=this._limit&&(this._position=e)}}),Object.defineProperty(o,"limit",{get:function(){return this._limit},set:function(e){e<=this.capacity&&(this._limit=e,this._position>e&&(this._position=e))}}),Object.defineProperty(o,"capacity",{get:function(){return null===this.b?0:this.b.byteLength}}),Object.defineProperty(o,"remaining",{get:function(){return this._limit-this._position}}),r.createNative=function(e){return void 0===e?new Uint8Array(0):new Uint8Array(e)},Ice.Buffer=r}(),function(){Ice.AsyncStatus={Queued:0,Sent:1}}(),function(){Ice.CompactIdRegistry=new Ice.HashMap}(),function(){var e=Ice.Class,t=0,n=e({__init__:function(){this.__address=t++},hashCode:function(){return this.__address},ice_isA:function(e,t){return this.__mostDerivedType().__ids.indexOf(e)>=0},ice_ping:function(e){},ice_ids:function(e){return this.__mostDerivedType().__ids},ice_id:function(e){return this.__mostDerivedType().__id},toString:function(){return"[object "+this.ice_id()+"]"},ice_preMarshal:function(){},ice_postUnmarshal:function(){},__write:function(e){e.startWriteObject(null),i(this,e,this.__mostDerivedType()),e.endWriteObject()},__read:function(e){e.startReadObject(),r(this,e,this.__mostDerivedType()),e.endReadObject(!1)},ice_instanceof:function(e){return e?this instanceof e?!0:this.__mostDerivedType().__instanceof(e):!1},__mostDerivedType:function(){return n},equals:function(e){return this===e}});n.write=function(e,t){e.writeObject(t)},n.writeOpt=function(e,t,n){e.writeOptObject(t,n)},n.read=function(e){var t={value:null};return e.readObject(function(e){t.value=e},n),t},n.readOpt=function(e,t){var i={value:void 0};return e.readOptObject(t,function(e){i.value=e},n),i},n.ice_staticId=function(){return n.__id},n.__instanceof=function(e){if(e===this)return!0;for(var t in this.__implements)if(this.__implements[t].__instanceof(e))return!0;return this.__parent?this.__parent.__instanceof(e):!1},n.__ids=["::Ice::Object"],n.__id=n.__ids[0],n.__compactId=-1,n.__preserved=!1;var i=function(e,t,r){void 0!==r&&r!==n&&(t.startWriteSlice(r.__id,r.__compactId,r.__parent===n),r.prototype.__writeMemberImpl&&r.prototype.__writeMemberImpl.call(e,t),t.endWriteSlice(),i(e,t,r.__parent))},r=function(e,t,i){void 0!==i&&i!==n&&(t.startReadSlice(),i.prototype.__readMemberImpl&&i.prototype.__readMemberImpl.call(e,t),t.endReadSlice(),r(e,t,i.__parent))},o=function(e){e.startWriteObject(this.__slicedData),i(this,e,this.__mostDerivedType()),e.endWriteObject()},c=function(e){e.startReadObject(),r(this,e,this.__mostDerivedType()),this.__slicedData=e.endReadObject(!0)};Ice.Object=n;var s=Ice.Slice;s.defineLocalObject=function(e,t){var n=e||function(){};return void 0!==t&&(n.prototype=new t,n.__parent=t,n.prototype.constructor=e),n},s.defineObject=function(e,t,i,r,s,a,h,u,l){var d=e||function(){};return d.prototype=new t,d.__parent=t,d.__ids=s,d.__id=s[r],d.__compactId=a,d.__instanceof=n.__instanceof,d.__implements=i,d.write=function(e,t){e.writeObject(t)},d.writeOpt=function(e,t,n){e.writeOptObject(t,n)},d.read=function(e){var t={value:null};return e.readObject(function(e){t.value=e},d),t},d.readOpt=function(e,t){var n={value:void 0};return e.readOptObject(t,function(e){n.value=e},d),n},d.ice_staticId=function(){return s[r]},d.prototype.constructor=d,d.prototype.__mostDerivedType=function(){return d},l&&(d.prototype.__write=o,d.prototype.__read=c),d.prototype.__writeMemberImpl=h,d.prototype.__readMemberImpl=u,d}}(),function(){Slice.defineDictionary(Ice,"SliceChecksumDict","SliceChecksumDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0)}(),function(){var e=Ice.ArrayUtil,t=e.eq,n=function(e){if(this===e)return!0;if(null===e||void 0===e)return!1;if(this.prototype!==e.prototype)return!1;var n,i;for(var r in this)if(n=this[r],i=e[r],"function"!=typeof n&&!t(n,i))return!1;return!0},i=function(){var t,n=new this.constructor;for(var i in this)if(t=this[i],void 0===t||null===t)n[i]=t;else{if("function"==typeof t)continue;"function"==typeof t.clone?n[i]=t.clone():t instanceof Array?n[i]=e.clone(t):n[i]=t}return n},r=function(e,t){if("function"==typeof t.hashCode)return Ice.HashUtil.addHashable(e,t);if(t instanceof Array)return Ice.HashUtil.addArray(e,t,r);var n=typeof t;return t instanceof String||"string"==n?Ice.HashUtil.addString(e,t):t instanceof Number||"number"==n?Ice.HashUtil.addNumber(e,t):t instanceof Boolean||"boolean"==n?Ice.HashUtil.addBoolean(e,t):void 0},o=function(){var e,t=5381;for(var n in this)e=this[n],void 0!==e&&null!==e&&"function"!=typeof e&&(t=r(t,e));return t};Ice.Slice.defineStruct=function(e,t,r,c,s,a){var h=e;return h.prototype.clone=i,h.prototype.equals=n,t&&(h.prototype.hashCode=o),c&&r&&(h.prototype.__write=r,h.prototype.__read=c,h.write=function(e,t){t.__write(e)},h.read=function(e){var t=new this;return t.__read(e),t},Object.defineProperty(h,"minWireSize",{get:function(){return s}}),a?Ice.StreamHelpers.VSizeOptHelper.call(h):Ice.StreamHelpers.FSizeOptHelper.call(h)),h}}(),function(){Ice.Address=function(e,t){this.host=e,this.port=t}}(),function(){Ice.Identity=Slice.defineStruct(function(e,t){this.name=void 0!==e?e:null,this.category=void 0!==t?t:null},!0,function(e){e.writeString(this.name),e.writeString(this.category)},function(e){this.name=e.readString(),this.category=e.readString()},2,!1),Slice.defineDictionary(Ice,"ObjectDict","ObjectDictHelper","Ice.Identity","Ice.ObjectHelper",!1,Ice.HashMap.compareEquals,"Ice.Object"),Slice.defineSequence(Ice,"IdentitySeqHelper","Ice.Identity",!1)}(),function(){Ice.ProtocolVersion=Slice.defineStruct(function(e,t){this.major=void 0!==e?e:0,this.minor=void 0!==t?t:0},!0,function(e){e.writeByte(this.major),e.writeByte(this.minor)},function(e){this.major=e.readByte(),this.minor=e.readByte()},2,!0),Ice.EncodingVersion=Slice.defineStruct(function(e,t){this.major=void 0!==e?e:0,this.minor=void 0!==t?t:0},!0,function(e){e.writeByte(this.major),e.writeByte(this.minor)},function(e){this.major=e.readByte(),this.minor=e.readByte()},2,!0)}(),function(){function e(e){return 26>e?String.fromCharCode(r+e):52>e?String.fromCharCode(o+(e-26)):62>e?String.fromCharCode(c+(e-52)):62==e?"+":"/"}function t(e){return e>="A"&&"Z">=e?e.charCodeAt(0)-r:e>="a"&&"z">=e?e.charCodeAt(0)-o+26:e>="0"&&"9">=e?e.charCodeAt(0)-c+52:"+"==e?62:63}var n=Ice.Buffer,i={},r="A".charCodeAt(0),o="a".charCodeAt(0),c="0".charCodeAt(0);i.encode=function(t){if(null===t||0===t.length)return"";
for(var n,i,r,o,c,s,a,h=(4*t.length/3+1,[]),u=0;u<t.length;u+=3)n=255&t[u],i=0,r=0,u+1<t.length&&(i=255&t[u+1]),u+2<t.length&&(r=255&t[u+2]),o=n>>2&255,c=255&((3&n)<<4|i>>4),s=255&((15&i)<<2|r>>6),a=63&r,h.push(e(o)),h.push(e(c)),u+1<t.length?h.push(e(s)):h.push("="),u+2<t.length?h.push(e(a)):h.push("=");for(var l=h.join(""),d=[],p=0;l.length-p>76;)d.push(l.substring(p,p+76)),d.push("\r\n"),p+=76;return d.push(l.substring(p)),d.join("")},i.decode=function(e){for(var r=[],o=0;o<e.length;o++){var c=e.charAt(o);i.isBase64(c)&&r.push(c)}if(0===r.length)return null;var s=3*r.length/4+1,a=new n;a.resize(s);for(var h,u,l,d,p,_,f,I,g=0;g<r.length;g+=4)p="A",_="A",f="A",I="A",p=r[g],g+1<r.length&&(_=r[g+1]),g+2<r.length&&(f=r[g+2]),g+3<r.length&&(I=r[g+3]),h=255&t(p),u=255&t(_),l=255&t(f),d=255&t(I),a.put(h<<2|u>>4),"="!=f&&a.put((15&u)<<4|l>>2),"="!=I&&a.put((3&l)<<6|d);return a.remaining>0?a.getArrayAt(0,a.position):a.getArrayAt(0)},i.isBase64=function(e){return e>="A"&&"Z">=e?!0:e>="a"&&"z">=e?!0:e>="0"&&"9">=e?!0:"+"==e?!0:"/"==e?!0:"="==e?!0:!1},Ice.Base64=i}(),function(){Slice.defineSequence(Ice,"BoolSeqHelper","Ice.BoolHelper",!0),Slice.defineSequence(Ice,"ByteSeqHelper","Ice.ByteHelper",!0),Slice.defineSequence(Ice,"ShortSeqHelper","Ice.ShortHelper",!0),Slice.defineSequence(Ice,"IntSeqHelper","Ice.IntHelper",!0),Slice.defineSequence(Ice,"LongSeqHelper","Ice.LongHelper",!0),Slice.defineSequence(Ice,"FloatSeqHelper","Ice.FloatHelper",!0),Slice.defineSequence(Ice,"DoubleSeqHelper","Ice.DoubleHelper",!0),Slice.defineSequence(Ice,"StringSeqHelper","Ice.StringHelper",!1),Slice.defineSequence(Ice,"ObjectSeqHelper","Ice.ObjectHelper",!1,"Ice.Object"),Slice.defineSequence(Ice,"ObjectProxySeqHelper","Ice.ObjectPrx",!1)}(),function(){Slice.defineSequence(Ice,"EndpointSeqHelper","Ice.ObjectHelper",!1,"Ice.Endpoint")}(),function(){Ice.InitializationException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:null},Ice.LocalException,"Ice::InitializationException"),Ice.PluginInitializationException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:null},Ice.LocalException,"Ice::PluginInitializationException"),Ice.CollocationOptimizationException=Slice.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::CollocationOptimizationException"),Ice.AlreadyRegisteredException=Slice.defineLocalException(function(e,t,n){Ice.LocalException.call(this,n),this.kindOfObject=void 0!==e?e:null,this.id=void 0!==t?t:null},Ice.LocalException,"Ice::AlreadyRegisteredException"),Ice.NotRegisteredException=Slice.defineLocalException(function(e,t,n){Ice.LocalException.call(this,n),this.kindOfObject=void 0!==e?e:null,this.id=void 0!==t?t:null},Ice.LocalException,"Ice::NotRegisteredException"),Ice.TwowayOnlyException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.operation=void 0!==e?e:null},Ice.LocalException,"Ice::TwowayOnlyException"),Ice.CloneNotImplementedException=Slice.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::CloneNotImplementedException"),Ice.UnknownException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.unknown=void 0!==e?e:null},Ice.LocalException,"Ice::UnknownException"),Ice.UnknownLocalException=Slice.defineLocalException(function(e,t){Ice.UnknownException.call(this,e,t)},Ice.UnknownException,"Ice::UnknownLocalException"),Ice.UnknownUserException=Slice.defineLocalException(function(e,t){Ice.UnknownException.call(this,e,t)},Ice.UnknownException,"Ice::UnknownUserException"),Ice.VersionMismatchException=Slice.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::VersionMismatchException"),Ice.CommunicatorDestroyedException=Slice.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::CommunicatorDestroyedException"),Ice.ObjectAdapterDeactivatedException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.name=void 0!==e?e:null},Ice.LocalException,"Ice::ObjectAdapterDeactivatedException"),Ice.ObjectAdapterIdInUseException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.id=void 0!==e?e:null},Ice.LocalException,"Ice::ObjectAdapterIdInUseException"),Ice.NoEndpointException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.proxy=void 0!==e?e:null},Ice.LocalException,"Ice::NoEndpointException"),Ice.EndpointParseException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:null},Ice.LocalException,"Ice::EndpointParseException"),Ice.EndpointSelectionTypeParseException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:null},Ice.LocalException,"Ice::EndpointSelectionTypeParseException"),Ice.VersionParseException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:null},Ice.LocalException,"Ice::VersionParseException"),Ice.IdentityParseException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:null},Ice.LocalException,"Ice::IdentityParseException"),Ice.ProxyParseException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:null},Ice.LocalException,"Ice::ProxyParseException"),Ice.IllegalIdentityException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.id=void 0!==e?e:null},Ice.LocalException,"Ice::IllegalIdentityException"),Ice.IllegalServantException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:null},Ice.LocalException,"Ice::IllegalServantException"),Ice.RequestFailedException=Slice.defineLocalException(function(e,t,n,i){Ice.LocalException.call(this,i),this.id=void 0!==e?e:null,this.facet=void 0!==t?t:null,this.operation=void 0!==n?n:null},Ice.LocalException,"Ice::RequestFailedException"),Ice.ObjectNotExistException=Slice.defineLocalException(function(e,t,n,i){Ice.RequestFailedException.call(this,e,t,n,i)},Ice.RequestFailedException,"Ice::ObjectNotExistException"),Ice.FacetNotExistException=Slice.defineLocalException(function(e,t,n,i){Ice.RequestFailedException.call(this,e,t,n,i)},Ice.RequestFailedException,"Ice::FacetNotExistException"),Ice.OperationNotExistException=Slice.defineLocalException(function(e,t,n,i){Ice.RequestFailedException.call(this,e,t,n,i)},Ice.RequestFailedException,"Ice::OperationNotExistException"),Ice.SyscallException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.error=void 0!==e?e:0},Ice.LocalException,"Ice::SyscallException"),Ice.SocketException=Slice.defineLocalException(function(e,t){Ice.SyscallException.call(this,e,t)},Ice.SyscallException,"Ice::SocketException"),Ice.FileException=Slice.defineLocalException(function(e,t,n){Ice.SyscallException.call(this,e,n),this.path=void 0!==t?t:null},Ice.SyscallException,"Ice::FileException"),Ice.ConnectFailedException=Slice.defineLocalException(function(e,t){Ice.SocketException.call(this,e,t)},Ice.SocketException,"Ice::ConnectFailedException"),Ice.ConnectionRefusedException=Slice.defineLocalException(function(e,t){Ice.ConnectFailedException.call(this,e,t)},Ice.ConnectFailedException,"Ice::ConnectionRefusedException"),Ice.ConnectionLostException=Slice.defineLocalException(function(e,t){Ice.SocketException.call(this,e,t)},Ice.SocketException,"Ice::ConnectionLostException"),Ice.DNSException=Slice.defineLocalException(function(e,t,n){Ice.LocalException.call(this,n),this.error=void 0!==e?e:0,this.host=void 0!==t?t:null},Ice.LocalException,"Ice::DNSException"),Ice.OperationInterruptedException=Slice.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::OperationInterruptedException"),Ice.TimeoutException=Slice.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::TimeoutException"),Ice.ConnectTimeoutException=Slice.defineLocalException(function(e){Ice.TimeoutException.call(this,e)},Ice.TimeoutException,"Ice::ConnectTimeoutException"),Ice.CloseTimeoutException=Slice.defineLocalException(function(e){Ice.TimeoutException.call(this,e)},Ice.TimeoutException,"Ice::CloseTimeoutException"),Ice.ConnectionTimeoutException=Slice.defineLocalException(function(e){Ice.TimeoutException.call(this,e)},Ice.TimeoutException,"Ice::ConnectionTimeoutException"),Ice.InvocationTimeoutException=Slice.defineLocalException(function(e){Ice.TimeoutException.call(this,e)},Ice.TimeoutException,"Ice::InvocationTimeoutException"),Ice.InvocationCanceledException=Slice.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::InvocationCanceledException"),Ice.ProtocolException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:null},Ice.LocalException,"Ice::ProtocolException"),Ice.BadMagicException=Slice.defineLocalException(function(e,t,n){Ice.ProtocolException.call(this,e,n),this.badMagic=void 0!==t?t:null},Ice.ProtocolException,"Ice::BadMagicException"),Ice.UnsupportedProtocolException=Slice.defineLocalException(function(e,t,n,i){Ice.ProtocolException.call(this,e,i),this.bad=void 0!==t?t:null,this.supported=void 0!==n?n:null},Ice.ProtocolException,"Ice::UnsupportedProtocolException"),Ice.UnsupportedEncodingException=Slice.defineLocalException(function(e,t,n,i){Ice.ProtocolException.call(this,e,i),this.bad=void 0!==t?t:null,this.supported=void 0!==n?n:null},Ice.ProtocolException,"Ice::UnsupportedEncodingException"),Ice.UnknownMessageException=Slice.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::UnknownMessageException"),Ice.ConnectionNotValidatedException=Slice.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::ConnectionNotValidatedException"),Ice.UnknownRequestIdException=Slice.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::UnknownRequestIdException"),Ice.UnknownReplyStatusException=Slice.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::UnknownReplyStatusException"),Ice.CloseConnectionException=Slice.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::CloseConnectionException"),Ice.ForcedCloseConnectionException=Slice.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::ForcedCloseConnectionException"),Ice.IllegalMessageSizeException=Slice.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::IllegalMessageSizeException"),Ice.CompressionException=Slice.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::CompressionException"),Ice.DatagramLimitException=Slice.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::DatagramLimitException"),Ice.MarshalException=Slice.defineLocalException(function(e,t){Ice.ProtocolException.call(this,e,t)},Ice.ProtocolException,"Ice::MarshalException"),Ice.ProxyUnmarshalException=Slice.defineLocalException(function(e,t){Ice.MarshalException.call(this,e,t)},Ice.MarshalException,"Ice::ProxyUnmarshalException"),Ice.UnmarshalOutOfBoundsException=Slice.defineLocalException(function(e,t){Ice.MarshalException.call(this,e,t)},Ice.MarshalException,"Ice::UnmarshalOutOfBoundsException"),Ice.NoObjectFactoryException=Slice.defineLocalException(function(e,t,n){Ice.MarshalException.call(this,e,n),this.type=void 0!==t?t:null},Ice.MarshalException,"Ice::NoObjectFactoryException"),Ice.UnexpectedObjectException=Slice.defineLocalException(function(e,t,n,i){Ice.MarshalException.call(this,e,i),this.type=void 0!==t?t:null,this.expectedType=void 0!==n?n:null},Ice.MarshalException,"Ice::UnexpectedObjectException"),Ice.MemoryLimitException=Slice.defineLocalException(function(e,t){Ice.MarshalException.call(this,e,t)},Ice.MarshalException,"Ice::MemoryLimitException"),Ice.StringConversionException=Slice.defineLocalException(function(e,t){Ice.MarshalException.call(this,e,t)},Ice.MarshalException,"Ice::StringConversionException"),Ice.EncapsulationException=Slice.defineLocalException(function(e,t){Ice.MarshalException.call(this,e,t)},Ice.MarshalException,"Ice::EncapsulationException"),Ice.FeatureNotSupportedException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.unsupportedFeature=void 0!==e?e:null},Ice.LocalException,"Ice::FeatureNotSupportedException"),Ice.SecurityException=Slice.defineLocalException(function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:null},Ice.LocalException,"Ice::SecurityException"),Ice.FixedProxyException=Slice.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::FixedProxyException"),Ice.ResponseSentException=Slice.defineLocalException(function(e){Ice.LocalException.call(this,e)},Ice.LocalException,"Ice::ResponseSentException")}(),function(){function e(e){var t=e.indexOf(".");if(-1===t)throw new Ice.VersionParseException("malformed version value `"+e+"'");var n,r=e.substring(0,t);try{n=i.toInt(r)}catch(o){throw new Ice.VersionParseException("invalid version value `"+e+"'")}if(1>n||n>255)throw new Ice.VersionParseException("range error in version `"+e+"'");return n}function t(e){var t=e.indexOf(".");if(-1===t)throw new Ice.VersionParseException("malformed version value `"+e+"'");var n,r=e.substring(t+1);try{n=i.toInt(r)}catch(o){throw new Ice.VersionParseException("invalid version value `"+e+"'")}if(0>n||n>255)throw new Ice.VersionParseException("range error in version `"+e+"'");return n}function n(e,t){return e+"."+t}var i=Ice.StringUtil,r={};Ice.Encoding_1_0=new Ice.EncodingVersion(1,0),Ice.Encoding_1_1=new Ice.EncodingVersion(1,1),Ice.Protocol_1_0=new Ice.ProtocolVersion(1,0),r.headerSize=14,r.magic=Ice.Buffer.createNative([73,99,101,80]),r.protocolMajor=1,r.protocolMinor=0,r.protocolEncodingMajor=1,r.protocolEncodingMinor=0,r.encodingMajor=1,r.encodingMinor=1,r.requestMsg=0,r.requestBatchMsg=1,r.replyMsg=2,r.validateConnectionMsg=3,r.closeConnectionMsg=4,r.replyOK=0,r.replyUserException=1,r.replyObjectNotExist=2,r.replyFacetNotExist=3,r.replyOperationNotExist=4,r.replyUnknownLocalException=5,r.replyUnknownUserException=6,r.replyUnknownException=7,r.requestHdr=Ice.Buffer.createNative([r.magic[0],r.magic[1],r.magic[2],r.magic[3],r.protocolMajor,r.protocolMinor,r.protocolEncodingMajor,r.protocolEncodingMinor,r.requestMsg,0,0,0,0,0,0,0,0,0]),r.requestBatchHdr=Ice.Buffer.createNative([r.magic[0],r.magic[1],r.magic[2],r.magic[3],r.protocolMajor,r.protocolMinor,r.protocolEncodingMajor,r.protocolEncodingMinor,r.requestBatchMsg,0,0,0,0,0,0,0,0,0]),r.replyHdr=Ice.Buffer.createNative([r.magic[0],r.magic[1],r.magic[2],r.magic[3],r.protocolMajor,r.protocolMinor,r.protocolEncodingMajor,r.protocolEncodingMinor,r.replyMsg,0,0,0,0,0]),r.currentProtocol=new Ice.ProtocolVersion(r.protocolMajor,r.protocolMinor),r.currentProtocolEncoding=new Ice.EncodingVersion(r.protocolEncodingMajor,r.protocolEncodingMinor),r.currentEncoding=new Ice.EncodingVersion(r.encodingMajor,r.encodingMinor),r.checkSupportedProtocol=function(e){if(e.major!==r.currentProtocol.major||e.minor>r.currentProtocol.minor)throw new Ice.UnsupportedProtocolException("",e,r.currentProtocol)},r.checkSupportedProtocolEncoding=function(e){if(e.major!==r.currentProtocolEncoding.major||e.minor>r.currentProtocolEncoding.minor)throw new Ice.UnsupportedEncodingException("",e,r.currentProtocolEncoding)},r.checkSupportedEncoding=function(e){if(e.major!==r.currentEncoding.major||e.minor>r.currentEncoding.minor)throw new Ice.UnsupportedEncodingException("",e,r.currentEncoding)},r.getCompatibleProtocol=function(e){return e.major!==r.currentProtocol.major?e:e.minor<r.currentProtocol.minor?e:r.currentProtocol},r.getCompatibleEncoding=function(e){return e.major!==r.currentEncoding.major?e:e.minor<r.currentEncoding.minor?e:r.currentEncoding},r.isSupported=function(e,t){return e.major===t.major&&e.minor<=t.minor},Ice.stringToProtocolVersion=function(n){return new Ice.ProtocolVersion(e(n),t(n))},Ice.stringToEncodingVersion=function(n){return new Ice.EncodingVersion(e(n),t(n))},Ice.protocolVersionToString=function(e){return n(e.major,e.minor)},Ice.encodingVersionToString=function(e){return n(e.major,e.minor)},Ice.Protocol=r}(),function(){var e=Ice.Promise,t=Ice.Class(e,{__init__:function(t,n,i,r,o){e.call(this),void 0!==t&&(this._communicator=t,this._instance=null!==t?t.instance:null,this._operation=n,this._connection=i,this._proxy=r,this._adapter=o)}}),n=t.prototype,i=Object.defineProperty;i(n,"communicator",{get:function(){return this._communicator}}),i(n,"connection",{get:function(){return this._connection}}),i(n,"proxy",{get:function(){return this._proxy}}),i(n,"adapter",{get:function(){return this._adapter}}),i(n,"operation",{get:function(){return this._operation}}),Ice.AsyncResultBase=t}(),function(){var e=Ice.UnexpectedObjectException,t=Ice.MemoryLimitException;Ice.ExUtil={throwUOE:function(t,n){var i=n.ice_id();throw new e("expected element of type `"+t+"' but received '"+i,i,t)},throwMemoryLimitException:function(e,n){throw new t("requested "+e+" bytes, maximum allowed is "+n+" bytes (see Ice.MessageSizeMax)")}}}(),function(){Slice.defineDictionary(Ice,"Context","ContextHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),Ice.OperationMode=Slice.defineEnum({Normal:0,Nonmutating:1,Idempotent:2}),Ice.Current=Slice.defineStruct(function(e,t,n,i,r,o,c,s,a){this.adapter=void 0!==e?e:null,this.con=void 0!==t?t:null,this.id=void 0!==n?n:null,this.facet=void 0!==i?i:null,this.operation=void 0!==r?r:null,this.mode=void 0!==o?o:Ice.Normal,this.ctx=void 0!==c?c:null,this.requestId=void 0!==s?s:0,this.encoding=void 0!==a?a:null},!1)}(),function(){Ice.ReferenceMode={ModeTwoway:0,ModeOneway:1,ModeBatchOneway:2,ModeDatagram:3,ModeBatchDatagram:4,ModeLast:4}}(),function(){var e=Ice.Class(Error,{__init__:function(e){e instanceof Ice.LocalException?this._ex=e:this._ex=e._ex}}),t=e.prototype;Object.defineProperty(t,"inner",{get:function(){return this._ex}}),Ice.RetryException=e}(),function(){Ice.EndpointSelectionType=Slice.defineEnum({Random:0,Ordered:1})}(),function(){function e(e,t){var n=new d;n.__read(t),e.push("\nidentity = "+t.instance.identityToString(n));var i=Ice.StringSeqHelper.read(t);e.push("\nfacet = "),i.length>0&&e.push(u.escapeString(i[0],""));var r=t.readString();e.push("\noperation = "+r)}function t(e,t){var n=t.readInt();e.push("\nrequest id = "+n),0===n&&e.push(" (oneway)"),r(e,t)}function n(e,t){var n=t.readInt();e.push("\nnumber of requests = "+n);for(var i=0;n>i;++i)e.push("\nrequest #"+i+":"),r(e,t)}function i(t,n){var i=n.readInt();t.push("\nrequest id = "+i);var r=n.readByte();switch(t.push("\nreply status = "+r+" "),r){case h.replyOK:t.push("(ok)");break;case h.replyUserException:t.push("(user exception)");break;case h.replyObjectNotExist:case h.replyFacetNotExist:case h.replyOperationNotExist:switch(r){case h.replyObjectNotExist:t.push("(object not exist)");break;case h.replyFacetNotExist:t.push("(facet not exist)");break;case h.replyOperationNotExist:t.push("(operation not exist)")}e(t,n);break;case h.replyUnknownException:case h.replyUnknownLocalException:case h.replyUnknownUserException:switch(r){case h.replyUnknownException:t.push("(unknown exception)");break;case h.replyUnknownLocalException:t.push("(unknown local exception)");break;case h.replyUnknownUserException:t.push("(unknown user exception)")}var o=n.readString();t.push("\nunknown = "+o);break;default:t.push("(unknown)")}}function r(t,n){e(t,n);var i=n.readByte();switch(t.push("\nmode = "+i+" "),l.valueOf(i)){case l.Normal:t.push("(normal)");break;case l.Nonmutating:t.push("(nonmutating)");break;case l.Idempotent:t.push("(idempotent)");break;default:t.push("(unknown)")}var r=n.readSize();for(t.push("\ncontext = ");r-->0;){var o=n.readString(),c=n.readString();t.push(o+"/"+c),r>0&&t.push(", ")}var s=n.skipEncaps();s.equals(Ice.Encoding_1_0)||(t.push("\nencoding = "),t.push(Ice.encodingVersionToString(s)))}function o(e,t){t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte();var n=t.readByte();e.push("\nmessage type = "+n+" ("+s(n)+")");var i=t.readByte();switch(e.push("\ncompression status = "+i+" "),i){case 0:e.push("(not compressed; do not compress response, if any)");break;case 1:e.push("(not compressed; compress response, if any)");break;case 2:e.push("(compressed; compress response, if any)");break;default:e.push("(unknown)")}var r=t.readInt();return e.push("\nmessage size = "+r),n}function c(e,r){var c=o(e,r);switch(c){case h.closeConnectionMsg:case h.validateConnectionMsg:break;case h.requestMsg:t(e,r);break;case h.requestBatchMsg:n(e,r);break;case h.replyMsg:i(e,r)}return c}function s(e){switch(e){case h.requestMsg:return"request";case h.requestBatchMsg:return"batch request";case h.replyMsg:return"reply";case h.closeConnectionMsg:return"close connection";case h.validateConnectionMsg:return"validate connection";default:return"unknown"}}var a=(Ice.Debug,Ice.HashMap),h=Ice.Protocol,u=Ice.StringUtil,l=Ice.OperationMode,d=Ice.Identity,p={};p.traceSend=function(e,t,n){if(n.protocol>=1){var i=e.pos;e.pos=0;var r=[],o=c(r,e);t.trace(n.protocolCat,"sending "+s(o)+" "+r.join("")),e.pos=i}},p.traceRecv=function(e,t,n){if(n.protocol>=1){var i=e.pos;e.pos=0;var r=[],o=c(r,e);t.trace(n.protocolCat,"received "+s(o)+" "+r.join("")),e.pos=i}},p.trace=function(e,t,n,i){if(i.protocol>=1){var r=t.pos;t.pos=0;var o=[];o.push(e),c(o,t),n.trace(i.protocolCat,o.join("")),t.pos=r}};new a;p.dumpStream=function(e){var t=e.pos;e.pos=0;var n=e.readBlob(e.size());p.dumpOctets(n),e.pos=t},p.dumpOctets=function(e){for(var t=8,n=[],i=0;i<e.length;i+=t){var r;for(r=i;t>r-i;r++)if(r<e.length){var o=e[r];0>o&&(o+=256);var c;c=10>o?"  "+o:100>o?" "+o:""+o,n.push(c+" ")}else n.push("    ");for(n.push('"'),r=i;r<e.length&&t>r-i;r++)e[r]>=32&&e[r]<127?n.push(String.fromCharCode(e[r])):n.push(".");n.push('"\n')}console.log(n.join(""))},Ice.TraceUtil=p}(),function(){var e=function(){this.typeId="",this.compactId=-1,this.bytes=[],this.objects=[],this.hasOptionalMembers=!1,this.isLastSlice=!1};Ice.SliceInfo=e;var t=function(e){this.slices=e};Ice.SlicedData=t;var n=Ice.Class(Ice.Object,{__init__:function(e){this._unknownTypeId=e},getUnknownTypeId:function(){return this._unknownTypeId},__write:function(e){e.startWriteObject(this._slicedData),e.endWriteObject()},__read:function(e){e.startReadObject(),this._slicedData=e.endReadObject(!0)}});Ice.UnknownSlicedObject=n}(),function(){var __M=Ice.__M,Debug=Ice.Debug,ExUtil=Ice.ExUtil,FormatType=Ice.FormatType,HashMap=Ice.HashMap,IceObject=Ice.Object,OptionalFormat=Ice.OptionalFormat,Protocol=Ice.Protocol,TraceUtil=Ice.TraceUtil,ArrayUtil=Ice.ArrayUtil,SlicedData=Ice.SlicedData,SliceType={};SliceType.NoSlice=0,SliceType.ObjectSlice=1,SliceType.ExceptionSlice=2;var OPTIONAL_END_MARKER=255,FLAG_HAS_TYPE_ID_STRING=1,FLAG_HAS_TYPE_ID_INDEX=2,FLAG_HAS_TYPE_ID_COMPACT=3,FLAG_HAS_OPTIONAL_MEMBERS=4,FLAG_HAS_INDIRECTION_TABLE=8,FLAG_HAS_SLICE_SIZE=16,FLAG_IS_LAST_SLICE=32,IndirectPatchEntry=function(e,t){this.index=e,this.patcher=t},Class=Ice.Class,EncapsDecoder=Class({__init__:function(e,t,n,i){this._stream=e,this._encaps=t,this._sliceObjects=n,this._servantFactoryManager=i,this._patchMap=null,this._unmarshaledMap=new HashMap,this._typeIdMap=null,this._typeIdIndex=0,this._objectList=null},readOpt:function(){return!1},readPendingObjects:function(){},readTypeId:function(e){var t,n;if(null===this._typeIdMap&&(this._typeIdMap=new HashMap),e){if(n=this._stream.readSize(),t=this._typeIdMap.get(n),void 0===t)throw new Ice.UnmarshalOutOfBoundsException}else t=this._stream.readString(),this._typeIdMap.set(++this._typeIdIndex,t);return t},newInstance:function(e){var t=this._servantFactoryManager.find(e),n=null;return void 0!==t&&(n=t.create(e)),(null===n||void 0===n)&&(t=this._servantFactoryManager.find(""),void 0!==t&&(n=t.create(e))),(null===n||void 0===n)&&(n=this._stream.createObject(e)),n},addPatchEntry:function(e,t){var n=this._unmarshaledMap.get(e);if(void 0!==n&&null!==n)return void t.call(null,n);null===this._patchMap&&(this._patchMap=new HashMap);var i=this._patchMap.get(e);void 0===i&&(i=[],this._patchMap.set(e,i)),i.push(t)},unmarshal:function(e,t){var n,i,r;if(this._unmarshaledMap.set(e,t),t.__read(this._stream),null!==this._patchMap&&(r=this._patchMap.get(e),void 0!==r)){for(n=0,i=r.length;i>n;++n)r[n](t);this._patchMap["delete"](e)}if(null!==this._patchMap&&0!==this._patchMap.size||null!==this._objectList){if(null===this._objectList&&(this._objectList=[]),this._objectList.push(t),null===this._patchMap||0===this._patchMap.size){for(n=0,i=this._objectList.length;i>n;n++)try{this._objectList[n].ice_postUnmarshal()}catch(o){this._stream.instance.initializationData().logger.warning("exception raised by ice_postUnmarshal:\n"+o.toString())}this._objectList=[]}}else try{t.ice_postUnmarshal()}catch(o){this._stream.instance.initializationData().logger.warning("exception raised by ice_postUnmarshal:\n"+o.toString())}}}),EncapsDecoder10=Class(EncapsDecoder,{__init__:function(e,t,n,i){EncapsDecoder.call(this,e,t,n,i),this._sliceType=SliceType.NoSlice},readObject:function(e){var t=this._stream.readInt();if(t>0)throw new Ice.MarshalException("invalid object id");t=-t,0===t?e.call(null,null):this.addPatchEntry(t,e)},throwException:function(){var e=this._stream.readBool();this._sliceType=SliceType.ExceptionSlice,this._skipFirstSlice=!1,this.startSlice();for(var t=this._typeId;;){var n=this._stream.createUserException(this._typeId);if(null!==n)throw n.__read(this._stream),e&&this.readPendingObjects(),n;this.skipSlice();try{this.startSlice()}catch(i){throw i instanceof Ice.UnmarshalOutOfBoundsException&&(i.reason="unknown exception type `"+t+"'"),i}}},startInstance:function(e){this._skipFirstSlice=!0},endInstance:function(){var e;if(this._sliceType===SliceType.ObjectSlice){if(this.startSlice(),e=this._stream.readSize(),0!==e)throw new Ice.MarshalException("invalid Object slice");this.endSlice()}return this._sliceType=SliceType.NoSlice,null},startSlice:function(){var e;if(this._skipFirstSlice)return this._skipFirstSlice=!1,this._typeId;if(this._sliceType===SliceType.ObjectSlice?(e=this._stream.readBool(),this._typeId=this.readTypeId(e)):this._typeId=this._stream.readString(),this._sliceSize=this._stream.readInt(),this._sliceSize<4)throw new Ice.UnmarshalOutOfBoundsException;return this._typeId},endSlice:function(){},skipSlice:function(){if(this._stream.instance.traceLevels().slicing>0){var e=this._stream.instance.initializationData().logger;this._sliceType===SliceType.ObjectSlice?TraceUtil.traceSlicing("object",this._typeId,this._stream.instance.traceLevels().slicingCat,e):TraceUtil.traceSlicing("exception",this._typeId,this._stream.instance.traceLevels().slicingCat,e)}this._stream.skip(this._sliceSize-4)},readPendingObjects:function(){var e,t;do for(t=this._stream.readSize(),e=t;e>0;--e)this.readInstance();while(t>0);if(null!==this._patchMap&&0!==this._patchMap.size)throw new Ice.MarshalException("index for class received, but no instance")},readInstance:function(){var e,t=this._stream.readInt(),n=null;if(0>=t)throw new Ice.MarshalException("invalid object id");for(this._sliceType=SliceType.ObjectSlice,this._skipFirstSlice=!1,this.startSlice(),e=this._typeId;;){if(this._typeId==IceObject.ice_staticId())throw new Ice.NoObjectFactoryException("",e);if(n=this.newInstance(this._typeId))break;if(!this._sliceObjects)throw new Ice.NoObjectFactoryException("no object factory found and object slicing is disabled",this._typeId);this.skipSlice(),this.startSlice()}this.unmarshal(t,n)}}),EncapsDecoder11=Class(EncapsDecoder,{__init__:function(e,t,n,i){EncapsDecoder.call(this,e,t,n,i),this._current=null,this._objectIdIndex=1},readObject:function(e){var t=this._stream.readSize();if(0>t)throw new Ice.MarshalException("invalid object id");if(0===t)null!==e&&e.call(null,null);else if(null!==this._current&&0!==(this._current.sliceFlags&FLAG_HAS_INDIRECTION_TABLE)){if(null!==e){null===this._current.indirectPatchList&&(this._current.indirectPatchList=[]);var n=new IndirectPatchEntry;n.index=t-1,n.patcher=e,this._current.indirectPatchList.push(n)}}else this.readInstance(t,e)},throwException:function(){this.push(SliceType.ExceptionSlice),this.startSlice();for(var e=this._current.typeId;;){var t=this._stream.createUserException(this._current.typeId);if(null!==t)throw t.__read(this._stream),t;if(this.skipSlice(),0!==(this._current.sliceFlags&FLAG_IS_LAST_SLICE)){if(0===e.indexOf("::"))throw new Ice.UnknownUserException(e.substr(2));throw new Ice.UnknownUserException(e)}this.startSlice()}},startInstance:function(e){this._current.skipFirstSlice=!0},endInstance:function(e){var t=null;return e&&(t=this.readSlicedData()),null!==this._current.slices&&(this._current.slices.length=0,this._current.indirectionTables.length=0),this._current=this._current.previous,t},startSlice:function(){if(this._current.skipFirstSlice)return this._current.skipFirstSlice=!1,this._current.typeId;if(this._current.sliceFlags=this._stream.readByte(),this._current.sliceType===SliceType.ObjectSlice?(this._current.sliceFlags&FLAG_HAS_TYPE_ID_COMPACT)===FLAG_HAS_TYPE_ID_COMPACT?(this._current.typeId="",this._current.compactId=this._stream.readSize()):0!==(this._current.sliceFlags&(FLAG_HAS_TYPE_ID_INDEX|FLAG_HAS_TYPE_ID_STRING))?(this._current.typeId=this.readTypeId(0!==(this._current.sliceFlags&FLAG_HAS_TYPE_ID_INDEX)),this._current.compactId=-1):(this._current.typeId="",this._current.compactId=-1):(this._current.typeId=this._stream.readString(),this._current.compactId=-1),0!==(this._current.sliceFlags&FLAG_HAS_SLICE_SIZE)){if(this._current.sliceSize=this._stream.readInt(),this._current.sliceSize<4)throw new Ice.UnmarshalOutOfBoundsException}else this._current.sliceSize=0;return this._current.typeId},endSlice:function(){var e,t,n,i=[];if(0!==(this._current.sliceFlags&FLAG_HAS_OPTIONAL_MEMBERS)&&this._stream.skipOpts(),0!==(this._current.sliceFlags&FLAG_HAS_INDIRECTION_TABLE)){for(n=this._stream.readAndCheckSeqSize(1),t=0;n>t;++t)i[t]=this.readInstance(this._stream.readSize(),null);if(0===i.length)throw new Ice.MarshalException("empty indirection table");if((null===this._current.indirectPatchList||0===this._current.indirectPatchList.length)&&0===(this._current.sliceFlags&FLAG_HAS_OPTIONAL_MEMBERS))throw new Ice.MarshalException("no references to indirection table");if(null!==this._current.indirectPatchList){for(t=0,n=this._current.indirectPatchList.length;n>t;++t){if(e=this._current.indirectPatchList[t],e.index>=i.length)throw new Ice.MarshalException("indirection out of range");this.addPatchEntry(i[e.index],e.patcher)}this._current.indirectPatchList.length=0}}},skipSlice:function(){if(this._stream.instance.traceLevels().slicing>0){var e=this._stream.instance.initializationData().logger,t=this._stream.instance.traceLevels().slicingCat;this._current.sliceType===SliceType.ExceptionSlice?TraceUtil.traceSlicing("exception",this._current.typeId,t,e):TraceUtil.traceSlicing("object",this._current.typeId,t,e)}var n=this._stream.pos;if(0===(this._current.sliceFlags&FLAG_HAS_SLICE_SIZE)){if(this._current.sliceType===SliceType.ObjectSlice)throw new Ice.NoObjectFactoryException("no object factory found and compact format prevents slicing (the sender should use the sliced format instead)",this._current.typeId);if(0===this._current.typeId.indexOf("::"))throw new Ice.UnknownUserException(this._current.typeId.substring(2));throw new Ice.UnknownUserException(this._current.typeId)}this._stream.skip(this._current.sliceSize-4);var i=new Ice.SliceInfo;i.typeId=this._current.typeId,i.compactId=this._current.compactId,i.hasOptionalMembers=0!==(this._current.sliceFlags&FLAG_HAS_OPTIONAL_MEMBERS),i.isLastSlice=0!==(this._current.sliceFlags&FLAG_IS_LAST_SLICE);
var r=this._stream._buf,o=r.position,c=o;if(i.hasOptionalMembers&&--c,r.position=n,i.bytes=r.getArray(c-n),r.position=o,null===this._current.slices&&(this._current.slices=[],this._current.indirectionTables=[]),0!==(this._current.sliceFlags&FLAG_HAS_INDIRECTION_TABLE)){for(var s=this._stream.readAndCheckSeqSize(1),a=[],h=0;s>h;++h)a[h]=this.readInstance(this._stream.readSize(),null);this._current.indirectionTables.push(a)}else this._current.indirectionTables.push(null);this._current.slices.push(i)},readOpt:function(e,t){return null===this._current?this._stream.readOptImpl(e,t):0!==(this._current.sliceFlags&FLAG_HAS_OPTIONAL_MEMBERS)?this._stream.readOptImpl(e,t):!1},readInstance:function(e,t){var n,i=null;if(e>1)return null!==t&&this.addPatchEntry(e,t),e;for(this.push(SliceType.ObjectSlice),e=++this._objectIdIndex,this.startSlice(),n=this._current.typeId;;){if(this._current.compactId>=0&&(this._current.typeId="",0===this._current.typeId.length&&(this._current.typeId=this._stream.getTypeId(this._current.compactId))),this._current.typeId.length>0&&(i=this.newInstance(this._current.typeId),null!==i&&void 0!==i))break;if(!this._sliceObjects)throw new Ice.NoObjectFactoryException("no object factory found and object slicing is disabled",this._current.typeId);if(this.skipSlice(),0!==(this._current.sliceFlags&FLAG_IS_LAST_SLICE)){i=new Ice.UnknownSlicedObject(n);break}this.startSlice()}if(this.unmarshal(e,i),null===this._current&&null!==this._patchMap&&0!==this._patchMap.size)throw new Ice.MarshalException("index for class received, but no instance");return null!==t&&t.call(null,i),e},readSlicedData:function(){var e,t,n,i,r,o;if(null===this._current.slices)return null;for(e=0,t=this._current.slices.length;t>e;++e)for(n=this._current.indirectionTables[e],i=this._current.slices[e],i.objects=[],o=n?n.length:0,r=0;o>r;++r)this.addPatchEntry(n[r],sequencePatcher(i.objects,r,IceObject));return new SlicedData(ArrayUtil.clone(this._current.slices))},push:function(e){null===this._current?this._current=new EncapsDecoder11.InstanceData(null):this._current=this._current.next?this._current.next:new EncapsDecoder11.InstanceData(this._current),this._current.sliceType=e,this._current.skipFirstSlice=!1}});EncapsDecoder11.InstanceData=function(e){null!==e&&(e.next=this),this.previous=e,this.next=null,this.sliceType=null,this.skipFirstSlice=!1,this.slices=null,this.indirectionTables=null,this.sliceFlags=0,this.sliceSize=0,this.typeId=null,this.compactId=0,this.indirectPatchList=null};var sequencePatcher=function(e,t,n){return function(i){null===i||i instanceof n||ExUtil.throwUOE(n.ice_staticId(),i),e[t]=i}},EncapsEncoder=Class({__init__:function(e,t){this._stream=e,this._encaps=t,this._marshaledMap=new HashMap,this._typeIdMap=null,this._typeIdIndex=0},writeOpt:function(){return!1},writePendingObjects:function(){},registerTypeId:function(e){null===this._typeIdMap&&(this._typeIdMap=new HashMap);var t=this._typeIdMap.get(e);return void 0!==t?t:(this._typeIdMap.set(e,++this._typeIdIndex),-1)}}),EncapsEncoder10=Class(EncapsEncoder,{__init__:function(e,t){EncapsEncoder.call(this,e,t),this._sliceType=SliceType.NoSlice,this._writeSlice=0,this._objectIdIndex=0,this._toBeMarshaledMap=new HashMap},writeObject:function(e){null!==e?this._stream.writeInt(-this.registerObject(e)):this._stream.writeInt(0)},writeUserException:function(e){var t=e.__usesClasses();this._stream.writeBool(t),e.__write(this._stream),t&&this.writePendingObjects()},startInstance:function(e){this._sliceType=e},endInstance:function(){this._sliceType===SliceType.ObjectSlice&&(this.startSlice(IceObject.ice_staticId(),-1,!0),this._stream.writeSize(0),this.endSlice()),this._sliceType=SliceType.NoSlice},startSlice:function(e){if(this._sliceType===SliceType.ObjectSlice){var t=this.registerTypeId(e);0>t?(this._stream.writeBool(!1),this._stream.writeString(e)):(this._stream.writeBool(!0),this._stream.writeSize(t))}else this._stream.writeString(e);this._stream.writeInt(0),this._writeSlice=this._stream.pos},endSlice:function(){var e=this._stream.pos-this._writeSlice+4;this._stream.rewriteInt(e,this._writeSlice-4)},writePendingObjects:function(){for(var e,t=this,n=function(e,n){t._stream.writeInt(n);try{e.ice_preMarshal()}catch(i){t._stream.instance.initializationData().logger.warning("exception raised by ice_preMarshal:\n"+i.toString())}e.__write(t._stream)};this._toBeMarshaledMap.size>0;)this._marshaledMap.merge(this._toBeMarshaledMap),e=this._toBeMarshaledMap,this._toBeMarshaledMap=new HashMap,this._stream.writeSize(e.size),e.forEach(n);this._stream.writeSize(0)},registerObject:function(e){var t=this._toBeMarshaledMap.get(e);return void 0!==t?t:(t=this._marshaledMap.get(e),void 0!==t?t:(this._toBeMarshaledMap.set(e,++this._objectIdIndex),this._objectIdIndex))}}),EncapsEncoder11=Class(EncapsEncoder,{__init__:function(e,t){EncapsEncoder.call(this,e,t),this._current=null,this._objectIdIndex=1},writeObject:function(e){var t,n;null===e?this._stream.writeSize(0):null!==this._current&&this._encaps.format===FormatType.SlicedFormat?(null===this._current.indirectionTable&&(this._current.indirectionTable=[],this._current.indirectionMap=new HashMap),t=this._current.indirectionMap.get(e),void 0===t?(this._current.indirectionTable.push(e),n=this._current.indirectionTable.length,this._current.indirectionMap.set(e,n),this._stream.writeSize(n)):this._stream.writeSize(t)):this.writeInstance(e)},writePendingObjects:function(){},writeUserException:function(e){e.__write(this._stream)},startInstance:function(e,t){null===this._current?this._current=new EncapsEncoder11.InstanceData(null):this._current=null===this._current.next?new EncapsEncoder11.InstanceData(this._current):this._current.next,this._current.sliceType=e,this._current.firstSlice=!0,null!==t&&void 0!==t&&this.writeSlicedData(t)},endInstance:function(){this._current=this._current.previous},startSlice:function(e,t,n){if(this._current.sliceFlagsPos=this._stream.pos,this._current.sliceFlags=0,this._encaps.format===FormatType.SlicedFormat&&(this._current.sliceFlags|=FLAG_HAS_SLICE_SIZE),n&&(this._current.sliceFlags|=FLAG_IS_LAST_SLICE),this._stream.writeByte(0),this._current.sliceType===SliceType.ObjectSlice){if(this._encaps.format===FormatType.SlicedFormat||this._current.firstSlice)if(t>=0)this._current.sliceFlags|=FLAG_HAS_TYPE_ID_COMPACT,this._stream.writeSize(t);else{var i=this.registerTypeId(e);0>i?(this._current.sliceFlags|=FLAG_HAS_TYPE_ID_STRING,this._stream.writeString(e)):(this._current.sliceFlags|=FLAG_HAS_TYPE_ID_INDEX,this._stream.writeSize(i))}}else this._stream.writeString(e);0!==(this._current.sliceFlags&FLAG_HAS_SLICE_SIZE)&&this._stream.writeInt(0),this._current.writeSlice=this._stream.pos,this._current.firstSlice=!1},endSlice:function(){var e,t,n;if(0!==(this._current.sliceFlags&FLAG_HAS_OPTIONAL_MEMBERS)&&this._stream.writeByte(OPTIONAL_END_MARKER),0!==(this._current.sliceFlags&FLAG_HAS_SLICE_SIZE)&&(e=this._stream.pos-this._current.writeSlice+4,this._stream.rewriteInt(e,this._current.writeSlice-4)),null!==this._current.indirectionTable&&0!==this._current.indirectionTable.length){for(this._current.sliceFlags|=FLAG_HAS_INDIRECTION_TABLE,this._stream.writeSize(this._current.indirectionTable.length),t=0,n=this._current.indirectionTable.length;n>t;++t)this.writeInstance(this._current.indirectionTable[t]);this._current.indirectionTable.length=0,this._current.indirectionMap.clear()}this._stream.rewriteByte(this._current.sliceFlags,this._current.sliceFlagsPos)},writeOpt:function(e,t){return null===this._current?this._stream.writeOptImpl(e,t):this._stream.writeOptImpl(e,t)?(this._current.sliceFlags|=FLAG_HAS_OPTIONAL_MEMBERS,!0):!1},writeSlicedData:function(e){if(this._encaps.format===FormatType.SlicedFormat){var t,n,i,r,o;for(t=0,n=e.slices.length;n>t;++t){if(i=e.slices[t],this.startSlice(i.typeId,i.compactId,i.isLastSlice),this._stream.writeBlob(i.bytes),i.hasOptionalMembers&&(this._current.sliceFlags|=FLAG_HAS_OPTIONAL_MEMBERS),null!==i.objects&&i.objects.length>0)for(null===this._current.indirectionTable&&(this._current.indirectionTable=[],this._current.indirectionMap=new HashMap),r=0,o=i.objects.length;o>r;++r)this._current.indirectionTable.push(i.objects[r]);this.endSlice()}}},writeInstance:function(e){var t=this._marshaledMap.get(e);if(void 0!==t)return void this._stream.writeSize(t);this._marshaledMap.set(e,++this._objectIdIndex);try{e.ice_preMarshal()}catch(n){this._stream.instance.initializationData().logger.warning("exception raised by ice_preMarshal:\n"+n.toString())}this._stream.writeSize(1),e.__write(this._stream)}});EncapsEncoder11.InstanceData=function(e){null!==e&&(e.next=this),this.previous=e,this.next=null,this.sliceType=null,this.firstSlice=!1,this.sliceFlags=0,this.writeSlice=0,this.sliceFlagsPos=0,this.indirectionTable=null,this.indirectionMap=null};var ReadEncaps=Class({__init__:function(){this.start=0,this.sz=0,this.encoding=null,this.encoding_1_0=!1,this.decoder=null,this.next=null},reset:function(){this.decoder=null},setEncoding:function(e){this.encoding=e,this.encoding_1_0=e.equals(Ice.Encoding_1_0)}}),WriteEncaps=Class({__init__:function(){this.start=0,this.format=FormatType.DefaultFormat,this.encoding=null,this.encoding_1_0=!1,this.encoder=null,this.next=null},reset:function(){this.encoder=null},setEncoding:function(e){this.encoding=e,this.encoding_1_0=e.equals(Ice.Encoding_1_0)}}),BasicStream=Class({__init__:function(e,t,n){this._instance=e,this._closure=null,this._encoding=t,this._readEncapsStack=null,this._writeEncapsStack=null,this._readEncapsCache=null,this._writeEncapsCache=null,this._sliceObjects=!0,this._startSeq=-1,this._sizePos=-1,void 0!==n?this._buf=new Ice.Buffer(n):this._buf=new Ice.Buffer},reset:function(){this._buf.reset(),this.clear()},clear:function(){null!==this._readEncapsStack&&(this._readEncapsStack.next=this._readEncapsCache,this._readEncapsCache=this._readEncapsStack,this._readEncapsCache.reset(),this._readEncapsStack=null),null!==this._writeEncapsStack&&(this._writeEncapsStack.next=this._writeEncapsCache,this._writeEncapsCache=this._writeEncapsStack,this._writeEncapsCache.reset(),this._writeEncapsStack=null),this._startSeq=-1,this._sliceObjects=!0},swap:function(e){var t,n,i,r,o;t=e._buf,e._buf=this._buf,this._buf=t,n=e._closure,e._closure=this._closure,this._closure=n,this.resetEncaps(),e.resetEncaps(),i=e._startSeq,e._startSeq=this._startSeq,this._startSeq=i,r=e._minSeqSize,e._minSeqSize=this._minSeqSize,this._minSeqSize=r,o=e._sizePos,e._sizePos=this._sizePos,this._sizePos=o},resetEncaps:function(){this._readEncapsStack=null,this._writeEncapsStack=null},resize:function(e){this._buf.resize(e),this._buf.position=e},prepareWrite:function(){return this._buf.position=0,this._buf},startWriteObject:function(e){this._writeEncapsStack.encoder.startInstance(SliceType.ObjectSlice,e)},endWriteObject:function(){this._writeEncapsStack.encoder.endInstance()},startReadObject:function(){this._readEncapsStack.decoder.startInstance(SliceType.ObjectSlice)},endReadObject:function(e){return this._readEncapsStack.decoder.endInstance(e)},startWriteException:function(e){this._writeEncapsStack.encoder.startInstance(SliceType.ExceptionSlice,e)},endWriteException:function(){this._writeEncapsStack.encoder.endInstance()},startReadException:function(){this._readEncapsStack.decoder.startInstance(SliceType.ExceptionSlice)},endReadException:function(e){return this._readEncapsStack.decoder.endInstance(e)},startWriteEncaps:function(e,t){void 0===e&&(null!==this._writeEncapsStack?(e=this._writeEncapsStack.encoding,t=this._writeEncapsStack.format):(e=this._encoding,t=FormatType.DefaultFormat)),Protocol.checkSupportedEncoding(e);var n=this._writeEncapsCache;null!==n?(n.reset(),this._writeEncapsCache=this._writeEncapsCache.next):n=new WriteEncaps,n.next=this._writeEncapsStack,this._writeEncapsStack=n,this._writeEncapsStack.format=t,this._writeEncapsStack.setEncoding(e),this._writeEncapsStack.start=this._buf.limit,this.writeInt(0),this._writeEncapsStack.encoding.__write(this)},endWriteEncaps:function(){var e=this._writeEncapsStack.start,t=this._buf.limit-e;this._buf.putIntAt(e,t);var n=this._writeEncapsStack;this._writeEncapsStack=n.next,n.next=this._writeEncapsCache,this._writeEncapsCache=n,this._writeEncapsCache.reset()},endWriteEncapsChecked:function(){if(null===this._writeEncapsStack)throw new Ice.EncapsulationException("not in an encapsulation");this.endWriteEncaps()},writeEmptyEncaps:function(e){Protocol.checkSupportedEncoding(e),this.writeInt(6),e.__write(this)},writeEncaps:function(e){if(e.length<6)throw new Ice.EncapsulationException;this.expand(e.length),this._buf.putArray(e)},getWriteEncoding:function(){return null!==this._writeEncapsStack?this._writeEncapsStack.encoding:this._encoding},startReadEncaps:function(){var e=this._readEncapsCache;null!==e?(e.reset(),this._readEncapsCache=this._readEncapsCache.next):e=new ReadEncaps,e.next=this._readEncapsStack,this._readEncapsStack=e,this._readEncapsStack.start=this._buf.position;var t=this.readInt();if(6>t)throw new Ice.UnmarshalOutOfBoundsException;if(t-4>this._buf.remaining)throw new Ice.UnmarshalOutOfBoundsException;this._readEncapsStack.sz=t;var n=new Ice.EncodingVersion;return n.__read(this),Protocol.checkSupportedEncoding(n),this._readEncapsStack.setEncoding(n),n},endReadEncaps:function(){if(this._readEncapsStack.encoding_1_0){if(this._buf.position!==this._readEncapsStack.start+this._readEncapsStack.sz){if(this._buf.position+1!==this._readEncapsStack.start+this._readEncapsStack.sz)throw new Ice.EncapsulationException;try{this._buf.get()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}}else if(this.skipOpts(),this._buf.position!==this._readEncapsStack.start+this._readEncapsStack.sz)throw new Ice.EncapsulationException;var t=this._readEncapsStack;this._readEncapsStack=t.next,t.next=this._readEncapsCache,this._readEncapsCache=t,this._readEncapsCache.reset()},skipEmptyEncaps:function(e){var t=this.readInt();if(6!==t)throw new Ice.EncapsulationException;var n=this._buf.position;if(n+2>this._buf.limit)throw new Ice.UnmarshalOutOfBoundsException;null!==e?e.__read(this):this._buf.position=n+2},endReadEncapsChecked:function(){if(null===this._readEncapsStack)throw new Ice.EncapsulationException("not in an encapsulation");this.endReadEncaps()},readEncaps:function(e){var t=this.readInt();if(6>t)throw new Ice.UnmarshalOutOfBoundsException;if(t-4>this._buf.remaining)throw new Ice.UnmarshalOutOfBoundsException;null!==e?(e.__read(this),this._buf.position=this._buf.position-6):this._buf.position=this._buf.position-4;try{return this._buf.getArray(t)}catch(n){throw new Ice.UnmarshalOutOfBoundsException}},getReadEncoding:function(){return null!==this._readEncapsStack?this._readEncapsStack.encoding:this._encoding},getReadEncapsSize:function(){return this._readEncapsStack.sz-6},skipEncaps:function(){var e=this.readInt();if(6>e)throw new Ice.UnmarshalOutOfBoundsException;var t=new Ice.EncodingVersion;t.__read(this);try{this._buf.position=this._buf.position+e-6}catch(n){throw new Ice.UnmarshalOutOfBoundsException}return t},startWriteSlice:function(e,t,n){this._writeEncapsStack.encoder.startSlice(e,t,n)},endWriteSlice:function(){this._writeEncapsStack.encoder.endSlice()},startReadSlice:function(){return this._readEncapsStack.decoder.startSlice()},endReadSlice:function(){this._readEncapsStack.decoder.endSlice()},skipSlice:function(){this._readEncapsStack.decoder.skipSlice()},readPendingObjects:function(){null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder?this._readEncapsStack.decoder.readPendingObjects():(null!==this._readEncapsStack&&this._readEncapsStack.encoding_1_0||null===this._readEncapsStack&&this._encoding.equals(Ice.Encoding_1_0))&&this.skipSize()},writePendingObjects:function(){null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder?this._writeEncapsStack.encoder.writePendingObjects():(null!==this._writeEncapsStack&&this._writeEncapsStack.encoding_1_0||null===this._writeEncapsStack&&this._encoding.equals(Ice.Encoding_1_0))&&this.writeSize(0)},writeSize:function(e){e>254?(this.expand(5),this._buf.put(255),this._buf.putInt(e)):(this.expand(1),this._buf.put(e))},readSize:function(){try{var e=this._buf.get();if(255===e){var t=this._buf.getInt();if(0>t)throw new Ice.UnmarshalOutOfBoundsException;return t}return e}catch(n){throw new Ice.UnmarshalOutOfBoundsException}},readAndCheckSeqSize:function(e){var t=this.readSize();if(0===t)return t;if(-1===this._startSeq||this._buf.position>this._startSeq+this._minSeqSize?(this._startSeq=this._buf.position,this._minSeqSize=t*e):this._minSeqSize+=t*e,this._startSeq+this._minSeqSize>this._buf.limit)throw new Ice.UnmarshalOutOfBoundsException;return t},startSize:function(){var e=this._buf.position;return this.writeInt(0),e},endSize:function(e){this.rewriteInt(this._buf.position-e-4,e)},writeBlob:function(e){null!==e&&(this.expand(e.length),this._buf.putArray(e))},readBlob:function(e){if(this._buf.remaining<e)throw new Ice.UnmarshalOutOfBoundsException;try{return this._buf.getArray(e)}catch(t){throw new Ice.UnmarshalOutOfBoundsException}},writeOpt:function(e,t){return null!==this._writeEncapsStack.encoder?this._writeEncapsStack.encoder.writeOpt(e,t):this.writeOptImpl(e,t)},readOpt:function(e,t){return null!==this._readEncapsStack.decoder?this._readEncapsStack.decoder.readOpt(e,t):this.readOptImpl(e,t)},writeOptValue:function(e,t,n,i){void 0!==i&&this.writeOpt(e,t)&&n.call(this,i)},readOptValue:function(e,t,n){return this.readOpt(e,t)?n.call(this):void 0},writeByte:function(e){this.expand(1),this._buf.put(e)},rewriteByte:function(e,t){this._buf.putAt(t,e)},readByte:function(){try{return this._buf.get()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeByteSeq:function(e){null===e||0===e.length?this.writeSize(0):(this.writeSize(e.length),this.expand(e.length),this._buf.putArray(e))},readByteSeq:function(){return this._buf.getArray(this.readAndCheckSeqSize(1))},writeBool:function(e){this.expand(1),this._buf.put(e?1:0)},rewriteBool:function(e,t){this._buf.putAt(t,e?1:0)},readBool:function(){try{return 1===this._buf.get()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeShort:function(e){this.expand(2),this._buf.putShort(e)},readShort:function(){try{return this._buf.getShort()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeInt:function(e){this.expand(4),this._buf.putInt(e)},rewriteInt:function(e,t){this._buf.putIntAt(t,e)},readInt:function(){try{return this._buf.getInt()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeLong:function(e){this.expand(8),this._buf.putLong(e)},readLong:function(){try{return this._buf.getLong()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeFloat:function(e){this.expand(4),this._buf.putFloat(e)},readFloat:function(){try{return this._buf.getFloat()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeDouble:function(e){this.expand(8),this._buf.putDouble(e)},readDouble:function(){try{return this._buf.getDouble()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeString:function(e){null===e||0===e.length?this.writeSize(0):this._buf.writeString(this,e)},readString:function(){var e=this.readSize();if(0===e)return"";if(this._buf.remaining<e)throw new Ice.UnmarshalOutOfBoundsException;try{return this._buf.getString(e)}catch(t){throw new Ice.UnmarshalOutOfBoundsException}},writeProxy:function(e){this._instance.proxyFactory().proxyToStream(e,this)},writeOptProxy:function(e,t){if(void 0!==t&&this.writeOpt(e,OptionalFormat.FSize)){var n=this.startSize();this.writeProxy(t),this.endSize(n)}},readProxy:function(e){return this._instance.proxyFactory().streamToProxy(this,e)},readOptProxy:function(e,t){return this.readOpt(e,OptionalFormat.FSize)?(this.skip(4),this.readProxy(t)):void 0},writeEnum:function(e){this.isWriteEncoding_1_0()?e.maxValue<127?this.writeByte(e.value):e.maxValue<32767?this.writeShort(e.value):this.writeInt(e.value):this.writeSize(e.value)},readEnum:function(e){var t;t=this.getReadEncoding().equals(Ice.Encoding_1_0)?e.maxValue<127?this.readByte():e.maxValue<32767?this.readShort():this.readInt():this.readSize();var n=e.valueOf(t);if(void 0===n)throw new Ice.MarshalException("enumerator value "+t+" is out of range");return n},readOptEnum:function(e,t){return this.readOpt(e,OptionalFormat.Size)?this.readEnum(t):void 0},writeObject:function(e){this.initWriteEncaps(),this._writeEncapsStack.encoder.writeObject(e)},writeOptObject:function(e,t){void 0!==t&&this.writeOpt(e,OptionalFormat.Class)&&this.writeObject(t)},readObject:function(e,t){this.initReadEncaps(),this._readEncapsStack.decoder.readObject.call(this._readEncapsStack.decoder,function(n){null===n||n.ice_instanceof(t)||ExUtil.throwUOE(t.ice_staticId(),n),e(n)})},readOptObject:function(e,t,n){this.readOpt(e,OptionalFormat.Class)?this.readObject(t,n):t(void 0)},writeUserException:function(e){this.initWriteEncaps(),this._writeEncapsStack.encoder.writeUserException(e)},throwException:function(){this.initReadEncaps(),this._readEncapsStack.decoder.throwException()},sliceObjects:function(e){this._sliceObjects=e},readOptImpl:function(e,t){var n,i,r,o;if(this.isReadEncoding_1_0())return!1;for(;;){if(this._buf.position>=this._readEncapsStack.start+this._readEncapsStack.sz)return!1;if(n=this.readByte(),n===OPTIONAL_END_MARKER)return this._buf.position-=1,!1;if(i=OptionalFormat.valueOf(7&n),r=n>>3,30===r&&(r=this.readSize()),r>e)return o=30>r?1:255>r?2:6,this._buf.position-=o,!1;if(!(e>r)){if(i!==t)throw new Ice.MarshalException("invalid optional data member `"+r+"': unexpected format");return!0}this.skipOpt(i)}},writeOptImpl:function(e,t){if(this.isWriteEncoding_1_0())return!1;var n=t.value;return 30>e?(n|=e<<3,this.writeByte(n)):(n|=240,this.writeByte(n),this.writeSize(e)),!0},skipOpt:function(e){switch(e){case OptionalFormat.F1:this.skip(1);break;case OptionalFormat.F2:this.skip(2);break;case OptionalFormat.F4:this.skip(4);break;case OptionalFormat.F8:this.skip(8);break;case OptionalFormat.Size:this.skipSize();break;case OptionalFormat.VSize:this.skip(this.readSize());break;case OptionalFormat.FSize:this.skip(this.readInt());break;case OptionalFormat.Class:this.readObject(null,Ice.Object)}},skipOpts:function(){for(var e,t,n;;){if(this._buf.position>=this._readEncapsStack.start+this._readEncapsStack.sz)return;if(e=this.readByte(),t=0>e?e+256:e,t===OPTIONAL_END_MARKER)return;n=OptionalFormat.valueOf(7&t),t>>3===30&&this.skipSize(),this.skipOpt(n)}},skip:function(e){if(e>this._buf.remaining)throw new Ice.UnmarshalOutOfBoundsException;this._buf.position+=e},skipSize:function(){var e=this.readByte();255===e&&this.skip(4)},isEmpty:function(){return this._buf.empty()},expand:function(e){this._buf.expand(e)},createObject:function(id){var obj=null,Class;try{var typeId=id.length>2?id.substr(2).replace(/::/g,"."):"";Class=eval(typeId),void 0!==Class&&(obj=new Class)}catch(ex){throw new Ice.NoObjectFactoryException("no object factory",id,ex)}return obj},getTypeId:function(e){var t=Ice.CompactIdRegistry.get(e);return void 0===t?"":t},isReadEncoding_1_0:function(){return null!==this._readEncapsStack?this._readEncapsStack.encoding_1_0:this._encoding.equals(Ice.Encoding_1_0)},isWriteEncoding_1_0:function(){return this._writeEncapsStack?this._writeEncapsStack.encoding_1_0:this._encoding.equals(Ice.Encoding_1_0)},initReadEncaps:function(){if(null===this._readEncapsStack&&(this._readEncapsStack=this._readEncapsCache,null!==this._readEncapsStack?this._readEncapsCache=this._readEncapsCache.next:this._readEncapsStack=new ReadEncaps,this._readEncapsStack.setEncoding(this._encoding),this._readEncapsStack.sz=this._buf.limit),null===this._readEncapsStack.decoder){var e=this._instance.servantFactoryManager();this._readEncapsStack.encoding_1_0?this._readEncapsStack.decoder=new EncapsDecoder10(this,this._readEncapsStack,this._sliceObjects,e):this._readEncapsStack.decoder=new EncapsDecoder11(this,this._readEncapsStack,this._sliceObjects,e)}},initWriteEncaps:function(){this._writeEncapsStack||(this._writeEncapsStack=this._writeEncapsCache,this._writeEncapsStack?this._writeEncapsCache=this._writeEncapsCache.next:this._writeEncapsStack=new WriteEncaps,this._writeEncapsStack.setEncoding(this._encoding)),this._writeEncapsStack.format===FormatType.DefaultFormat&&(this._writeEncapsStack.format=this._instance.defaultsAndOverrides().defaultFormat),this._writeEncapsStack.encoder||(this._writeEncapsStack.encoding_1_0?this._writeEncapsStack.encoder=new EncapsEncoder10(this,this._writeEncapsStack):this._writeEncapsStack.encoder=new EncapsEncoder11(this,this._writeEncapsStack))},createUserException:function(id){var userEx=null,Class;try{var typeId=id.length>2?id.substr(2).replace(/::/g,"."):"";Class=eval(typeId),void 0!==Class&&(userEx=new Class)}catch(ex){throw new Ice.MarshalException(ex)}return userEx}}),defineProperty=Object.defineProperty;defineProperty(BasicStream.prototype,"pos",{get:function(){return this._buf.position},set:function(e){this._buf.position=e}}),defineProperty(BasicStream.prototype,"size",{get:function(){return this._buf.limit}}),defineProperty(BasicStream.prototype,"instance",{get:function(){return this._instance}}),defineProperty(BasicStream.prototype,"closure",{get:function(){return this._type},set:function(e){this._type=e}}),defineProperty(BasicStream.prototype,"buffer",{get:function(){return this._buf}});var defineBuiltinHelper=function(e,t,n,i){var r={write:function(t,n){return e.call(t,n)},read:function(e){return t.call(e)},writeOpt:function(t,n,r){t.writeOptValue(n,i,e,r)},readOpt:function(e,n){return e.readOptValue(n,i,t)}};return defineProperty(r,"minWireSize",{get:function(){return n}}),r},stream=BasicStream.prototype;Ice.ByteHelper=defineBuiltinHelper(stream.writeByte,stream.readByte,1,Ice.OptionalFormat.F1),Ice.BoolHelper=defineBuiltinHelper(stream.writeBool,stream.readBool,1,Ice.OptionalFormat.F1),Ice.ShortHelper=defineBuiltinHelper(stream.writeShort,stream.readShort,2,Ice.OptionalFormat.F2),Ice.IntHelper=defineBuiltinHelper(stream.writeInt,stream.readInt,4,Ice.OptionalFormat.F4),Ice.LongHelper=defineBuiltinHelper(stream.writeLong,stream.readLong,8,Ice.OptionalFormat.F8),Ice.FloatHelper=defineBuiltinHelper(stream.writeFloat,stream.readFloat,4,Ice.OptionalFormat.F4),Ice.DoubleHelper=defineBuiltinHelper(stream.writeDouble,stream.readDouble,8,Ice.OptionalFormat.F8),Ice.StringHelper=defineBuiltinHelper(stream.writeString,stream.readString,1,Ice.OptionalFormat.VSize),Ice.ObjectHelper={write:function(e,t){e.writeObject(t)},read:function(e){var t;return e.readObject(function(e){t=e},Ice.Object),t},writeOpt:function(e,t,n){e.writeOptValue(t,Ice.OptionalFormat.Class,stream.writeObject,n)},readOpt:function(e,t){var n;return e.readOptObject(t,function(e){n=e},Ice.Object),n}},defineProperty(Ice.ObjectHelper,"minWireSize",{get:function(){return 1}}),Ice.BasicStream=BasicStream}(),function(){var e=Ice.AsyncResultBase,t=(Ice.Debug,Ice.Promise,Ice.Protocol),n=Ice.UserException,i=Ice.BasicStream,r=Ice.Class(e,{__init__:function(n,r,o,c,s,a){e.call(this,n,r,o,c,s),void 0!==n&&(this._completed=a,this._is=null,this._os=null!==n?new i(this._instance,t.currentProtocolEncoding):null,this._state=0,this._exception=null,this._sentSynchronously=!1)},cancel:function(){this.__cancel(new Ice.InvocationCanceledException)},isCompleted:function(){return(this._state&r.Done)>0},isSent:function(){return(this._state&r.Sent)>0},throwLocalException:function(){if(null!==this._exception)throw this._exception},sentSynchronously:function(){return this._sentSynchronously},__markSent:function(e){this._state|=r.Sent,e&&(this._state|=r.Done|r.OK,this._cancellationHandler=null,this.succeed(this))},__markFinished:function(e,t){this._state|=r.Done,e&&(this._state|=r.OK),this._cancellationHandler=null,t?t(this):this.succeed(this)},__markFinishedEx:function(e){this._exception=e,this._state|=r.Done,this._cancellationHandler=null,this.fail(e,this)},__cancel:function(e){this._cancellationException=e,this._cancellationHandler&&this._cancellationHandler.asyncRequestCanceled(this,e)},__cancelable:function(e){if(this._cancellationException)try{throw this._cancellationException}finally{this._cancellationException=null}this._cancellationHandler=e},__os:function(){return this._os},__is:function(){return this._is},__startReadParams:function(){return this._is.startReadEncaps(),this._is},__endReadParams:function(){this._is.endReadEncaps()},__readEmptyParams:function(){this._is.skipEmptyEncaps(null)},__readParamEncaps:function(){return this._is.readEncaps(null)},__throwUserException:function(){if(0===(this._state&r.OK))try{this._is.startReadEncaps(),this._is.throwException()}catch(e){throw e instanceof n&&this._is.endReadEncaps(),e}}});r.OK=1,r.Done=2,r.Sent=4,Ice.AsyncResult=r}(),function(){Ice.SocketOperation={None:0,Read:1,Write:2,Connect:2}}(),function(){var e=Ice.AsyncStatus,t=Ice.AsyncResult,n=Ice.BasicStream,i=(Ice.Debug,Ice.HashMap),r=Ice.RetryException,o=(Ice.OperationMode,Ice.Protocol),c=Ice.Identity,s=Ice.Class(t,{__init__:function(e,i,r,c,s){void 0!==e?(t.call(this,e,i,r,c,s),this._os=new n(this._instance,o.currentProtocolEncoding)):t.call(this)},__os:function(){return this._os},__sent:function(){this.__markSent(!0)},__completedEx:function(e){this.__markFinishedEx(e)},__retryException:function(e){}}),a=Ice.Class(s,{__init__:function(e,n){void 0!==e?(s.call(this,e.ice_getCommunicator(),n,null,e,null),this._mode=null,this._cnt=0,this._sent=!1,this._handler=null):t.call(this)},__completedEx:function(e){try{this._instance.retryQueue().add(this,this.__handleException(e))}catch(e){this.__markFinishedEx(e)}},__retryException:function(e){try{this.__handleRetryException(e.inner),this._instance.retryQueue().add(this,0)}catch(e){this.__completedEx(e)}},__retry:function(){this.__invokeImpl(!1)},__abort:function(e){this.__markFinishedEx(e)},__invokeImpl:function(t){try{if(t){var n=this._proxy.__reference().getInvocationTimeout();if(n>0){var i=this;this._timeoutToken=this._instance.timer().schedule(function(){i.__cancel(new Ice.InvocationTimeoutException)},n)}}for(;;)try{this._sent=!1,this._handler=this._proxy.__getRequestHandler();var o=this._handler.sendAsyncRequest(this);return void((o&e.Sent)>0&&t&&(this._sentSynchronously=!0))}catch(c){if(c instanceof r)this.__handleRetryException(c.inner);else{var s=this.__handleException(c);if(s>0)return void this._instance.retryQueue().add(this,s)}}}catch(c){this.__markFinishedEx(c)}},__markSent:function(e){this._sent=!0,e&&this._timeoutToken&&this._instance.timer().cancel(this._timeoutToken),s.prototype.__markSent.call(this,e)},__markFinishedEx:function(e){this._timeoutToken&&this._instance.timer().cancel(this._timeoutToken),s.prototype.__markFinishedEx.call(this,e)},__handleRetryException:function(e){this._proxy.__setRequestHandler(this._handler,null)},__handleException:function(e){var t={value:0};return this._cnt=this._proxy.__handleException(e,this._handler,this._mode,this._sent,t,this._cnt),t.value}}),h=Ice.Class(a,{__init__:function(e,t,n){void 0!==e?(a.call(this,e,t),this._encoding=o.getCompatibleEncoding(this._proxy.__reference().getEncoding()),this._completed=n):a.call(this)},__prepare:function(e,t,n){if(o.checkSupportedProtocol(o.getCompatibleProtocol(this._proxy.__reference().getProtocol())),this._mode=t,null===n&&(n=h._emptyContext),this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram())for(;;)try{this._handler=this._proxy.__getRequestHandler(),this._handler.prepareBatchRequest(this._os);break}catch(c){if(!(c instanceof r))throw this._proxy.__setRequestHandler(this._handler,null),this._handler=null,c;this._proxy.__setRequestHandler(this._handler,null)}else this._os.writeBlob(o.requestHdr);var s=this._proxy.__reference();s.getIdentity().__write(this._os);var a=s.getFacet();if(null===a||0===a.length?Ice.StringSeqHelper.write(this._os,null):Ice.StringSeqHelper.write(this._os,[a]),this._os.writeString(this._operation),this._os.writeByte(t.value),void 0!==n){if(null!==n&&!(n instanceof i))throw new Error("illegal context value, expecting null or HashMap");Ice.ContextHelper.write(this._os,n)
}else{var u=s.getInstance().getImplicitContext(),l=s.getContext();null===u?Ice.ContextHelper.write(this._os,l):u.write(l,this._os)}},__sent:function(){this.__markSent(!this._proxy.ice_isTwoway())},__send:function(e,t,n){return e.sendAsyncRequest(this,t,n)},__abort:function(e){(this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram())&&null!==this._handler&&this._handler.abortBatchRequest(),a.prototype.__abort.call(this,e)},__invoke:function(){return(this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram())&&null!==this._handler?(this._sentSynchronously=!0,this._handler.finishBatchRequest(this._os),void this.__markFinished(!0)):void this.__invokeImpl(!0)},__completed:function(e){var t;try{switch(null===this._is&&(this._is=new n(this._instance,o.currentProtocolEncoding)),this._is.swap(e),t=this._is.readByte()){case o.replyOK:case o.replyUserException:break;case o.replyObjectNotExist:case o.replyFacetNotExist:case o.replyOperationNotExist:var i=new c;i.__read(this._is);var r,s=Ice.StringSeqHelper.read(this._is);if(s.length>0){if(s.length>1)throw new Ice.MarshalException;r=s[0]}else r="";var a=this._is.readString(),h=null;switch(t){case o.replyObjectNotExist:h=new Ice.ObjectNotExistException;break;case o.replyFacetNotExist:h=new Ice.FacetNotExistException;break;case o.replyOperationNotExist:h=new Ice.OperationNotExistException}throw h.id=i,h.facet=r,h.operation=a,h;case o.replyUnknownException:case o.replyUnknownLocalException:case o.replyUnknownUserException:var u=this._is.readString(),l=null;switch(t){case o.replyUnknownException:l=new Ice.UnknownException;break;case o.replyUnknownLocalException:l=new Ice.UnknownLocalException;break;case o.replyUnknownUserException:l=new Ice.UnknownUserException}throw l.unknown=u,l;default:throw new Ice.UnknownReplyStatusException}this.__markFinished(t==o.replyOK,this._completed)}catch(d){this.__completedEx(d)}},__startWriteParams:function(e){return this._os.startWriteEncaps(this._encoding,e),this._os},__endWriteParams:function(){this._os.endWriteEncaps()},__writeEmptyParams:function(){this._os.writeEmptyEncaps(this._encoding)},__writeParamEncaps:function(e){null===e||0===e.length?this._os.writeEmptyEncaps(this._encoding):this._os.writeEncaps(e)},__is:function(){return this._is},__startReadParams:function(){return this._is.startReadEncaps(),this._is},__endReadParams:function(){this._is.endReadEncaps()},__readEmptyParams:function(){this._is.skipEmptyEncaps(null)},__readParamEncaps:function(){return this._is.readEncaps(null)},__throwUserException:function(){if(0===(this._state&t.OK))try{this._is.startReadEncaps(),this._is.throwException()}catch(e){throw e instanceof Ice.UserException&&this._is.endReadEncaps(),e}}});h._emptyContext=new i;var u=Ice.Class(a,{__init__:function(e,t){a.call(this,e,t)},__send:function(e,t,n){return e.flushAsyncBatchRequests(this)},__invoke:function(){o.checkSupportedProtocol(o.getCompatibleProtocol(this._proxy.__reference().getProtocol())),this.__invokeImpl(!0)},__handleRetryException:function(e){throw this._proxy.__setRequestHandler(this._handler,null),e},__handleException:function(e){throw this._proxy.__setRequestHandler(this._handler,null),e}}),l=Ice.Class(a,{__init__:function(e,t){a.call(this,e,t)},__send:function(t,n,i){return this.__markFinished(!0,function(e){e.succeed(t)}),e.Sent},__invoke:function(){this.__invokeImpl(!0)}}),d=Ice.Class(s,{__init__:function(e,t,n){s.call(this,t,n,e,null,null)},__invoke:function(){try{var t=this._connection.flushAsyncBatchRequests(this);(t&e.Sent)>0&&(this._sentSynchronously=!0)}catch(n){this.__completedEx(n)}}});Ice.OutgoingAsync=h,Ice.ProxyFlushBatch=u,Ice.ProxyGetConnection=l,Ice.ConnectionFlushBatch=d}(),function(){var e=Ice.ArrayUtil,t=Ice.AsyncResultBase,n=(Ice.AsyncResult,Ice.Debug,Ice.FormatType,Ice.HashMap),i=Ice.OutgoingAsync,r=Ice.ProxyFlushBatch,o=Ice.ProxyGetConnection,c=Ice.ReferenceMode,s=Ice.OperationMode,a=Ice.Class({__init__:function(){this._reference=null,this._requestHandler=null},hashCode:function(e){return this._reference.hashCode()},ice_getCommunicator:function(){return this._reference.getCommunicator()},toString:function(){return this._reference.toString()},ice_getIdentity:function(){return this._reference.getIdentity().clone()},ice_identity:function(e){if(void 0===e||null===e||0===e.name.length)throw new Ice.IllegalIdentityException;if(e.equals(this._reference.getIdentity()))return this;var t=new a;return t.__setup(this._reference.changeIdentity(e)),t},ice_getContext:function(){return new n(this._reference.getContext())},ice_context:function(e){return this.__newInstance(this._reference.changeContext(e))},ice_getFacet:function(){return this._reference.getFacet()},ice_facet:function(e){if((void 0===e||null===e)&&(e=""),e===this._reference.getFacet())return this;var t=new a;return t.__setup(this._reference.changeFacet(e)),t},ice_getAdapterId:function(){return this._reference.getAdapterId()},ice_adapterId:function(e){return(void 0===e||null===e)&&(e=""),e===this._reference.getAdapterId()?this:this.__newInstance(this._reference.changeAdapterId(e))},ice_getEndpoints:function(){return e.clone(this._reference.getEndpoints())},ice_endpoints:function(t){return(void 0===t||null===t)&&(t=[]),e.equals(t,this._reference.getEndpoints())?this:this.__newInstance(this._reference.changeEndpoints(t))},ice_getLocatorCacheTimeout:function(){return this._reference.getLocatorCacheTimeout()},ice_locatorCacheTimeout:function(e){if(-1>e)throw new Error("invalid value passed to ice_locatorCacheTimeout: "+e);return e===this._reference.getLocatorCacheTimeout()?this:this.__newInstance(this._reference.changeLocatorCacheTimeout(e))},ice_getInvocationTimeout:function(){return this._reference.getInvocationTimeout()},ice_invocationTimeout:function(e){if(1>e&&-1!==e)throw new Error("invalid value passed to ice_invocationTimeout: "+e);return e===this._reference.getInvocationTimeout()?this:this.__newInstance(this._reference.changeInvocationTimeout(e))},ice_isConnectionCached:function(){return this._reference.getCacheConnection()},ice_connectionCached:function(e){return e===this._reference.getCacheConnection()?this:this.__newInstance(this._reference.changeCacheConnection(e))},ice_getEndpointSelection:function(){return this._reference.getEndpointSelection()},ice_endpointSelection:function(e){return e===this._reference.getEndpointSelection()?this:this.__newInstance(this._reference.changeEndpointSelection(e))},ice_isSecure:function(){return this._reference.getSecure()},ice_secure:function(e){return e===this._reference.getSecure()?this:this.__newInstance(this._reference.changeSecure(e))},ice_getEncodingVersion:function(){return this._reference.getEncoding().clone()},ice_encodingVersion:function(e){return e.equals(this._reference.getEncoding())?this:this.__newInstance(this._reference.changeEncoding(e))},ice_isPreferSecure:function(){return this._reference.getPreferSecure()},ice_preferSecure:function(e){return e===this._reference.getPreferSecure()?this:this.__newInstance(this._reference.changePreferSecure(e))},ice_getRouter:function(){var e=this._reference.getRouterInfo();return null!==e?e.getRouter():null},ice_router:function(e){var t=this._reference.changeRouter(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_getLocator:function(){var e=this._reference.getLocatorInfo();return null!==e?e.getLocator():null},ice_locator:function(e){var t=this._reference.changeLocator(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_isTwoway:function(){return this._reference.getMode()===c.ModeTwoway},ice_twoway:function(){return this._reference.getMode()===c.ModeTwoway?this:this.__newInstance(this._reference.changeMode(c.ModeTwoway))},ice_isOneway:function(){return this._reference.getMode()===c.ModeOneway},ice_oneway:function(){return this._reference.getMode()===c.ModeOneway?this:this.__newInstance(this._reference.changeMode(c.ModeOneway))},ice_isBatchOneway:function(){return this._reference.getMode()===c.ModeBatchOneway},ice_batchOneway:function(){return this._reference.getMode()===c.ModeBatchOneway?this:this.__newInstance(this._reference.changeMode(c.ModeBatchOneway))},ice_isDatagram:function(){return this._reference.getMode()===c.ModeDatagram},ice_datagram:function(){return this._reference.getMode()===c.ModeDatagram?this:this.__newInstance(this._reference.changeMode(c.ModeDatagram))},ice_isBatchDatagram:function(){return this._reference.getMode()===c.ModeBatchDatagram},ice_batchDatagram:function(){return this._reference.getMode()===c.ModeBatchDatagram?this:this.__newInstance(this._reference.changeMode(c.ModeBatchDatagram))},ice_compress:function(e){var t=this._reference.changeCompress(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_timeout:function(e){if(1>e&&-1!==e)throw new Error("invalid value passed to ice_timeout: "+e);var t=this._reference.changeTimeout(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_getConnectionId:function(){return this._reference.getConnectionId()},ice_connectionId:function(e){var t=this._reference.changeConnectionId(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_getConnection:function(){var e=new o(this,"ice_getConnection");try{e.__invoke()}catch(t){e.__abort(t)}return e},ice_getCachedConnection:function(){return this._requestHandler?this._requestHandler.getConnection():null},ice_flushBatchRequests:function(){var e=new r(this,"ice_flushBatchRequests");try{e.__invoke()}catch(t){e.__abort(t)}return e},equals:function(e){return this===e?!0:e instanceof a?this._reference.equals(e._reference):!1},__reference:function(){return this._reference},__copyFrom:function(e){this._reference=e._reference,this._requestHandler=e._requestHandler},__handleException:function(e,t,n,i,r,o){if(this.__setRequestHandler(t,null),!(e instanceof Ice.LocalException&&(!i||n==s.Nonmutating||n==s.Idempotent||e instanceof Ice.CloseConnectionException||e instanceof Ice.ObjectNotExistException)))throw e;try{return this._reference.getInstance().proxyFactory().checkRetryAfterException(e,this._reference,r,o)}catch(c){throw c instanceof Ice.CommunicatorDestroyedException?e:c}},__checkAsyncTwowayOnly:function(e){if(!this.ice_isTwoway())throw new Error("`"+e+"' can only be called with a twoway proxy")},__getRequestHandler:function(){var e;if(this._reference.getCacheConnection()){if(null!==this._requestHandler)return this._requestHandler;e=this._reference.getInstance().requestHandlerFactory().getRequestHandler(this._reference,this),this._requestHandler=e}else e=this._reference.getInstance().requestHandlerFactory().getRequestHandler(this._reference,this);return e.connect(this)},__setRequestHandler:function(e,t){this._reference.getCacheConnection()&&null!==e&&this._requestHandler&&this._requestHandler!==t&&(this._requestHandler=this._requestHandler.update(e,t))},__setup:function(e){this._reference=e},__newInstance:function(e){var t=new this.constructor;return t.__setup(e),t},ice_instanceof:function(e){return e?this instanceof e?!0:this.constructor.__instanceof(e):!1}});a.__invoke=function(e,t,n,r,o,c,s,h,u){(null!==s||h.length>0)&&e.__checkAsyncTwowayOnly(t);var l=new i(e,t,function(e){a.__completed(e,s,h)});try{if(l.__prepare(t,n,o),null===c)l.__writeEmptyParams();else{var d=l.__startWriteParams(r);c.call(null,d,u),l.__endWriteParams()}l.__invoke()}catch(p){l.__abort(p)}return l},a.__completed=function(e,t,n){if(a.__check(e,n))try{if(null===t)e.__readEmptyParams(),e.succeed(e);else{var i=t(e);e.succeed.apply(e,i)}}catch(r){return void a.__dispatchLocalException(e,r)}},a.__returns_bool=function(e,t){t.push(e.readBool())},a.__returns_byte=function(e,t){t.push(e.readByte())},a.__returns_short=function(e,t){t.push(e.readShort())},a.__returns_int=function(e,t){t.push(e.readInt())},a.__returns_long=function(e,t){t.push(e.readLong())},a.__returns_float=function(e,t){t.push(e.readFloat())},a.__returns_double=function(e,t){t.push(e.readDouble())},a.__returns_string=function(e,t){t.push(e.readString())},a.__returns_ObjectPrx=function(e,t){t.push(e.readProxy())},a.__returns_Object=function(e,t){e.readObject(function(e){t.push(e)},Ice.Object),e.readPendingObjects()},a.__check=function(e,t){try{e.__throwUserException()}catch(n){if(n instanceof Ice.UserException){if(null!==t)for(var i=0;i<t.length;++i)if(n instanceof t[i])return e.fail(n,e),!1;return e.fail(new Ice.UnknownUserException(n.ice_name()),e),!1}return e.fail(n,e),!1}return!0},a.__dispatchLocalException=function(e,t){e.fail(t,e)},a.ice_staticId=Ice.Object.ice_staticId,a.checkedCast=function(e,n,i){var r=null;if(void 0===e||null===e)r=new t(null,"checkedCast",null,null,null),r.succeed(null,r);else{void 0!==n&&(e=e.ice_facet(n));var o=this;r=new t(e.ice_getCommunicator(),"checkedCast",null,e,null),e.ice_isA(this.ice_staticId(),i).then(function(t,n){if(n){var i=new o;i.__copyFrom(e),r.succeed(i,r)}else r.succeed(null,r)}).exception(function(e){e instanceof Ice.FacetNotExistException?r.succeed(null,r):r.fail(e,r)})}return r},a.uncheckedCast=function(e,t){var n=null;return void 0!==e&&null!==e&&(n=new this,void 0!==t&&(e=e.ice_facet(t)),n.__copyFrom(e)),n},Object.defineProperty(a,"minWireSize",{get:function(){return 2}}),a.write=function(e,t){e.writeProxy(t)},a.read=function(e){return e.readProxy(this)},a.writeOpt=function(e,t,n){e.writeOptProxy(t,n)},a.readOpt=function(e,t){return e.readOptProxy(t,this)},a.__instanceof=function(e){if(e===this)return!0;for(var t in this.__implements)if(this.__implements[t].__instanceof(e))return!0;return this.__parent?this.__parent.__instanceof(e):!1};var h=Ice.Slice;h.defineProxy=function(e,t,n){var i=function(){e.call(this)};return i.__parent=e,i.__implements=n,i.prototype=new e,i.prototype.constructor=i,i.ice_staticId=t,i.checkedCast=a.checkedCast,i.uncheckedCast=a.uncheckedCast,i.write=a.write,i.writeOpt=a.writeOpt,i.read=a.read,i.readOpt=a.readOpt,i.__instanceof=a.__instanceof,Object.defineProperty(i,"minWireSize",{get:function(){return 2}}),i},Ice.ObjectPrx=a}(),function(){function parseParam(p){var type=p[0],t=typeof type;return"number"===t?type=builtinHelpers[p[0]]:"string"===t&&(type=eval(type)),{type:type,isObject:p[1]===!0,tag:p[2]}}function parseOperation(e,t){var n,i,r={};r.name=e,r.mode=t[1]?Ice.OperationMode.valueOf(t[1]):Ice.OperationMode.Normal,r.sendMode=t[2]?Ice.OperationMode.valueOf(t[2]):Ice.OperationMode.Normal,r.amd=t[3]?!0:!1,r.format=t[4]?Ice.FormatType.valueOf(t[4]):Ice.FormatType.DefaultFormat,r.amd?r.servantMethod=e+"_async":r.servantMethod=t[0]?t[0]:e;var o;t[5]&&(o=parseParam(t[5]),o.pos=0),r.returns=o;var c=[],s=[];if(t[6])for(n=0;n<t[6].length;++n)i=parseParam(t[6][n]),i.pos=n,c.push(i),i.tag&&s.push(i);s.sort(function(e,t){return e.tag-t.tag}),r.inParams=c,r.inParamsOpt=s;var a=[],h=[];if(t[7]){var u=o?1:0;for(n=0;n<t[7].length;++n)i=parseParam(t[7][n]),i.pos=n+u,a.push(i),i.tag&&h.push(i)}o&&o.tag&&h.push(o),h.sort(function(e,t){return e.tag-t.tag}),r.outParams=a,r.outParamsOpt=h;var l=[];if(t[8])for(n=0;n<t[8].length;++n)l.push(t[8][n]);return r.exceptions=l,r.sendsClasses=t[9]===!0,r.returnsClasses=t[10]===!0,r}function unmarshalParams(e,t,n,i,r,o,c){var s,a,h;for(s=0;s<n.length;++s)a=n[s],a.tag||(h=a.type.read(e),o[a.pos+c]=h);for(t&&(h=t.type.read(e),o[t.pos+c]=h),s=0;s<i.length;++s)a=i[s],h=a.type.readOpt(e,a.tag),o[a.pos+c]=h;r&&e.readPendingObjects()}function marshalParams(e,t,n,i,r,o){var c,s;for(c=0;c<i.length;++c)s=i[c],s.tag||s.type.write(e,t[s.pos]);for(n&&n.type.write(e,t[n.pos]),c=0;c<r.length;++c)s=r[c],s.type.writeOpt(e,s.tag,t[s.pos]);o&&e.writePendingObjects()}function getServantMethodFromInterfaces(e,t,n){for(var i,r=0;void 0===i&&r<e.length;++r){var o=e[r];i=o[t],void 0===i&&(-1===n.indexOf(o)&&n.push(o),o.__implements&&(i=getServantMethodFromInterfaces(o.__implements,t,n)))}return i}function getServantMethod(e,t){var n,i=dispatchPrefix+t,r=e[i];if(void 0===r){n=[];for(var o=e;o&&void 0===r;)o.__implements&&(r=getServantMethodFromInterfaces(o.__implements,i,n)),o=o.__parent;void 0!==r&&(e[i]=r)}if(void 0===r){var c;e.__ops&&(c=e.__ops.find(t));var s;if(void 0===c){for(var a=e.__parent;void 0===c&&a;)a.__ops&&void 0!==(c=a.__ops.find(t))&&(s=a),a=a.__parent;for(var h=0;void 0===c&&h<n.length;++h){var u=n[h];u.__ops&&void 0!==(c=u.__ops.find(t))&&(s=u)}}void 0!==c&&(r=function(e,t,n){return __dispatchImpl(e,c,t,n)},e[i]=r,s&&(s[i]=r))}return r}function addProxyOperation(e,t,n){var i=n[0]?n[0]:t,r=null;e.prototype[i]=function(){var e=arguments;null===r&&(r=parseOperation(t,n));var i=e[r.inParams.length],o=null;r.inParams.length>0&&(o=function(e,t){marshalParams(e,t,void 0,r.inParams,r.inParamsOpt,r.sendsClasses)});var c=null;return(r.returns||r.outParams.length>0)&&(c=function(e){var t,n=[],i=e.__startReadParams();if(r.returns&&!r.returns.tag&&(t=r.returns),unmarshalParams(i,t,r.outParams,r.outParamsOpt,r.returnsClasses,n,0),e.__endReadParams(),r.returnsClasses||r.outParamsOpt.length>0){var o=0;r.returns&&r.returns.isObject&&void 0!==n[r.returns.pos+o]&&(n[r.returns.pos+o]=n[r.returns.pos+o].value);for(var c=0;c<r.outParams.length;++c){var s=r.outParams[c];s.isObject&&void 0!==n[s.pos+o]&&(n[s.pos+o]=n[s.pos+o].value)}}return n.push(e),n}),Ice.ObjectPrx.__invoke(this,r.name,r.sendMode,r.format,i,o,c,r.exceptions,Array.prototype.slice.call(e))}}var __M=Ice.__M,Class=Ice.Class,builtinHelpers=[Ice.ByteHelper,Ice.BoolHelper,Ice.ShortHelper,Ice.IntHelper,Ice.LongHelper,Ice.FloatHelper,Ice.DoubleHelper,Ice.StringHelper,Ice.Object,Ice.ObjectPrx],OpTable=Class({__init__:function(e){this.raw=e,this.parsed={}},find:function(e){var t=this.parsed[e];return void 0===t&&void 0!==this.raw[e]&&(t=parseOperation(e,this.raw[e]),this.parsed[e]=t),t}}),Upcall=Class({__init__:function(e,t){this.incomingAsync=e,this.op=t},ice_response:function(){var e=arguments;if(this.incomingAsync.__validateResponse(!0))try{this.__sendResponse(e),this.incomingAsync.__response()}catch(t){this.incomingAsync.__exception(t)}},ice_exception:function(e){this.__checkException(e)?this.incomingAsync.__validateResponse(!1)&&(this.__sendException(e),this.incomingAsync.__response()):this.incomingAsync.ice_exception(e)},__sendResponse:function(e){if(void 0===this.op.returns&&0===this.op.outParams.length){if(e&&e.length>0)throw new Error("ice_response called with invalid arguments");this.incomingAsync.__writeEmptyParams()}else{var t,n=this.incomingAsync.__startWriteParams(this.op.format);this.op.returns&&!this.op.returns.tag&&(t=this.op.returns),marshalParams(n,e,t,this.op.outParams,this.op.outParamsOpt,this.op.returnsClasses),this.incomingAsync.__endWriteParams(!0)}},__checkException:function(e){for(var t=0;t<this.op.exceptions.length;++t)if(e instanceof this.op.exceptions[t])return!0;return!1},__sendException:function(e){this.incomingAsync.__writeUserException(e,this.op.format)}}),__dispatchImpl=function(e,t,n,i){var r=e[t.servantMethod];if(void 0===r||"function"!=typeof r){var o=i.adapter.getCommunicator(),c="servant for identity "+o.identityToString(i.id)+" does not define operation `"+t.servantMethod+"'";throw new Ice.UnknownException(c)}var s=new Upcall(n,t);try{var a=t.amd?[null]:[];if(0===t.inParams.length)n.readEmptyParams();else{var h=n.startReadParams(),u=t.amd?1:0;if(unmarshalParams(h,void 0,t.inParams,t.inParamsOpt,t.sendsClasses,a,u),n.endReadParams(),t.inParams.length>0&&(t.sendsClasses||t.inParamsOpt.length>0))for(var l=0;l<t.inParams.length;++l){var d=t.inParams[l];d.isObject&&void 0!==a[d.pos+u]&&(a[d.pos+u]=a[d.pos+u].value)}}if(a.push(i),t.amd){a[0]=s;try{r.apply(e,a)}catch(p){s.ice_exception(p)}return Ice.DispatchStatus.DispatchAsync}var _=t.outParams.length;t.returns&&++_;var f=r.apply(e,a);if(_>1&&!(f instanceof Array))throw new Ice.MarshalException("operation `"+t.servantMethod+"' should return an array of length "+_);return 1===_&&(f=[f]),s.__sendResponse(f),Ice.DispatchStatus.DispatchOK}catch(p){if(s.__checkException(p))return s.__sendException(p),Ice.DispatchStatus.DispatchUserException;throw p}},dispatchPrefix="__op_",Slice=Ice.Slice;Slice.defineOperations=function(e,t,n){if(n&&(e.__ops=new OpTable(n)),e.prototype.__dispatch=function(t,n){var i=getServantMethod(e,n.operation);if(void 0===i||"function"!=typeof i)throw new Ice.OperationNotExistException(n.id,n.facet,n.operation);return i.call(i,this,t,n)},n)for(var i in n)addProxyOperation(t,i,n[i]);if(t.__implements)for(var r in t.__implements){var o=t.__implements[r].prototype;for(var c in o)"function"==typeof o[c]&&void 0===t.prototype[c]&&(t.prototype[c]=o[c])}},Slice.defineOperations(Ice.Object,Ice.ObjectPrx,{ice_ping:[,1,1,,,,,,],ice_isA:[,1,1,,,[1],[[7]],,],ice_id:[,1,1,,,[7],,,],ice_ids:[,1,1,,,["Ice.StringSeqHelper"],,,]})}(),function(){Ice.Router=Slice.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::Router"],-1,void 0,void 0,!1),Ice.RouterPrx=Slice.defineProxy(Ice.ObjectPrx,Ice.Router.ice_staticId,void 0),Slice.defineOperations(Ice.Router,Ice.RouterPrx,{getClientProxy:[,2,1,,,[9],,,,,],getServerProxy:[,2,1,,,[9],,,,,],addProxies:[,2,2,,,["Ice.ObjectProxySeqHelper"],[["Ice.ObjectProxySeqHelper"]],,,,]}),Ice.RouterFinder=Slice.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::RouterFinder"],-1,void 0,void 0,!1),Ice.RouterFinderPrx=Slice.defineProxy(Ice.ObjectPrx,Ice.RouterFinder.ice_staticId,void 0),Slice.defineOperations(Ice.RouterFinder,Ice.RouterFinderPrx,{getRouter:[,,,,,["Ice.RouterPrx"],,,,,]})}(),function(){var e=Ice.StringUtil,t=Ice.Identity,n=Ice.IdentityParseException;Ice.stringToIdentity=function(i){for(var r=new t,o=-1,c=0;-1!==(c=i.indexOf("/",c));){for(var s=0;c-s>0&&"\\"==i.charAt(c-s-1);)s++;if(s%2===0){if(-1!=o){var a=new n;throw a.str="unescaped backslash in identity `"+i+"'",a}o=c}c++}if(-1==o){r.category="";try{r.name=e.unescapeString(i)}catch(h){var a=new n;throw a.str="invalid identity name `"+i+"': "+a.toString(),a}}else{try{r.category=e.unescapeString(i,0,o)}catch(h){var a=new n;throw a.str="invalid category in identity `"+i+"': "+a.toString(),a}if(o+1<i.length)try{r.name=e.unescapeString(i,o+1,i.length)}catch(h){var a=new n;throw a.str="invalid name in identity `"+i+"': "+a.toString(),a}else r.name=""}return r},Ice.identityToString=function(t){return null===t.category||0===t.category.length?e.escapeString(t.name,"/"):e.escapeString(t.category,"/")+"/"+e.escapeString(t.name,"/")},Ice.proxyIdentityCompare=function(e,t){if(e===t)return 0;if(null===e&&null!==t)return-1;if(null!==e&&null===t)return 1;var n,i=e.ice_getIdentity(),r=t.ice_getIdentity();return 0!==(n=i.name.localeCompare(r.name))?n:i.category.localeCompare(r.category)},Ice.proxyIdentityAndFacetCompare=function(e,t){if(e===t)return 0;if(null===e&&null!==t)return-1;if(null!==e&&null===t)return 1;var n,i=e.ice_getIdentity(),r=t.ice_getIdentity();if(0!==(n=i.name.localeCompare(r.name)))return n;if(0!==(n=i.category.localeCompare(r.category)))return n;var o=e.ice_getFacet(),c=t.ice_getFacet();return null===o&&null===c?0:null===o?-1:null===c?1:o.localeCompare(c)}}(),function(){var e=Ice.Context,t=Ice.InitializationException,n=Ice.Class({__init__:function(){this._context=new e},getContext:function(){return new e(this._context)},setContext:function(t){null!==t&&t.size>0?this._context=new e(t):this._context.clear()},containsKey:function(e){return null===e&&(e=""),this._context.has(e)},get:function(e){null===e&&(e="");var t=this._context.get(e);return null===t&&(t=""),t},put:function(e,t){null===e&&(e=""),null===t&&(t="");var n=this._context.get(e);return null===n&&(n=""),this._context.set(e,t),n},remove:function(e){null===e&&(e="");var t=this._context.get(e);return this._context["delete"](e),null===t&&(t=""),t},write:function(t,n){if(0===t.size)Ice.ContextHelper.write(n,this._context);else{var i=null;0===this._context.size?i=t:(i=new e(this._context),i.merge(t)),Ice.ContextHelper.write(n,i)}}});n.create=function(e){if(0===e.length||"None"===e)return null;if("Shared"===e)return new n;throw new t("'"+e+"' is not a valid value for Ice.ImplicitContext")},Ice.ImplicitContextI=n}(),function(){Object.defineProperty(Ice,"TCPEndpointType",{value:1}),Object.defineProperty(Ice,"UDPEndpointType",{value:3}),Object.defineProperty(Ice,"WSEndpointType",{value:4}),Object.defineProperty(Ice,"WSSEndpointType",{value:5}),Ice.EndpointInfo=Slice.defineLocalObject(function(e,t){this.timeout=void 0!==e?e:0,this.compress=void 0!==t?t:!1}),Ice.Endpoint=Slice.defineLocalObject(),Ice.IPEndpointInfo=Slice.defineLocalObject(function(e,t,n,i,r){Ice.EndpointInfo.call(this,e,t),this.host=void 0!==n?n:null,this.port=void 0!==i?i:0,this.sourceAddress=void 0!==r?r:null},Ice.EndpointInfo),Ice.TCPEndpointInfo=Slice.defineLocalObject(function(e,t,n,i,r){Ice.IPEndpointInfo.call(this,e,t,n,i,r)},Ice.IPEndpointInfo),Ice.UDPEndpointInfo=Slice.defineLocalObject(function(e,t,n,i,r,o,c){Ice.IPEndpointInfo.call(this,e,t,n,i,r),this.mcastInterface=void 0!==o?o:null,this.mcastTtl=void 0!==c?c:0},Ice.IPEndpointInfo),Ice.WSEndpointInfo=Slice.defineLocalObject(function(e,t,n,i,r,o){Ice.IPEndpointInfo.call(this,e,t,n,i,r),this.resource=void 0!==o?o:null},Ice.IPEndpointInfo),Ice.OpaqueEndpointInfo=Slice.defineLocalObject(function(e,t,n,i){Ice.EndpointInfo.call(this,e,t),this.rawEncoding=void 0!==n?n:null,this.rawBytes=void 0!==i?i:null},Ice.EndpointInfo)}(),function(){var e=Ice.Class,t=e(Ice.Endpoint,{toString:function(){return this.protocol()+this.options()},initWithOptions:function(e){var t,n=[],i="`"+this.protocol();for(t=0;t<e.length;++t)i+=-1!==e[t].search(/[ \t\n\r]+/)?' "'+e[t]+'"':" "+e[t];for(i+="'",t=0;t<e.length;){var r=e[t++];if(r.length<2||"-"!=r.charAt(0))n.push(r);else{var o=null;t<e.length&&"-"!=e[t].charAt(0)&&(o=e[t++]),this.checkOption(r,o,i)||(n.push(r),null!==o&&n.push(o))}}for(e.length=0,t=0;t<n.length;t++)e.push(n[t])},equals:function(e){return e instanceof t?0===this.compareTo(e):!1},checkOption:function(){return!1}});Ice.EndpointI=t}(),function(){var e=Ice.HashMap,t=(Ice.Debug,Ice.Class({__init__:function(){this._adapterEndpointsTable=new e,this._objectTable=new e(e.compareEquals)},clear:function(){this._adapterEndpointsTable.clear(),this._objectTable.clear()},getAdapterEndpoints:function(e,t,n){if(0===t)return n.value=!1,null;var i=this._adapterEndpointsTable.get(e);return void 0!==i?(n.value=this.checkTTL(i.time,t),i.endpoints):(n.value=!1,null)},addAdapterEndpoints:function(e,t){this._adapterEndpointsTable.set(e,new n(Date.now(),t))},removeAdapterEndpoints:function(e){var t=this._adapterEndpointsTable.get(e);return this._adapterEndpointsTable["delete"](e),void 0!==t?t.endpoints:null},getObjectReference:function(e,t,n){if(0===t)return n.value=!1,null;var i=this._objectTable.get(e);return void 0!==i?(n.value=this.checkTTL(i.time,t),i.reference):(n.value=!1,null)},addObjectReference:function(e,t){this._objectTable.set(e,new i(Date.now(),t))},removeObjectReference:function(e){var t=this._objectTable.get(e);return this._objectTable["delete"](e),void 0!==t?t.reference:null},checkTTL:function(e,t){return 0>t?!0:Date.now()-e<=1e3*t}}));Ice.LocatorTable=t;var n=function(e,t){this.time=e,this.endpoints=t},i=function(e,t){this.time=e,this.reference=t}}(),function(){Ice.AdapterNotFoundException=Slice.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"Ice::AdapterNotFoundException",void 0,void 0,!1,!1),Ice.InvalidReplicaGroupIdException=Slice.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"Ice::InvalidReplicaGroupIdException",void 0,void 0,!1,!1),Ice.AdapterAlreadyActiveException=Slice.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"Ice::AdapterAlreadyActiveException",void 0,void 0,!1,!1),Ice.ObjectNotFoundException=Slice.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"Ice::ObjectNotFoundException",void 0,void 0,!1,!1),Ice.ServerNotFoundException=Slice.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"Ice::ServerNotFoundException",void 0,void 0,!1,!1),Ice.Locator=Slice.defineObject(void 0,Ice.Object,void 0,0,["::Ice::Locator","::Ice::Object"],-1,void 0,void 0,!1),Ice.LocatorPrx=Slice.defineProxy(Ice.ObjectPrx,Ice.Locator.ice_staticId,void 0),Slice.defineOperations(Ice.Locator,Ice.LocatorPrx,{findObjectById:[,2,1,1,,[9],[[Ice.Identity]],,[Ice.ObjectNotFoundException],,],findAdapterById:[,2,1,1,,[9],[[7]],,[Ice.AdapterNotFoundException],,],getRegistry:[,2,1,,,["Ice.LocatorRegistryPrx"],,,,,]}),Ice.LocatorRegistry=Slice.defineObject(void 0,Ice.Object,void 0,0,["::Ice::LocatorRegistry","::Ice::Object"],-1,void 0,void 0,!1),Ice.LocatorRegistryPrx=Slice.defineProxy(Ice.ObjectPrx,Ice.LocatorRegistry.ice_staticId,void 0),Slice.defineOperations(Ice.LocatorRegistry,Ice.LocatorRegistryPrx,{setAdapterDirectProxy:[,2,2,1,,,[[7],[9]],,[Ice.AdapterAlreadyActiveException,Ice.AdapterNotFoundException],,],setReplicatedAdapterDirectProxy:[,2,2,1,,,[[7],[7],[9]],,[Ice.AdapterAlreadyActiveException,Ice.AdapterNotFoundException,Ice.InvalidReplicaGroupIdException],,],setServerProcessProxy:[,2,2,1,,,[[7],["Ice.ProcessPrx"]],,[Ice.ServerNotFoundException],,]}),Ice.LocatorFinder=Slice.defineObject(void 0,Ice.Object,void 0,0,["::Ice::LocatorFinder","::Ice::Object"],-1,void 0,void 0,!1),Ice.LocatorFinderPrx=Slice.defineProxy(Ice.ObjectPrx,Ice.LocatorFinder.ice_staticId,void 0),Slice.defineOperations(Ice.LocatorFinder,Ice.LocatorFinderPrx,{getLocator:[,,,,,["Ice.LocatorPrx"],,,,,]})}(),function(){var e=Ice.Class({__init__:function(e){void 0!==e&&e.length>0?this._prefix=e+": ":this._prefix=""},print:function(e){this.write(e,!1)},trace:function(e,t){var n=[];new Date;n.push("-- "),n.push(this.timestamp()),n.push(" "),n.push(this._prefix),n.push(e),n.push(": "),n.push(t),this.write(n.join(""),!0)},warning:function(e){var t=[];new Date;t.push("-! "),t.push(this.timestamp()),t.push(" "),t.push(this._prefix),t.push("warning: "),t.push(e),this.write(t.join(""),!0)},error:function(e){var t=[];new Date;t.push("!! "),t.push(this.timestamp()),t.push(" "),t.push(this._prefix),t.push("error: "),t.push(e),this.write(t.join(""),!0)},cloneWithPrefix:function(t){return new e(t)},write:function(e,t){t&&(e=e.replace(/\n/g,"\n   ")),console.log(e)},timestamp:function(){var e=new Date,t=e.getMonth()+1;t=10>t?"0"+t:t;var n=e.getDate();return n=10>n?"0"+n:n,t+"-"+n+"-"+e.getFullYear()+" "+e.toLocaleTimeString()+"."+e.getMilliseconds()}});Ice.Logger=e}(),function(){Ice.ConnectionInfo=Slice.defineLocalObject(function(e,t,n){this.incoming=void 0!==e?e:!1,this.adapterName=void 0!==t?t:null,this.connectionId=void 0!==n?n:null}),Ice.ConnectionCallback=Slice.defineLocalObject(),Ice.ACMClose=Slice.defineEnum({CloseOff:0,CloseOnIdle:1,CloseOnInvocation:2,CloseOnInvocationAndIdle:3,CloseOnIdleForceful:4}),Ice.ACMHeartbeat=Slice.defineEnum({HeartbeatOff:0,HeartbeatOnInvocation:1,HeartbeatOnIdle:2,HeartbeatAlways:3}),Ice.ACM=Slice.defineStruct(function(e,t,n){this.timeout=void 0!==e?e:0,this.close=void 0!==t?t:Ice.CloseOff,this.heartbeat=void 0!==n?n:Ice.HeartbeatOff},!0),Ice.Connection=Slice.defineLocalObject(),Ice.IPConnectionInfo=Slice.defineLocalObject(function(e,t,n,i,r,o,c){Ice.ConnectionInfo.call(this,e,t,n),this.localAddress=void 0!==i?i:"",this.localPort=void 0!==r?r:-1,this.remoteAddress=void 0!==o?o:"",this.remotePort=void 0!==c?c:-1},Ice.ConnectionInfo),Ice.TCPConnectionInfo=Slice.defineLocalObject(function(e,t,n,i,r,o,c){Ice.IPConnectionInfo.call(this,e,t,n,i,r,o,c)},Ice.IPConnectionInfo),Ice.UDPConnectionInfo=Slice.defineLocalObject(function(e,t,n,i,r,o,c,s,a){Ice.IPConnectionInfo.call(this,e,t,n,i,r,o,c),this.mcastAddress=void 0!==s?s:null,this.mcastPort=void 0!==a?a:-1},Ice.IPConnectionInfo),Ice.WSConnectionInfo=Slice.defineLocalObject(function(e,t,n,i,r,o,c){Ice.IPConnectionInfo.call(this,e,t,n,i,r,o,c)},Ice.IPConnectionInfo)}(),function(){var e=function(e,t,n){this._pattern=e,this._deprecated=t,this._deprecatedBy=n};Object.defineProperty(e.prototype,"pattern",{get:function(){return this._pattern}}),Object.defineProperty(e.prototype,"deprecated",{get:function(){return this._deprecated
}}),Object.defineProperty(e.prototype,"deprecatedBy",{get:function(){return this._deprecatedBy}}),Ice.Property=e}(),function(){var e={},t=Ice.Property;e.IceProps=[new t("/^Ice.ACM.Client/",!0,null),new t("/^Ice.ACM.Server/",!0,null),new t("/^Ice.ACM.Timeout/",!1,null),new t("/^Ice.ACM.Heartbeat/",!1,null),new t("/^Ice.ACM.Close/",!1,null),new t("/^Ice.ACM/",!1,null),new t("/^Ice.ACM.Client.Timeout/",!1,null),new t("/^Ice.ACM.Client.Heartbeat/",!1,null),new t("/^Ice.ACM.Client.Close/",!1,null),new t("/^Ice.ACM.Client/",!1,null),new t("/^Ice.ACM.Server.Timeout/",!1,null),new t("/^Ice.ACM.Server.Heartbeat/",!1,null),new t("/^Ice.ACM.Server.Close/",!1,null),new t("/^Ice.ACM.Server/",!1,null),new t("/^Ice.Admin.ACM.Timeout/",!1,null),new t("/^Ice.Admin.ACM.Heartbeat/",!1,null),new t("/^Ice.Admin.ACM.Close/",!1,null),new t("/^Ice.Admin.ACM/",!1,null),new t("/^Ice.Admin.AdapterId/",!1,null),new t("/^Ice.Admin.Endpoints/",!1,null),new t("/^Ice.Admin.Locator.EndpointSelection/",!1,null),new t("/^Ice.Admin.Locator.ConnectionCached/",!1,null),new t("/^Ice.Admin.Locator.PreferSecure/",!1,null),new t("/^Ice.Admin.Locator.LocatorCacheTimeout/",!1,null),new t("/^Ice.Admin.Locator.InvocationTimeout/",!1,null),new t("/^Ice.Admin.Locator.Locator/",!1,null),new t("/^Ice.Admin.Locator.Router/",!1,null),new t("/^Ice.Admin.Locator.CollocationOptimized/",!1,null),new t("/^Ice.Admin.Locator.Context../",!1,null),new t("/^Ice.Admin.Locator/",!1,null),new t("/^Ice.Admin.PublishedEndpoints/",!1,null),new t("/^Ice.Admin.ReplicaGroupId/",!1,null),new t("/^Ice.Admin.Router.EndpointSelection/",!1,null),new t("/^Ice.Admin.Router.ConnectionCached/",!1,null),new t("/^Ice.Admin.Router.PreferSecure/",!1,null),new t("/^Ice.Admin.Router.LocatorCacheTimeout/",!1,null),new t("/^Ice.Admin.Router.InvocationTimeout/",!1,null),new t("/^Ice.Admin.Router.Locator/",!1,null),new t("/^Ice.Admin.Router.Router/",!1,null),new t("/^Ice.Admin.Router.CollocationOptimized/",!1,null),new t("/^Ice.Admin.Router.Context../",!1,null),new t("/^Ice.Admin.Router/",!1,null),new t("/^Ice.Admin.ProxyOptions/",!1,null),new t("/^Ice.Admin.ThreadPool.Size/",!1,null),new t("/^Ice.Admin.ThreadPool.SizeMax/",!1,null),new t("/^Ice.Admin.ThreadPool.SizeWarn/",!1,null),new t("/^Ice.Admin.ThreadPool.StackSize/",!1,null),new t("/^Ice.Admin.ThreadPool.Serialize/",!1,null),new t("/^Ice.Admin.ThreadPool.ThreadIdleTime/",!1,null),new t("/^Ice.Admin.ThreadPool.ThreadPriority/",!1,null),new t("/^Ice.Admin.MessageSizeMax/",!1,null),new t("/^Ice.Admin.DelayCreation/",!1,null),new t("/^Ice.Admin.Enabled/",!1,null),new t("/^Ice.Admin.Facets/",!1,null),new t("/^Ice.Admin.InstanceName/",!1,null),new t("/^Ice.Admin.Logger.KeepLogs/",!1,null),new t("/^Ice.Admin.Logger.KeepTraces/",!1,null),new t("/^Ice.Admin.Logger.Properties/",!1,null),new t("/^Ice.Admin.ServerId/",!1,null),new t("/^Ice.BackgroundLocatorCacheUpdates/",!1,null),new t("/^Ice.BatchAutoFlush/",!0,null),new t("/^Ice.BatchAutoFlushSize/",!1,null),new t("/^Ice.ChangeUser/",!1,null),new t("/^Ice.ClientAccessPolicyProtocol/",!1,null),new t("/^Ice.Compression.Level/",!1,null),new t("/^Ice.CollectObjects/",!1,null),new t("/^Ice.Config/",!1,null),new t("/^Ice.ConsoleListener/",!1,null),new t("/^Ice.Default.CollocationOptimized/",!1,null),new t("/^Ice.Default.EncodingVersion/",!1,null),new t("/^Ice.Default.EndpointSelection/",!1,null),new t("/^Ice.Default.Host/",!1,null),new t("/^Ice.Default.Locator.EndpointSelection/",!1,null),new t("/^Ice.Default.Locator.ConnectionCached/",!1,null),new t("/^Ice.Default.Locator.PreferSecure/",!1,null),new t("/^Ice.Default.Locator.LocatorCacheTimeout/",!1,null),new t("/^Ice.Default.Locator.InvocationTimeout/",!1,null),new t("/^Ice.Default.Locator.Locator/",!1,null),new t("/^Ice.Default.Locator.Router/",!1,null),new t("/^Ice.Default.Locator.CollocationOptimized/",!1,null),new t("/^Ice.Default.Locator.Context../",!1,null),new t("/^Ice.Default.Locator/",!1,null),new t("/^Ice.Default.LocatorCacheTimeout/",!1,null),new t("/^Ice.Default.InvocationTimeout/",!1,null),new t("/^Ice.Default.Package/",!1,null),new t("/^Ice.Default.PreferSecure/",!1,null),new t("/^Ice.Default.Protocol/",!1,null),new t("/^Ice.Default.Router.EndpointSelection/",!1,null),new t("/^Ice.Default.Router.ConnectionCached/",!1,null),new t("/^Ice.Default.Router.PreferSecure/",!1,null),new t("/^Ice.Default.Router.LocatorCacheTimeout/",!1,null),new t("/^Ice.Default.Router.InvocationTimeout/",!1,null),new t("/^Ice.Default.Router.Locator/",!1,null),new t("/^Ice.Default.Router.Router/",!1,null),new t("/^Ice.Default.Router.CollocationOptimized/",!1,null),new t("/^Ice.Default.Router.Context../",!1,null),new t("/^Ice.Default.Router/",!1,null),new t("/^Ice.Default.SlicedFormat/",!1,null),new t("/^Ice.Default.SourceAddress/",!1,null),new t("/^Ice.Default.Timeout/",!1,null),new t("/^Ice.EventLog.Source/",!1,null),new t("/^Ice.FactoryAssemblies/",!1,null),new t("/^Ice.HTTPProxyHost/",!1,null),new t("/^Ice.HTTPProxyPort/",!1,null),new t("/^Ice.ImplicitContext/",!1,null),new t("/^Ice.InitPlugins/",!1,null),new t("/^Ice.IPv4/",!1,null),new t("/^Ice.IPv6/",!1,null),new t("/^Ice.LogFile/",!1,null),new t("/^Ice.LogStdErr.Convert/",!1,null),new t("/^Ice.MessageSizeMax/",!1,null),new t("/^Ice.Nohup/",!1,null),new t("/^Ice.NullHandleAbort/",!1,null),new t("/^Ice.Override.CloseTimeout/",!1,null),new t("/^Ice.Override.Compress/",!1,null),new t("/^Ice.Override.ConnectTimeout/",!1,null),new t("/^Ice.Override.Timeout/",!1,null),new t("/^Ice.Override.Secure/",!1,null),new t("/^Ice.Package../",!1,null),new t("/^Ice.Plugin../",!1,null),new t("/^Ice.PluginLoadOrder/",!1,null),new t("/^Ice.PreferIPv6Address/",!1,null),new t("/^Ice.PrintAdapterReady/",!1,null),new t("/^Ice.PrintProcessId/",!1,null),new t("/^Ice.PrintStackTraces/",!1,null),new t("/^Ice.ProgramName/",!1,null),new t("/^Ice.RetryIntervals/",!1,null),new t("/^Ice.ServerIdleTime/",!1,null),new t("/^Ice.SOCKSProxyHost/",!1,null),new t("/^Ice.SOCKSProxyPort/",!1,null),new t("/^Ice.StdErr/",!1,null),new t("/^Ice.StdOut/",!1,null),new t("/^Ice.SyslogFacility/",!1,null),new t("/^Ice.ThreadPool.Client.Size/",!1,null),new t("/^Ice.ThreadPool.Client.SizeMax/",!1,null),new t("/^Ice.ThreadPool.Client.SizeWarn/",!1,null),new t("/^Ice.ThreadPool.Client.StackSize/",!1,null),new t("/^Ice.ThreadPool.Client.Serialize/",!1,null),new t("/^Ice.ThreadPool.Client.ThreadIdleTime/",!1,null),new t("/^Ice.ThreadPool.Client.ThreadPriority/",!1,null),new t("/^Ice.ThreadPool.Server.Size/",!1,null),new t("/^Ice.ThreadPool.Server.SizeMax/",!1,null),new t("/^Ice.ThreadPool.Server.SizeWarn/",!1,null),new t("/^Ice.ThreadPool.Server.StackSize/",!1,null),new t("/^Ice.ThreadPool.Server.Serialize/",!1,null),new t("/^Ice.ThreadPool.Server.ThreadIdleTime/",!1,null),new t("/^Ice.ThreadPool.Server.ThreadPriority/",!1,null),new t("/^Ice.ThreadPriority/",!1,null),new t("/^Ice.Trace.Admin.Properties/",!1,null),new t("/^Ice.Trace.Admin.Logger/",!1,null),new t("/^Ice.Trace.Locator/",!1,null),new t("/^Ice.Trace.Network/",!1,null),new t("/^Ice.Trace.Protocol/",!1,null),new t("/^Ice.Trace.Retry/",!1,null),new t("/^Ice.Trace.Slicing/",!1,null),new t("/^Ice.Trace.ThreadPool/",!1,null),new t("/^Ice.UDP.RcvSize/",!1,null),new t("/^Ice.UDP.SndSize/",!1,null),new t("/^Ice.TCP.Backlog/",!1,null),new t("/^Ice.TCP.RcvSize/",!1,null),new t("/^Ice.TCP.SndSize/",!1,null),new t("/^Ice.UseApplicationClassLoader/",!1,null),new t("/^Ice.UseSyslog/",!1,null),new t("/^Ice.Warn.AMICallback/",!1,null),new t("/^Ice.Warn.Connections/",!1,null),new t("/^Ice.Warn.Datagrams/",!1,null),new t("/^Ice.Warn.Dispatch/",!1,null),new t("/^Ice.Warn.Endpoints/",!1,null),new t("/^Ice.Warn.UnknownProperties/",!1,null),new t("/^Ice.Warn.UnusedProperties/",!1,null),new t("/^Ice.CacheMessageBuffers/",!1,null),new t("/^Ice.ThreadInterruptSafe/",!1,null)],e.validProps=[e.IceProps],e.clPropNames=["Ice"],Ice.PropertyNames=e}(),function(){Ice.Process=Slice.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::Process"],-1,void 0,void 0,!1),Ice.ProcessPrx=Slice.defineProxy(Ice.ObjectPrx,Ice.Process.ice_staticId,void 0),Slice.defineOperations(Ice.Process,Ice.ProcessPrx,{shutdown:[,,,,,,,,,,],writeMessage:[,,,,,,[[7],[3]],,,,]})}(),function(){var e=Ice.HashMap,t=Ice.AlreadyRegisteredException,n=Ice.NotRegisteredException,i=Ice.Class({__init__:function(){this._factoryMap=new e},add:function(e,n){var i,r;if(i=this._factoryMap.get(n),void 0!==i)throw r=new t,r.id=n,r.kindOfObject="object factory",r;this._factoryMap.set(n,e)},remove:function(e){var t,i;if(t=this._factoryMap.get(e),void 0===t)throw i=new n,i.id=e,i.kindOfObject="object factory",i;this._factoryMap["delete"](e),t.destroy()},find:function(e){return this._factoryMap.get(e)},destroy:function(){var t=this._factoryMap,n=t.entries;for(this._factoryMap=new e;null!==n;)n.value.destroy(),n=n.next}});Ice.ObjectFactoryManager=i}(),function(){var e=Ice.BasicStream,t=Ice.Current,n=(Ice.Debug,Ice.FormatType),i=Ice.Context,r=Ice.Identity,o=Ice.Protocol,c=Ice.StringUtil,s=Ice.Class({__init__:function(n,i,c,s,a,h){this._instance=n,this._response=s,this._compress=a,this._response&&(this._os=new e(n,o.currentProtocolEncoding)),this._connection=i,this._current=new t,this._current.id=new r,this._current.adapter=c,this._current.con=this._connection,this._current.requestId=h,this._servant=null,this._locator=null,this._cookie={value:null},s&&(this._os.writeBlob(o.replyHdr),this._os.writeInt(h)),this._is=null,this._cb=null,this._active=!0},__startWriteParams:function(e){return this._response&&(this._os.writeByte(0),this._os.startWriteEncaps(this._current.encoding,e)),this._os},__endWriteParams:function(e){if(this._response){var t=this._os.pos;this._os.pos=o.headerSize+4,this._os.writeByte(e?o.replyOK:o.replyUserException),this._os.pos=t,this._os.endWriteEncaps()}},__writeEmptyParams:function(){this._response&&(this._os.writeByte(o.replyOK),this._os.writeEmptyEncaps(this._current.encoding))},__writeParamEncaps:function(e,t){this._response&&(this._os.writeByte(t?o.replyOK:o.replyUserException),null===e||0===e.length?this._os.writeEmptyEncaps(this._current.encoding):this._os.writeEncaps(e))},__writeUserException:function(e,t){var n=this.__startWriteParams(t);n.writeUserException(e),this.__endWriteParams(!1)},__warning:function(e){var t=[];if(t.push("dispatch exception:"),t.push("\nidentity: "+this._instance.identityToString(this._current.id)),t.push("\nfacet: "+c.escapeString(this._current.facet,"")),t.push("\noperation: "+this._current.operation),null!==this._connection){var n=this._connection.getInfo();if(n instanceof Ice.IPConnectionInfo){var i=n;t.push("\nremote host: "+i.remoteAddress+" remote port: "+i.remotePort)}}e.stack&&(t.push("\n"),t.push(e.stack)),this._instance.initializationData().logger.warning(t.join(""))},__servantLocatorFinished:function(){try{return this._locator.finished(this._current,this._servant,this._cookie.value),!0}catch(e){return e instanceof Ice.UserException?(this._response?(this._os.resize(o.headerSize+4),this._os.writeByte(o.replyUserException),this._os.startWriteEncaps(),this._os.writeUserException(e),this._os.endWriteEncaps(),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse(),this._connection=null):this.__handleException(e),!1}},__handleException:function(e){var t,n=this._instance.initializationData().properties;e instanceof Ice.RequestFailedException?(null===e.id&&(e.id=this._current.id),null===e.facet&&(e.facet=this._current.facet),(null===e.operation||0===e.operation.length)&&(e.operation=this._current.operation),n.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>1&&this.__warning(e),this._response?(this._os.resize(o.headerSize+4),e instanceof Ice.ObjectNotExistException?this._os.writeByte(o.replyObjectNotExist):e instanceof Ice.FacetNotExistException?this._os.writeByte(o.replyFacetNotExist):e instanceof Ice.OperationNotExistException&&this._os.writeByte(o.replyOperationNotExist),e.id.__write(this._os),null===e.facet||0===e.facet.length?Ice.StringSeqHelper.write(this._os,null):Ice.StringSeqHelper.write(this._os,[e.facet]),this._os.writeString(e.operation),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UnknownLocalException?(n.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(o.headerSize+4),this._os.writeByte(o.replyUnknownLocalException),this._os.writeString(e.unknown),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UnknownUserException?(n.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(o.headerSize+4),this._os.writeByte(o.replyUnknownUserException),this._os.writeString(e.unknown),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UnknownException?(n.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(o.headerSize+4),this._os.writeByte(o.replyUnknownException),this._os.writeString(e.unknown),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.LocalException?(n.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(o.headerSize+4),this._os.writeByte(o.replyUnknownLocalException),t=[e.ice_name()],e.stack&&(t.push("\n"),t.push(e.stack)),this._os.writeString(t.join("")),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UserException?(n.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(o.headerSize+4),this._os.writeByte(o.replyUnknownUserException),t=[e.ice_name()],e.stack&&(t.push("\n"),t.push(e.stack)),this._os.writeString(t.join("")),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):(n.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(o.headerSize+4),this._os.writeByte(o.replyUnknownException),this._os.writeString(e.stack?e.stack:""),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()),this._connection=null},invoke:function(e,t){this._is=t;this._is.pos;this._current.id.__read(this._is);var r=Ice.StringSeqHelper.read(this._is);if(r.length>0){if(r.length>1)throw new Ice.MarshalException;this._current.facet=r[0]}else this._current.facet="";this._current.operation=this._is.readString(),this._current.mode=Ice.OperationMode.valueOf(this._is.readByte()),this._current.ctx=new i;for(var c=this._is.readSize();c-->0;){var s=this._is.readString(),a=this._is.readString();this._current.ctx.set(s,a)}if(null!==e&&(this._servant=e.findServant(this._current.id,this._current.facet),null===this._servant&&(this._locator=e.findServantLocator(this._current.id.category),null===this._locator&&this._current.id.category.length>0&&(this._locator=e.findServantLocator("")),null!==this._locator)))try{this._servant=this._locator.locate(this._current,this._cookie)}catch(h){if(h instanceof Ice.UserException){var u=this._is.skipEncaps();return this._response?(this._os.writeByte(o.replyUserException),this._os.startWriteEncaps(u,n.DefaultFormat),this._os.writeUserException(h),this._os.endWriteEncaps(),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse(),void(this._connection=null)}return this._is.skipEncaps(),void this.__handleException(h)}try{if(null===this._servant)throw this._is.skipEncaps(),null!==e&&e.hasServant(this._current.id)?new Ice.FacetNotExistException(this._current.id,this._current.facet,this._current.operation):new Ice.ObjectNotExistException(this._current.id,this._current.facet,this._current.operation);if(this._servant.__dispatch(this,this._current)===Ice.DispatchStatus.DispatchAsync)return;if(null!==this._locator&&!this.__servantLocatorFinished())return}catch(h){if(null!==this._servant&&null!==this._locator&&!this.__servantLocatorFinished())return;return void this.__handleException(h)}this._response?this._connection.sendResponse(this._os,this._compress):this._connection.sendNoResponse(),this._connection=null},startReadParams:function(){return this._current.encoding=this._is.startReadEncaps(),this._is},endReadParams:function(){this._is.endReadEncaps()},readEmptyParams:function(){this._current.encoding=new Ice.EncodingVersion,this._is.skipEmptyEncaps(this._current.encoding)},readParamEncaps:function(){return this._current.encoding=new Ice.EncodingVersion,this._is.readEncaps(this._current.encoding)},__response:function(){try{if(null!==this._locator&&!this.__servantLocatorFinished())return;this._response?this._connection.sendResponse(this._os,this._compress):this._connection.sendNoResponse(),this._connection=null}catch(e){this._connection.invokeException(e,1)}},__exception:function(e){try{if(null!==this._locator&&!this.__servantLocatorFinished())return;this.__handleException(e)}catch(t){this._connection.invokeException(t,1)}},__validateResponse:function(e){return this._active?(this._active=!1,!0):!1},ice_exception:function(e){this._active&&(this._active=!1,null!==this._connection?this.__exception(e):this._instance.initializationData().properties.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e))}});Ice.IncomingAsync=s}(),function(){var e=Ice.Base64,t=(Ice.Debug,Ice.HashUtil),n=(Ice.Protocol,Ice.StringUtil),i=Ice.EndpointParseException,r=Ice.Class,o=r(Ice.EndpointI,{__init__:function(e){this._rawEncoding=Ice.Encoding_1_0,this._type=void 0===e?-1:e,this._rawBytes=null},streamWrite:function(e){e.startWriteEncaps(this._rawEncoding,Ice.FormatType.DefaultFormat),e.writeBlob(this._rawBytes),e.endWriteEncaps()},getInfo:function(){return new c(-1,!1,this._rawEncoding,this._rawBytes,this._type)},type:function(){return this._type},protocol:function(){return"opaque"},timeout:function(){return-1},changeTimeout:function(e){return this},changeConnectionId:function(e){return this},compress:function(){return!1},changeCompress:function(e){return this},datagram:function(){return!1},secure:function(){return!1},rawBytes:function(){return this._rawBytes},transceiver:function(e){return e.value=null,null},acceptor:function(e,t){return e.value=this,null},connect:function(){return null},hashCode:function(){if(void 0===this._hashCode){var e=5381;e=t.addNumber(e,this._type),e=t.addHashable(e,this._rawEncoding),e=t.addArray(e,this._rawBytes,t.addNumber),this._hashCode=e}return this._hashCode},options:function(){var t="";return t+=" -t "+this._type,t+=" -e "+Ice.encodingVersionToString(this._rawEncoding),t+=" -v "+e.encode(this._rawBytes)},equals:function(e){if(!(e instanceof o))return!1;if(this===e)return!0;if(this._type!==e._type)return!1;if(!this._rawEncoding.equals(e._rawEncoding))return!1;if(this._rawBytes.length!==e._rawBytes.length)return!1;for(var t=0;t<this._rawBytes.length;t++)if(this._rawBytes[t]!==e._rawBytes[t])return!1;return!0},compareTo:function(e){if(this===e)return 0;if(null===e)return 1;if(!(e instanceof o))return this.type()<e.type()?-1:1;if(this._type<e._type)return-1;if(e._type<this._type)return 1;if(this._rawEncoding.major<e._rawEncoding.major)return-1;if(e._rawEncoding.major<this._rawEncoding.major)return 1;if(this._rawEncoding.minor<e._rawEncoding.minor)return-1;if(e._rawEncoding.minor<this._rawEncoding.minor)return 1;if(this._rawBytes.length<e._rawBytes.length)return-1;if(e._rawBytes.length<this._rawBytes.length)return 1;for(var t=0;t<this._rawBytes.length;t++){if(this._rawBytes[t]<e._rawBytes[t])return-1;if(e._rawBytes[t]<this._rawBytes[t])return 1}return 0},checkOption:function(t,r,o){switch(t.charAt(1)){case"t":if(this._type>-1)throw new i("multiple -t options in endpoint "+o);if(null===r)throw new i("no argument provided for -t option in endpoint "+o);var c;try{c=n.toInt(r)}catch(s){throw new i("invalid type value `"+r+"' in endpoint "+o)}if(0>c||c>65535)throw new i("type value `"+r+"' out of range in endpoint "+o);return this._type=c,!0;case"v":if(this._rawBytes)throw new i("multiple -v options in endpoint "+o);if(null===r||0===r.length)throw new i("no argument provided for -v option in endpoint "+o);for(var a=0;a<r.length;++a)if(!e.isBase64(r.charAt(a)))throw new i("invalid base64 character `"+r.charAt(a)+"' (ordinal "+r.charCodeAt(a)+") in endpoint "+o);return this._rawBytes=e.decode(r),!0;case"e":if(null===r)throw new i("no argument provided for -e option in endpoint "+o);try{this._rawEncoding=Ice.stringToEncodingVersion(r)}catch(h){throw new i("invalid encoding version `"+r+"' in endpoint "+o+":\n"+h.str)}return!0;default:return!1}},initWithOptions:function(e){if(Ice.EndpointI.prototype.initWithOptions.call(this,e),this._type<0)throw new i("no -t option in endpoint `"+this+"'");if(null===this._rawBytes||0===this._rawBytes.length)throw new i("no -v option in endpoint `"+this+"'")},initWithStream:function(e){this._rawEncoding=e.getReadEncoding();var t=e.getReadEncapsSize();this._rawBytes=e.readBlob(t)}}),c=r(Ice.OpaqueEndpointInfo,{__init__:function(e,t,n,i,r){Ice.OpaqueEndpointInfo.call(this,-1,!1,n,i),this._type=r},type:function(){return this._type},datagram:function(){return!1},secure:function(){return!1}});Ice.OpaqueEndpointI=o}(),function(){Ice.ObjectFactory=Ice.Class({create:function(e){throw new Error("not implemented")},destroy:function(){throw new Error("not implemented")}})}(),function(){var e=Ice.FormatType,t=Ice.EndpointSelectionType,n=Ice.Protocol,i=function(i,r){this.defaultProtocol=i.getPropertyWithDefault("Ice.Default.Protocol",void 0!==Ice.TcpEndpointFactory?"tcp":"ws");var o=i.getProperty("Ice.Default.Host");if(this.defaultHost=o.length>0?o:null,o=i.getProperty("Ice.Default.SourceAddress"),this.defaultSourceAddress=o.length>0?o:null,o=i.getProperty("Ice.Override.Timeout"),o.length>0?(this.overrideTimeout=!0,this.overrideTimeoutValue=i.getPropertyAsInt("Ice.Override.Timeout"),this.overrideTimeoutValue<1&&-1!==this.overrideTimeoutValue&&(this.overrideTimeoutValue=-1,r.warning("invalid value for Ice.Override.Timeout `"+i.getProperty("Ice.Override.Timeout")+"': defaulting to -1"))):(this.overrideTimeout=!1,this.overrideTimeoutValue=-1),o=i.getProperty("Ice.Override.ConnectTimeout"),o.length>0?(this.overrideConnectTimeout=!0,this.overrideConnectTimeoutValue=i.getPropertyAsInt("Ice.Override.ConnectTimeout"),this.overrideConnectTimeoutValue<1&&-1!==this.overrideConnectTimeoutValue&&(this.overrideConnectTimeoutValue=-1,r.warning("invalid value for Ice.Override.ConnectTimeout `"+i.getProperty("Ice.Override.ConnectTimeout")+"': defaulting to -1"))):(this.overrideConnectTimeout=!1,this.overrideConnectTimeoutValue=-1),o=i.getProperty("Ice.Override.CloseTimeout"),o.length>0?(this.overrideCloseTimeout=!0,this.overrideCloseTimeoutValue=i.getPropertyAsInt("Ice.Override.CloseTimeout"),this.overrideCloseTimeoutValue<1&&-1!==this.overrideCloseTimeoutValue&&(this.overrideCloseTimeoutValue=-1,r.warning("invalid value for Ice.Override.CloseTimeout `"+i.getProperty("Ice.Override.CloseTimeout")+"': defaulting to -1"))):(this.overrideCloseTimeout=!1,this.overrideCloseTimeoutValue=-1),this.overrideCompress=!1,this.overrideSecure=!1,o=i.getPropertyWithDefault("Ice.Default.EndpointSelection","Random"),"Random"===o)this.defaultEndpointSelection=t.Random;else{if("Ordered"!==o){var c=new Ice.EndpointSelectionTypeParseException;throw c.str="illegal value `"+o+"'; expected `Random' or `Ordered'",c}this.defaultEndpointSelection=t.Ordered}this.defaultTimeout=i.getPropertyAsIntWithDefault("Ice.Default.Timeout",6e4),this.defaultTimeout<1&&-1!==this.defaultTimeout&&(this.defaultTimeout=6e4,r.warning("invalid value for Ice.Default.Timeout `"+i.getProperty("Ice.Default.Timeout")+"': defaulting to 60000")),this.defaultLocatorCacheTimeout=i.getPropertyAsIntWithDefault("Ice.Default.LocatorCacheTimeout",-1),this.defaultLocatorCacheTimeout<-1&&(this.defaultLocatorCacheTimeout=-1,r.warning("invalid value for Ice.Default.LocatorCacheTimeout `"+i.getProperty("Ice.Default.LocatorCacheTimeout")+"': defaulting to -1")),this.defaultInvocationTimeout=i.getPropertyAsIntWithDefault("Ice.Default.InvocationTimeout",-1),this.defaultInvocationTimeout<1&&-1!==this.defaultInvocationTimeout&&(this.defaultInvocationTimeout=-1,r.warning("invalid value for Ice.Default.InvocationTimeout `"+i.getProperty("Ice.Default.InvocationTimeout")+"': defaulting to -1")),this.defaultPreferSecure=i.getPropertyAsIntWithDefault("Ice.Default.PreferSecure",0)>0,o=i.getPropertyWithDefault("Ice.Default.EncodingVersion",Ice.encodingVersionToString(n.currentEncoding)),this.defaultEncoding=Ice.stringToEncodingVersion(o),n.checkSupportedEncoding(this.defaultEncoding);var s=i.getPropertyAsIntWithDefault("Ice.Default.SlicedFormat",0)>0;this.defaultFormat=s?e.SlicedFormat:e.CompactFormat};Ice.DefaultsAndOverrides=i}(),function(){var e=(Ice.Debug,Ice.HashMap),t=Ice.Promise,n=Ice.Protocol,i=Ice.LocatorRegisterPrx,r=Ice.Class,o=r({__init__:function(t,n,i){this._locator=t,this._locatorRegistry=null,this._table=n,this._background=i,this._adapterRequests=new e,this._objectRequests=new e(e.compareEquals)},destroy:function(){this._locatorRegistry=null,this._table.clear()},equals:function(e){return this===e?!0:e instanceof o?this._locator.equals(e._locator):!1},hashCode:function(){return this._locator.hashCode()},getLocator:function(){return this._locator},getLocatorRegistry:function(){if(null!==this._locatorRegistry)return(new t).succeed(this._locatorRegistry);var e=this;return this._locator.getRegistry().then(function(t){return e._locatorRegistry=i.uncheckedCast(t.ice_locator(null).ice_endpointSelection(Ice.EndpointSelectionType.Ordered)),e._locatorRegistry})},getEndpoints:function(e,n,i,r){var o=r||new t,c=null,s={value:!1};if(e.isWellKnown()){var a=this._table.getObjectReference(e.getIdentity(),i,s);if(!s.value){if(!this._background||null===a)return this.getObjectRequest(e).addCallback(e,null,i,o),o;this.getObjectRequest(e).addCallback(e,null,i,null)}if(a.isIndirect()){if(!a.isWellKnown())return this.getEndpoints(a,e,i,o),o}else c=a.getEndpoints()}else if(c=this._table.getAdapterEndpoints(e.getAdapterId(),i,s),!s.value){if(!this._background||null===c)return this.getAdapterRequest(e).addCallback(e,n,i,o),o;this.getAdapterRequest(e).addCallback(e,n,i,null)}return e.getInstance().traceLevels().location>=1&&this.getEndpointsTrace(e,c,!0),o.succeed(c,!0),o},clearCache:function(e){if(e.isWellKnown()){var t=this._table.removeObjectReference(e.getIdentity());null!==t&&(t.isIndirect()?t.isWellKnown()||this.clearCache(t):e.getInstance().traceLevels().location>=2&&this.trace("removed endpoints from locator table",e,t.getEndpoints()))}else{var n=this._table.removeAdapterEndpoints(e.getAdapterId());null!==n&&e.getInstance().traceLevels().location>=2&&this.trace("removed endpoints from locator table\n",e,n)}},trace:function(e,t,n){var i=[];i.push(e),i.push("\n"),t.isWellKnown()?(i.push("object = "),i.push(t.getInstance().identityToString(t.getIdentity())),i.push("\n")):(i.push("adapter = "),i.push(t.getAdapterId()),i.push("\n")),i.push("endpoints = ");for(var r=0;r<n.length;r++)i.push(n[r].toString()),r+1<n.length&&i.push(":");t.getInstance().initializationData().logger.trace(t.getInstance().traceLevels().locationCat,i.join(""))},getEndpointsException:function(e,t){var n,i,r=e.getInstance();try{throw t}catch(o){if(o instanceof Ice.AdapterNotFoundException)throw r.traceLevels().location>=1&&(n=[],n.push("adapter not found\n"),n.push("adapter = "),n.push(e.getAdapterId()),r.initializationData().logger.trace(r.traceLevels().locationCat,n.join(""))),i=new Ice.NotRegisteredException,i.kindOfObject="object adapter",i.id=e.getAdapterId(),i;if(o instanceof Ice.ObjectNotFoundException)throw r.traceLevels().location>=1&&(n=[],n.push("object not found\n"),n.push("object = "),n.push(r.identityToString(e.getIdentity())),r.initializationData().logger.trace(r.traceLevels().locationCat,n.join(""))),i=new Ice.NotRegisteredException,i.kindOfObject="object",i.id=r.identityToString(e.getIdentity()),i;if(o instanceof Ice.NotRegisteredException)throw o;if(o instanceof Ice.LocalException)throw r.traceLevels().location>=1&&(n=[],n.push("couldn't contact the locator to retrieve adapter endpoints\n"),e.getAdapterId().length>0?(n.push("adapter = "),n.push(e.getAdapterId()),n.push("\n")):(n.push("object = "),n.push(r.identityToString(e.getIdentity())),n.push("\n")),n.push("reason = "+o.toString()),r.initializationData().logger.trace(r.traceLevels().locationCat,n.join(""))),o}},getEndpointsTrace:function(e,t,n){if(null!==t&&t.length>0)n?this.trace("found endpoints in locator table",e,t):this.trace("retrieved endpoints from locator, adding to locator table",e,t);else{var i=e.getInstance(),r=[];r.push("no endpoints configured for "),e.getAdapterId().length>0?(r.push("adapter\n"),r.push("adapter = "),r.push(e.getAdapterId()),r.push("\n")):(r.push("object\n"),r.push("object = "),r.push(i.identityToString(e.getIdentity())),r.push("\n")),i.initializationData().logger.trace(i.traceLevels().locationCat,r.join(""))}},getAdapterRequest:function(e){if(e.getInstance().traceLevels().location>=1){var t=e.getInstance(),n=[];n.push("searching for adapter by id\n"),n.push("adapter = "),n.push(e.getAdapterId()),t.initializationData().logger.trace(t.traceLevels().locationCat,n.join(""))}var i=this._adapterRequests.get(e.getAdapterId());return void 0!==i?i:(i=new h(this,e),this._adapterRequests.set(e.getAdapterId(),i),i)},getObjectRequest:function(e){if(e.getInstance().traceLevels().location>=1){var t=e.getInstance(),n=[];n.push("searching for object by id\n"),n.push("object = "),n.push(t.identityToString(e.getIdentity())),t.initializationData().logger.trace(t.traceLevels().locationCat,n.join(""))}var i=this._objectRequests.get(e.getIdentity());return void 0!==i?i:(i=new a(this,e),this._objectRequests.set(e.getIdentity(),i),i)},finishRequest:function(e,t,n,i){if(null===n||n.__reference().isIndirect())for(var r=0;r<t.length;++r)this._table.removeObjectReference(t[r].getIdentity());e.isWellKnown()?(null===n||n.__reference().isWellKnown()?i&&this._table.removeObjectReference(e.getIdentity()):this._table.addObjectReference(e.getIdentity(),n.__reference()),this._objectRequests["delete"](e.getIdentity())):(null===n||n.__reference().isIndirect()?i&&this._table.removeAdapterEndpoints(e.getAdapterId()):this._table.addAdapterEndpoints(e.getAdapterId(),n.__reference().getEndpoints()),this._adapterRequests["delete"](e.getAdapterId()))}});Ice.LocatorInfo=o;var c=r({__init__:function(e,t,n){this._ref=e,this._ttl=t,this._promise=n},response:function(e,t){var i=null;if(null!==t){var r=t.__reference();if(this._ref.isWellKnown()&&!n.isSupported(this._ref.getEncoding(),r.getEncoding()));else if(r.isIndirect()){if(this._ref.isWellKnown()&&!r.isWellKnown()){var o=this;return void e.getEndpoints(r,this._ref,this._ttl).then(function(e,t){null!==o._promise&&o._promise.succeed(e,t)},function(e){null!==o._promise&&o._promise.fail(e)})}}else i=r.getEndpoints()}this._ref.getInstance().traceLevels().location>=1&&e.getEndpointsTrace(this._ref,i,!1),null!==this._promise&&this._promise.succeed(null===i?[]:i,!1)},exception:function(e,t){try{e.getEndpointsException(this._ref,t)}catch(n){null!==this._promise&&this._promise.fail(n)}}}),s=r({__init__:function(e,t){this._locatorInfo=e,this._ref=t,this._callbacks=[],this._wellKnownRefs=[],this._sent=!1,this._response=!1,this._proxy=null,this._exception=null},addCallback:function(e,t,n,i){var r=new c(e,n,i);this._response?r.response(this._locatorInfo,this._proxy):null!==this._exception?r.exception(this._locatorInfo,this._exception):(this._callbacks.push(r),null!==t&&this._wellKnownRefs.push(t),this._sent||(this._sent=!0,this.send()))},response:function(e){this._locatorInfo.finishRequest(this._ref,this._wellKnownRefs,e,!1),this._response=!0,this._proxy=e;for(var t=0;t<this._callbacks.length;++t)this._callbacks[t].response(this._locatorInfo,e)},exception:function(e){this._locatorInfo.finishRequest(this._ref,this._wellKnownRefs,null,e instanceof Ice.UserException),this._exception=e;
for(var t=0;t<this._callbacks.length;++t)this._callbacks[t].exception(this._locatorInfo,e)}}),a=r(s,{__init__:function(e,t){s.call(this,e,t)},send:function(){try{var e=this;this._locatorInfo.getLocator().findObjectById(this._ref.getIdentity()).then(function(t){e.response(t)},function(t){e.exception(t)})}catch(t){this.exception(t)}}}),h=r(s,{__init__:function(e,t){s.call(this,e,t)},send:function(){try{var e=this;this._locatorInfo.getLocator().findAdapterById(this._ref.getAdapterId()).then(function(t){e.response(t)},function(t){e.exception(t)})}catch(t){this.exception(t)}}})}(),function(){var e=Ice.HashMap,t=Ice.CommunicatorDestroyedException,n=Ice.Class({__init__:function(t){this._logger=t,this._destroyed=!1,this._tokenId=0,this._tokens=new e},destroy:function(){var e=this;this._tokens.forEach(function(t,n){e.cancel(t)}),this._destroyed=!0,this._tokens.clear()},schedule:function(e,n){if(this._destroyed)throw new t;var i=this._tokenId++,r=this,o=setTimeout(function(){r.handleTimeout(i)},n);return this._tokens.set(i,{callback:e,id:o,isInterval:!1}),i},scheduleRepeated:function(e,n){if(this._destroyed)throw new t;var i=this._tokenId++,r=this,o=setInterval(function(){r.handleInterval(i)},n);return this._tokens.set(i,{callback:e,id:o,isInterval:!0}),i},cancel:function(e){if(this._destroyed)return!1;var t=this._tokens.get(e);return void 0===t?!1:(this._tokens["delete"](e),t.isInterval?clearInterval(t.id):clearTimeout(t.id),!0)},handleTimeout:function(e){if(!this._destroyed){var t=this._tokens.get(e);if(void 0!==t){this._tokens["delete"](e);try{t.callback()}catch(n){this._logger.warning("uncaught exception while executing timer:\n"+n)}}}},handleInterval:function(e){if(!this._destroyed){var t=this._tokens.get(e);if(void 0!==t)try{t.callback()}catch(n){this._logger.warning("uncaught exception while executing timer:\n"+n)}}}});Ice.Timer=n}(),function(){Slice.defineDictionary(Ice,"PropertyDict","PropertyDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),Ice.PropertiesAdmin=Slice.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::PropertiesAdmin"],-1,void 0,void 0,!1),Ice.PropertiesAdminPrx=Slice.defineProxy(Ice.ObjectPrx,Ice.PropertiesAdmin.ice_staticId,void 0),Slice.defineOperations(Ice.PropertiesAdmin,Ice.PropertiesAdminPrx,{getProperty:[,,,,,[7],[[7]],,,,],getPropertiesForPrefix:[,,,,,["Ice.PropertyDictHelper"],[[7]],,,,],setProperties:[,,,1,,,[["Ice.PropertyDictHelper"]],,,,]})}(),function(){var e=Ice.Logger,t=null;Ice.getProcessLogger=function(){return null===t&&(t=new e("","")),t},Ice.setProcessLogger=function(e){t=e}}(),function(){var e=(Ice.Debug,Ice.BasicStream),t=Ice.EndpointParseException,n=Ice.OpaqueEndpointI,i=Ice.Protocol,r=Ice.StringUtil,o=Ice.Class({__init__:function(e){this._instance=e,this._factories=[]},add:function(e){for(var t=0;t<this._factories.length;++t);this._factories.push(e)},get:function(e){for(var t=0;t<this._factories.length;++t)if(this._factories[t].type()===e)return this._factories[t];return null},create:function(o,c){var s=o.trim();if(0===s.length)throw new t("value has no non-whitespace characters");var a=r.splitString(s," 	\n\r");if(0===a.length)throw new t("value has no non-whitespace characters");var h=a[0];a.splice(0,1),"default"===h&&(h=this._instance.defaultsAndOverrides().defaultProtocol);for(var u=0,l=this._factories.length;l>u;++u)if(this._factories[u].protocol()===h){var d=this._factories[u].create(a,c);if(a.length>0)throw new t("unrecognized argument `"+a[0]+"' in endpoint `"+o+"'");return d}if("opaque"===h){var p=new n;if(p.initWithOptions(a),a.length>0)throw new t("unrecognized argument `"+a[0]+"' in endpoint `"+o+"'");for(u=0,l=this._factories.length;l>u;++u)if(this._factories[u].type()==p.type()){var _=new e(this._instance,i.currentProtocolEncoding);_.writeShort(p.type()),p.streamWrite(_),_.pos=0,_.readShort(),_.startReadEncaps();var f=this._factories[u].read(_);return _.endReadEncaps(),f}return p}return null},read:function(e){for(var t,i=e.readShort(),r=0;r<this._factories.length;++r)if(this._factories[r].type()==i)return e.startReadEncaps(),t=this._factories[r].read(e),e.endReadEncaps(),t;return e.startReadEncaps(),t=new n(i),t.initWithStream(e),e.endReadEncaps(),t},destroy:function(){for(var e=0;e<this._factories.length;++e)this._factories[e].destroy();this._factories=[]}});Ice.EndpointFactoryManager=o}(),function(){var e=Ice.StringUtil,t=Ice.HashMap,n=(Ice.Promise,Ice.PropertyNames),i=(Ice.Debug,Ice.ProcessLogger,Ice.getProcessLogger),r=Ice.InitializationException,o=0,c=1,s=Ice.Class({__init__:function(e,n){if(this._properties=new t,void 0!==n&&null!==n)for(var i=n._properties.entries;null!==i;i=i.next)this._properties.set(i.key,{value:i.value.value,used:!1});if(void 0!==e&&null!==e){var r=this.parseIceCommandLineOptions(e);e.length=0;for(var o=0;o<r.length;++o)e.push(r[o])}},getProperty:function(e){return this.getPropertyWithDefault(e,"")},getPropertyWithDefault:function(e,t){var n=this._properties.get(e);return void 0!==n?(n.used=!0,n.value):t},getPropertyAsInt:function(e){return this.getPropertyAsIntWithDefault(e,0)},getPropertyAsIntWithDefault:function(e,t){var n=this._properties.get(e);return void 0!==n?(n.used=!0,parseInt(n.value)):t},getPropertyAsList:function(e){return this.getPropertyAsListWithDefault(e,0)},getPropertyAsListWithDefault:function(t,n){(void 0===n||null===n)&&(n=[]);var r=this._properties.get(t);if(void 0!==r){r.used=!0;var o=e.splitString(r.value,", 	\r\n");return null===o?(i().warning("mismatched quotes in property "+t+"'s value, returning default value"),n):(0===o.length&&(o=n),o)}return n},getPropertiesForPrefix:function(e){for(var n=new t,i=this._properties.entries;null!==i;i=i.next)(void 0===e||null===e||0===i.key.indexOf(e))&&(i.value.used=!0,n.set(i.key,i.value.value));return n},setProperty:function(e,t){null!==e&&void 0!==e&&(e=e.trim());var o=i();if(null===e||void 0===e||0===e.length)throw new r("Attempt to set property with empty key");var c=e.indexOf(".");if(-1!==c)for(var s=e.substr(0,c),a=0;a<n.validProps.length;++a){var h=n.validProps[a][0].pattern;c=h.indexOf(".");var u=h.substring(0,c-1);if(u==s){for(var l,d=!1,p=!1,_=0;_<n.validProps[a][_].length&&!d;++_){h=n.validProps[a][_].pattern();var f=new RegExp(h);if(d=f.test(e),d&&n.validProps[a][_].deprecated&&(o.warning("deprecated property: "+e),null!==n.validProps[a][_].deprecatedBy&&(e=n.validProps[a][_].deprecatedBy)),d)break;if(f=new RegExp(h.toUpperCase()),d=f.test(e.toUpperCase())){p=!0,l=h.substr(2),l=l.substr(0,l.length-1),l=l.replace(/\\/g,"");break}}d?p&&o.warning("unknown property: `"+e+"'; did you mean `"+l+"'"):o.warning("unknown property: "+e)}}if(void 0!==t&&null!==t&&t.length>0){var I=this._properties.get(e);void 0!==I?I.value=t:this._properties.set(e,{value:t,used:!1})}else this._properties["delete"](e)},getCommandLineOptions:function(){for(var e=[],t=this._properties.entries;null!==t;t=t.next)e.push("--"+t.key+"="+t.pv.value);return e},parseCommandLineOptions:function(e,t){e.length>0&&"."!=e.charAt(e.length-1)&&(e+="."),e="--"+e;var n=[],i=this;return t.forEach(function(t){0===t.indexOf(e)?(-1===t.indexOf("=")&&(t+="=1"),i.parseLine(t.substring(2))):n.push(t)}),n},parseIceCommandLineOptions:function(e){for(var t=e.slice(),i=0;i<n.clPropNames.length;++i)t=this.parseCommandLineOptions(n.clPropNames[i],t);return t},parse:function(e){for(var t,n=e.match(/[^\r\n]+/g);t=n.shift();)this.parseLine(t)},parseLine:function(e){for(var t="",n="",r=o,s="",a="",h=!1,u=0;u<e.length;++u){var l=e.charAt(u);switch(r){case o:switch(l){case"\\":if(u<e.length-1)switch(l=e.charAt(++u)){case"\\":case"#":case"=":t+=s,s="",t+=l;break;case" ":0!==t.length&&(s+=l);break;default:t+=s,s="",t+="\\",t+=l}else t+=s,t+=l;break;case" ":case"	":case"\r":case"\n":0!==t.length&&(s+=l);break;case"=":s="",r=c;break;case"#":h=!0;break;default:t+=s,s="",t+=l}break;case c:switch(l){case"\\":if(u<e.length-1)switch(l=e.charAt(++u)){case"\\":case"#":case"=":n+=0===n.length?a:s,s="",a="",n+=l;break;case" ":s+=l,a+=l;break;default:n+=0===n.length?a:s,s="",a="",n+="\\",n+=l}else n+=0===n.length?a:s,n+=l;break;case" ":case"	":case"\r":case"\n":0!==n.length&&(s+=l);break;case"#":h=!0;break;default:n+=0===n.length?a:s,s="",a="",n+=l}}if(h)break}return n+=a,r===o&&0!==t.length||r==c&&0===t.length?void i().warning('invalid config file entry: "'+e+'"'):void(0!==t.length&&this.setProperty(t,n))},clone:function(){return new s(null,this)},getUnusedProperties:function(){for(var e=[],t=this._properties.entries;null!==t;t=t.next)t.pv.used||e.push(t.key);return e}});s.createProperties=function(e,t){return new s(e,t)},Ice.Properties=s}(),function(){var e=(Ice.Debug,Ice.HashMap),t=Ice.StringUtil,n=Ice.Class({__init__:function(t,n){this._instance=t,this._adapterName=n,this._servantMapMap=new e(e.compareEquals),this._defaultServantMap=new e,this._locatorMap=new e},addServant:function(n,i,r){null===r&&(r="");var o=this._servantMapMap.get(i);if(void 0===o)o=new e,this._servantMapMap.set(i,o);else if(o.has(r)){var c=new Ice.AlreadyRegisteredException;throw c.id=this._instance.identityToString(i),c.kindOfObject="servant",r.length>0&&(c.id+=" -f "+t.escapeString(r,"")),c}o.set(r,n)},addDefaultServant:function(e,t){var n=this._defaultServantMap.get(t);if(void 0!==n){var i=new Ice.AlreadyRegisteredException;throw i.kindOfObject="default servant",i.id=t,i}this._defaultServantMap.set(t,e)},removeServant:function(e,n){null===n&&(n="");var i=this._servantMapMap.get(e);if(void 0===i||!i.has(n)){var r=new Ice.NotRegisteredException;throw r.id=this._instance.identityToString(e),r.kindOfObject="servant",n.length>0&&(r.id+=" -f "+t.escapeString(n,"")),r}var o=i.get(n);return i["delete"](n),0===i.size&&this._servantMapMap["delete"](e),o},removeDefaultServant:function(e){var t=this._defaultServantMap.get(e);if(void 0===t){var n=new Ice.NotRegisteredException;throw n.kindOfObject="default servant",n.id=e,n}return this._defaultServantMap["delete"](e),t},removeAllFacets:function(e){var t=this._servantMapMap.get(e);if(void 0===t){var n=new Ice.NotRegisteredException;throw n.id=this._instance.identityToString(e),n.kindOfObject="servant",n}return this._servantMapMap["delete"](e),t},findServant:function(e,t){null===t&&(t="");var n=this._servantMapMap.get(e),i=null;return void 0===n?(i=this._defaultServantMap.get(e.category),void 0===i&&(i=this._defaultServantMap.get(""))):i=n.get(t),void 0===i?null:i},findDefaultServant:function(e){var t=this._defaultServantMap.get(e);return void 0===t?null:t},findAllFacets:function(t){var n=this._servantMapMap.get(t);return void 0!==n?n.clone():new e},hasServant:function(e){var t=this._servantMapMap.get(e);return void 0===t?!1:!0},addServantLocator:function(e,n){var i=this._locatorMap.get(n);if(void 0!==i){var r=new Ice.AlreadyRegisteredException;throw r.id=t.escapeString(n,""),r.kindOfObject="servant locator",r}this._locatorMap.set(n,e)},removeServantLocator:function(e){var n=this._locatorMap.get(e);if(void 0===n){var i=new Ice.NotRegisteredException;throw i.id=t.escapeString(e,""),i.kindOfObject="servant locator",i}return this._locatorMap["delete"](e),n},findServantLocator:function(e){var t=this._locatorMap.get(e);return void 0===t?null:t},destroy:function(){var e=this._instance.initializationData().logger;this._servantMapMap.clear();var t=this._locatorMap.clone();this._locatorMap.clear(),this._instance=null;for(var n=t.entries;null!==n;n=n.next){var i=n.value;try{i.deactivate(n.key)}catch(r){var o="exception during locator deactivation:\nobject adapter: `"+this._adapterName+"'\nlocator category: `"+n.key+"'\n"+r.toString();e.error(o)}}}});Ice.ServantManager=n}(),function(){function e(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:7&n|8).toString(16)});return t}Ice.generateUUID=e}(),function(){var e=(Ice.Promise,Ice.ReferenceMode),t=Ice.Class({__init__:function(t,n,i){this._reference=t,this._response=t.getMode()==e.ModeTwoway,this._connection=n,this._compress=i},connect:function(){return this},update:function(e,t){try{if(e===this)return t;if(e.getConnection()===this._connection)return t}catch(n){}return this},prepareBatchRequest:function(e){this._connection.prepareBatchRequest(e)},finishBatchRequest:function(e){this._connection.finishBatchRequest(e,this._compress)},abortBatchRequest:function(){this._connection.abortBatchRequest()},sendAsyncRequest:function(e){return e.__send(this._connection,this._compress,this._response)},asyncRequestCanceled:function(e){return this._connection.asyncRequestCanceled(e)},getReference:function(){return this._reference},getConnection:function(){return this._connection}});Ice.ConnectionRequestHandler=t}(),function(){var e=Ice.Class({__init__:function(e,t,n,i){this._instance=e,this._traceLevel=e.traceLevels().network,this._traceCategory=e.traceLevels().networkCat,this._logger=e.initializationData().logger,this._properties=e.initializationData().properties,this._type=t,this._protocol=n,this._secure=i},traceLevel:function(){return this._traceLevel},traceCategory:function(){return this._traceCategory},logger:function(){return this._logger},protocol:function(){return this._protocol},type:function(){return this._type},secure:function(){return this._secure},properties:function(){return this._properties},defaultHost:function(){return this._instance.defaultsAndOverrides().defaultHost},defaultSourceAddress:function(){return this._instance.defaultsAndOverrides().defaultSourceAddress},defaultEncoding:function(){return this._instance.defaultsAndOverrides().defaultEncoding},defaultTimeout:function(){return this._instance.defaultsAndOverrides().defaultTimeout},messageSizeMax:function(){return this._instance.messageSizeMax()}});Ice.ProtocolInstance=e}(),function(){var e=Ice.ArrayUtil,t=(Ice.Debug,Ice.HashMap),n=Ice.HashUtil,i=Ice.OpaqueEndpointI,r=Ice.Promise,o=(Ice.Protocol,Ice.ReferenceMode),c=Ice.StringUtil,s=Ice.StringSeqHelper,a=Ice.EndpointSelectionType,h=Ice.Identity,u=Ice.RouterPrx,l=Ice.LocatorPrx,d=Ice.PropertyNames,p=Ice.Class,_=["EndpointSelection","ConnectionCached","PreferSecure","EncodingVersion","LocatorCacheTimeout","InvocationTimeout","Locator","Router","CollocationOptimized"],f=p({__init__:function(e,t){this._instance=e,this._communicator=t,this._defaultRouter=null,this._defaultLocator=null},create:function(e,t,n,i){return 0===e.name.length&&0===e.category.length?null:this.createImpl(e,t,n.getMode(),n.getSecure(),n.getProtocol(),n.getEncoding(),i,null,null)},createWithAdapterId:function(e,t,n,i){return 0===e.name.length&&0===e.category.length?null:this.createImpl(e,t,n.getMode(),n.getSecure(),n.getProtocol(),n.getEncoding(),null,i,null)},createFixed:function(e,t){if(0===e.name.length&&0===e.category.length)return null;var n=new g(this._instance,this._communicator,e,"",t.endpoint().datagram()?o.ModeDatagram:o.ModeTwoway,t.endpoint().secure(),this._instance.defaultsAndOverrides().defaultEncoding,t);return n},copy:function(e){var t=e.getIdentity();return 0===t.name.length&&0===t.category.length?null:e.clone()},createFromString:function(e,t){if(void 0===e||null===e||0===e.length)return null;var n,i=" 	\n\r",r=0;if(n=c.findFirstNotOf(e,i,r),-1==n)throw new Ice.ProxyParseException("no non-whitespace characters found in `"+e+"'");var s=null;if(r=c.checkQuote(e,n),-1===r)throw new Ice.ProxyParseException("mismatched quotes around identity in `"+e+"'");if(0===r?(r=c.findFirstOf(e,i+":@",n),-1===r&&(r=e.length),s=e.substring(n,r)):(n++,s=e.substring(n,r),r++),n===r)throw new Ice.ProxyParseException("no identity in `"+e+"'");var a=this._instance.stringToIdentity(s);if(0===a.name.length){if(a.category.length>0)throw new Ice.IllegalIdentityException(a);if(-1!=c.findFirstNotOf(e,i,r))throw new Ice.ProxyParseException("invalid characters after identity in `"+e+"'");return null}for(var h="",u=o.ModeTwoway,l=!1,d=this._instance.defaultsAndOverrides().defaultEncoding,p=Ice.Protocol_1_0,_="";;){if(n=c.findFirstNotOf(e,i,r),-1===n)break;if(":"==e.charAt(n)||"@"==e.charAt(n))break;if(r=c.findFirstOf(e,i+":@",n),-1==r&&(r=e.length),n==r)break;var f=e.substring(n,r);if(2!=f.length||"-"!=f.charAt(0))throw new Ice.ProxyParseException("expected a proxy option but found `"+f+"' in `"+e+"'");var I=null,g=c.findFirstNotOf(e,i,r);if(-1!=g){var m=e.charAt(g);if("@"!=m&&":"!=m&&"-"!=m){if(n=g,r=c.checkQuote(e,n),-1==r)throw new Ice.ProxyParseException("mismatched quotes around value for "+f+" option in `"+e+"'");0===r?(r=c.findFirstOf(e,i+":@",n),-1===r&&(r=e.length),I=e.substring(n,r)):(n++,I=e.substring(n,r),r++)}}switch(f.charAt(1)){case"f":if(null===I)throw new Ice.ProxyParseException("no argument provided for -f option in `"+e+"'");try{h=c.unescapeString(I,0,I.length)}catch(v){throw new Ice.ProxyParseException("invalid facet in `"+e+"': "+v.message)}break;case"t":if(null!==I)throw new Ice.ProxyParseException("unexpected argument `"+I+"' provided for -t option in `"+e+"'");u=o.ModeTwoway;break;case"o":if(null!==I)throw new Ice.ProxyParseException("unexpected argument `"+I+"' provided for -o option in `"+e+"'");u=o.ModeOneway;break;case"O":if(null!==I)throw new Ice.ProxyParseException("unexpected argument `"+I+"' provided for -O option in `"+e+"'");u=o.ModeBatchOneway;break;case"d":if(null!==I)throw new Ice.ProxyParseException("unexpected argument `"+I+"' provided for -d option in `"+e+"'");u=o.ModeDatagram;break;case"D":if(null!==I)throw new Ice.ProxyParseException("unexpected argument `"+I+"' provided for -D option in `"+e+"'");u=o.ModeBatchDatagram;break;case"s":if(null!==I)throw new Ice.ProxyParseException("unexpected argument `"+I+"' provided for -s option in `"+e+"'");l=!0;break;case"e":if(null===I)throw new Ice.ProxyParseException("no argument provided for -e option in `"+e+"'");try{d=Ice.stringToEncodingVersion(I)}catch(y){throw new Ice.ProxyParseException("invalid encoding version `"+I+"' in `"+e+"':\n"+y.str)}break;case"p":if(null===I)throw new Ice.ProxyParseException("no argument provided for -p option in `"+e+"'");try{p=Ice.stringToProtocolVersion(I)}catch(y){throw new Ice.ProxyParseException("invalid protocol version `"+I+"' in `"+e+"':\n"+y.str)}break;default:throw new Ice.ProxyParseException("unknown option `"+f+"' in `"+e+"'")}}if(-1===n)return this.createImpl(a,h,u,l,p,d,null,null,t);var w=[];if(":"==e.charAt(n)){var S=[];for(r=n;r<e.length&&":"==e.charAt(r);){for(n=r+1,r=n;;){if(r=e.indexOf(":",r),-1==r){r=e.length;break}for(var E=!1,x=n;;){if(x=e.indexOf('"',x),-1==x||x>r)break;if(x=e.indexOf('"',++x),-1==x)break;if(x>r){E=!0;break}++x}if(!E)break;++r}var b=e.substring(n,r),C=this._instance.endpointFactoryManager().create(b,!1);null!==C?w.push(C):S.push(b)}if(0===w.length)throw new Ice.EndpointParseException("invalid endpoint `"+S[0]+"' in `"+e+"'");if(0!==S.length&&this._instance.initializationData().properties.getPropertyAsIntWithDefault("Ice.Warn.Endpoints",1)>0){var P=[];P.push("Proxy contains unknown endpoints:");for(var M=0;M<S.length;++M)P.push(" `"),P.push(S[M]),P.push("'");this._instance.initializationData().logger.warning(P.join(""))}return this.createImpl(a,h,u,l,p,d,w,null,t)}if("@"==e.charAt(n)){if(n=c.findFirstNotOf(e,i,n+1),-1==n)throw new Ice.ProxyParseException("missing adapter id in `"+e+"'");var O=null;if(r=c.checkQuote(e,n),-1===r)throw new Ice.ProxyParseException("mismatched quotes around adapter id in `"+e+"'");if(0===r?(r=c.findFirstOf(e,i,n),-1===r&&(r=e.length),O=e.substring(n,r)):(n++,O=e.substring(n,r),r++),r!==e.length&&-1!==c.findFirstNotOf(e,i,r))throw new Ice.ProxyParseException("invalid trailing characters after `"+e.substring(0,r+1)+"' in `"+e+"'");try{_=c.unescapeString(O,0,O.length)}catch(v){throw new Ice.ProxyParseException("invalid adapter id in `"+e+"': "+v.message)}if(0===_.length)throw new Ice.ProxyParseException("empty adapter id in `"+e+"'");return this.createImpl(a,h,u,l,p,d,null,_,t)}throw new Ice.ProxyParseException("malformed proxy `"+e+"'")},createFromStream:function(e,t){if(0===e.name.length&&0===e.category.length)return null;var n,i=s.read(t);if(i.length>0){if(i.length>1)throw new Ice.ProxyUnmarshalException;n=i[0]}else n="";var r=t.readByte();if(0>r||r>o.ModeLast)throw new Ice.ProxyUnmarshalException;var c=t.readBool(),a=null,h=null;t.getReadEncoding().equals(Ice.Encoding_1_0)?(a=Ice.Protocol_1_0,h=Ice.Encoding_1_0):(a=new Ice.ProtocolVersion,a.__read(t),h=new Ice.EncodingVersion,h.__read(t));var u=null,l=null,d=t.readSize();if(d>0){u=[];for(var p=0;d>p;p++)u[p]=this._instance.endpointFactoryManager().read(t)}else l=t.readString();return this.createImpl(e,n,r,c,a,h,u,l,null)},setDefaultRouter:function(e){if(null===this._defaultRouter?null===e:this._defaultRouter.equals(e))return this;var t=new f(this._instance,this._communicator);return t._defaultLocator=this._defaultLocator,t._defaultRouter=e,t},getDefaultRouter:function(){return this._defaultRouter},setDefaultLocator:function(e){if(null===this._defaultLocator?null===e:this._defaultLocator.equals(e))return this;var t=new f(this._instance,this._communicator);return t._defaultRouter=this._defaultRouter,t._defaultLocator=e,t},getDefaultLocator:function(){return this._defaultLocator},checkForUnknownProperties:function(e){var t,n,i=[];for(t=0;t<d.clPropNames.length;++t)if(0===e.indexOf(d.clPropNames[t]+"."))return;for(var r=this._instance.initializationData().properties.getPropertiesForPrefix(e+"."),o=r.entries;null!==o;o=o.next){var c=!1;for(t=0,n=_.length;n>t;++t)if(o.key===e+"."+_[t]){c=!0;break}c||i.push(o.key)}if(i.length>0){var s=[];for(s.push("found unknown properties for proxy '"),s.push(e),s.push("':"),t=0,n=i.length;n>t;++t)s.push("\n    "),s.push(i[t]);this._instance.initializationData().logger.warning(s.join(""))}},createImpl:function(e,t,n,i,r,o,c,s,h){var d=this._instance.defaultsAndOverrides(),p=null;null!==this._defaultLocator&&(p=this._defaultLocator.__reference().getEncoding().equals(o)?this._instance.locatorManager().find(this._defaultLocator):this._instance.locatorManager().find(this._defaultLocator.ice_encodingVersion(o)));var _=this._instance.routerManager().find(this._defaultRouter),f=!0,I=d.defaultPreferSecure,g=d.defaultEndpointSelection,v=d.defaultLocatorCacheTimeout,y=d.defaultInvocationTimeout;if(null!==h&&h.length>0){var w=this._instance.initializationData().properties;w.getPropertyAsIntWithDefault("Ice.Warn.UnknownProperties",1)>0&&this.checkForUnknownProperties(h);var S;S=h+".Locator";var E=l.uncheckedCast(this._communicator.propertyToProxy(S));null!==E&&(p=E.__reference().getEncoding().equals(o)?this._instance.locatorManager().find(E):this._instance.locatorManager().find(E.ice_encodingVersion(o))),S=h+".Router";var x=u.uncheckedCast(this._communicator.propertyToProxy(S));if(null!==x){var b=".Router";if(h.lastIndexOf(b)==h.length-b.length){var C="`"+S+"="+w.getProperty(S)+"': cannot set a router on a router; setting ignored";this._instance.initializationData().logger.warning(C)}else _=this._instance.routerManager().find(x)}if(S=h+".ConnectionCached",f=w.getPropertyAsIntWithDefault(S,f?1:0)>0,S=h+".PreferSecure",I=w.getPropertyAsIntWithDefault(S,I?1:0)>0,S=h+".EndpointSelection",w.getProperty(S).length>0){var P=w.getProperty(S);if("Random"==P)g=a.Random;else{if("Ordered"!=P)throw new Ice.EndpointSelectionTypeParseException("illegal value `"+P+"'; expected `Random' or `Ordered'");g=a.Ordered}}S=h+".LocatorCacheTimeout";var M=w.getProperty(S);0!==M.length&&(v=w.getPropertyAsIntWithDefault(S,v),-1>v&&(v=-1,this._instance.initializationData().logger.warning("invalid value for"+S+"`"+w.getProperty(S)+"': defaulting to -1"))),S=h+".InvocationTimeout",M=w.getProperty(S),0!==M.length&&(y=w.getPropertyAsIntWithDefault(S,y),1>y&&-1!==y&&(y=-1,this._instance.initializationData().logger.warning("invalid value for"+S+"`"+w.getProperty(S)+"': defaulting to -1")))}return new m(this._instance,this._communicator,e,t,n,i,r,o,c,s,p,_,f,I,g,v,y)}});Ice.ReferenceFactory=f;var I=p({__init__:function(e,t,n,i,r,o,c,s,a){this._instance=e,this._communicator=t,this._mode=r,this._secure=o,this._identity=n,this._context=I._emptyContext,this._facet=i,this._protocol=c,this._encoding=s,this._invocationTimeout=a,this._hashInitialized=!1,this._overrideCompress=!1,this._compress=!1},getMode:function(){return this._mode},getSecure:function(){return this._secure},getProtocol:function(){return this._protocol},getEncoding:function(){return this._encoding},getIdentity:function(){return this._identity},getFacet:function(){return this._facet},getInstance:function(){return this._instance},getContext:function(){return this._context},getInvocationTimeout:function(){return this._invocationTimeout},getCommunicator:function(){return this._communicator},getEndpoints:function(){return null},getAdapterId:function(){return""},getRouterInfo:function(){return null},getLocatorInfo:function(){return null},getCacheConnection:function(){return!1},getPreferSecure:function(){return!1},getEndpointSelection:function(){return null},getLocatorCacheTimeout:function(){return 0},getConnectionId:function(){return""},changeContext:function(e){(void 0===e||null===e)&&(e=I._emptyContext);var n=this._instance.referenceFactory().copy(this);return 0===e.size?n._context=I._emptyContext:n._context=new t(e),n},changeMode:function(e){if(e===this._mode)return this;var t=this._instance.referenceFactory().copy(this);return t._mode=e,t},changeSecure:function(e){if(e===this._secure)return this;var t=this._instance.referenceFactory().copy(this);return t._secure=e,t},changeIdentity:function(e){if(e.equals(this._identity))return this;var t=this._instance.referenceFactory().copy(this);return t._identity=new h(e.name,e.category),t},changeFacet:function(e){if(e===this._facet)return this;var t=this._instance.referenceFactory().copy(this);return t._facet=e,t},changeInvocationTimeout:function(e){if(e===this._invocationTimeout)return this;var t=this._instance.referenceFactory().copy(this);return t._invocationTimeout=e,t},changeEncoding:function(e){if(e.equals(this._encoding))return this;var t=this._instance.referenceFactory().copy(this);return t._encoding=e,t},changeCompress:function(e){if(this._overrideCompress&&this._compress===e)return this;var t=this._instance.referenceFactory().copy(this);return t._compress=e,t._overrideCompress=!0,t},changeAdapterId:function(e){return null},changeEndpoints:function(e){return null},changeLocator:function(e){return null},changeRouter:function(e){return null},changeCacheConnection:function(e){return null},changePreferSecure:function(e){return null},changeEndpointSelection:function(e){return null},changeLocatorCacheTimeout:function(e){return null},changeTimeout:function(e){return null},changeConnectionId:function(e){return null},hashCode:function(){if(this._hashInitialized)return this._hashValue;var e=5381;if(e=n.addNumber(e,this._mode),e=n.addBoolean(e,this._secure),e=n.addHashable(e,this._identity),null!==this._context&&void 0!==this._context)for(var t=this._context.entries;null!==t;t=t.next)e=n.addString(e,t.key),e=n.addString(e,t.value);return e=n.addString(e,this._facet),e=n.addBoolean(e,this._overrideCompress),this._overrideCompress&&(e=n.addBoolean(e,this._compress)),e=n.addHashable(e,this._protocol),e=n.addHashable(e,this._encoding),e=n.addNumber(e,this._invocationTimeout),this._hashValue=e,this._hashInitialized=!0,this._hashValue},isIndirect:function(){return!1},isWellKnown:function(){return!1},streamWrite:function(e){0===this._facet.length?e.writeSize(0):(e.writeSize(1),e.writeString(this._facet)),e.writeByte(this._mode),e.writeBool(this._secure),e.getWriteEncoding().equals(Ice.Encoding_1_0)||(this._protocol.__write(e),this._encoding.__write(e))},toString:function(){var e=[],t=this._instance.identityToString(this._identity);if(-1!=t.search(/[ :@]/)?(e.push('"'),e.push(t),e.push('"')):e.push(t),this._facet.length>0){e.push(" -f ");var n=c.escapeString(this._facet,"");-1!=n.search(/[ :@]/)?(e.push('"'),e.push(n),e.push('"')):e.push(n)}switch(this._mode){case o.ModeTwoway:e.push(" -t");break;case o.ModeOneway:e.push(" -o");break;case o.ModeBatchOneway:e.push(" -O");break;case o.ModeDatagram:e.push(" -d");break;case o.ModeBatchDatagram:e.push(" -D")}return this._secure&&e.push(" -s"),this._protocol.equals(Ice.Protocol_1_0)||(e.push(" -p "),e.push(Ice.protocolVersionToString(this._protocol))),e.push(" -e "),e.push(Ice.encodingVersionToString(this._encoding)),e.join("")},toProperty:function(e){return null},getConnection:function(){},equals:function(e){return this._mode!==e._mode?!1:this._secure!==e._secure?!1:this._identity.equals(e._identity)&&this._context.equals(e._context)?this._facet!==e._facet?!1:this._overrideCompress!==e._overrideCompress?!1:this._overrideCompress&&this._compress!==e._compress?!1:this._protocol.equals(e._protocol)&&this._encoding.equals(e._encoding)?this._invocationTimeout!==e._invocationTimeout?!1:!0:!1:!1},clone:function(){return null},copyMembers:function(e){e._context=this._context,e._overrideCompress=this._overrideCompress,e._compress=this._compress}});I._emptyContext=new t,I._emptyEndpoints=[],Ice.Reference=I;var g=p(I,{__init__:function(e,t,n,i,r,o,c,s){I.call(this,e,t,n,i,r,o,Ice.Protocol_1_0,c),this._fixedConnection=s},getEndpoints:function(){return I._emptyEndpoints},getAdapterId:function(){return""},getRouterInfo:function(){return null},getLocatorInfo:function(){return null},getCacheConnection:function(){return!1},getPreferSecure:function(){return!1},getEndpointSelection:function(){return a.Random},getLocatorCacheTimeout:function(){return 0},getConnectionId:function(){return""},changeAdapterId:function(e){throw new Ice.FixedProxyException},changeEndpoints:function(e){throw new Ice.FixedProxyException},changeLocator:function(e){throw new Ice.FixedProxyException},changeRouter:function(e){throw new Ice.FixedProxyException},changeCacheConnection:function(e){throw new Ice.FixedProxyException},changePreferSecure:function(e){throw new Ice.FixedProxyException},changeEndpointSelection:function(e){throw new Ice.FixedProxyException},changeLocatorCacheTimeout:function(e){throw new Ice.FixedProxyException},changeTimeout:function(e){throw new Ice.FixedProxyException},changeConnectionId:function(e){throw new Ice.FixedProxyException},isIndirect:function(){return!1},isWellKnown:function(){return!1},streamWrite:function(e){throw new Ice.FixedProxyException},toString:function(){throw new Ice.FixedProxyException},toProperty:function(e){throw new Ice.FixedProxyException},clone:function(){var e=new g(this.getInstance(),this.getCommunicator(),this.getIdentity(),this.getFacet(),this.getMode(),this.getSecure(),this.getEncoding(),this._fixedConnection);return this.copyMembers(e),e},getConnectionInternal:function(e){switch(this.getMode()){case o.ModeTwoway:case o.ModeOneway:case o.ModeBatchOneway:if(this._fixedConnection.endpoint().datagram())throw new Ice.NoEndpointException("");break;case o.ModeDatagram:case o.ModeBatchDatagram:if(!this._fixedConnection.endpoint().datagram())throw new Ice.NoEndpointException("")}var t,n=this.getInstance().defaultsAndOverrides();if(t=n.overrideSecure?n.overrideSecureValue:this.getSecure(),t&&!this._fixedConnection.endpoint().secure())throw new Ice.NoEndpointException("");return this._fixedConnection.throwException(),n.overrideCompress?e.value=n.overrideCompressValue:this._overrideCompress?e.value=this._compress:e.value=this._fixedConnection.endpoint().compress(),this._fixedConnection},getConnection:function(){var e=new r;try{var t={value:!1},n=this.getConnectionInternal(t);e.succeed(n,t.value)}catch(i){e.fail(i)}return e},equals:function(e){return this===e?!0:e instanceof g&&I.prototype.equals.call(this,e)?this._fixedConnection.equals(e._fixedConnection):!1}});Ice.FixedReference=g;var m=p(I,{__init__:function(e,t,n,i,r,o,c,s,a,h,u,l,d,p,_,f,g){I.call(this,e,t,n,i,r,o,c,s,g),this._endpoints=a,this._adapterId=h,this._locatorInfo=u,this._routerInfo=l,this._cacheConnection=d,this._preferSecure=p,this._endpointSelection=_,this._locatorCacheTimeout=f,this._overrideTimeout=!1,this._timeout=-1,null===this._endpoints&&(this._endpoints=I._emptyEndpoints),null===this._adapterId&&(this._adapterId=""),this._connectionId=""
},getEndpoints:function(){return this._endpoints},getAdapterId:function(){return this._adapterId},getRouterInfo:function(){return this._routerInfo},getLocatorInfo:function(){return this._locatorInfo},getCacheConnection:function(){return this._cacheConnection},getPreferSecure:function(){return this._preferSecure},getEndpointSelection:function(){return this._endpointSelection},getLocatorCacheTimeout:function(){return this._locatorCacheTimeout},getConnectionId:function(){return this._connectionId},changeEncoding:function(e){var t=I.prototype.changeEncoding.call(this,e);if(t!==this){var n=t._locatorInfo;null===n||n.getLocator().ice_getEncodingVersion().equals(e)||(t._locatorInfo=this.getInstance().locatorManager().find(n.getLocator().ice_encodingVersion(e)))}return t},changeCompress:function(e){var t=I.prototype.changeCompress.call(this,e);if(t!==this&&this._endpoints.length>0){for(var n=[],i=0;i<this._endpoints.length;i++)n[i]=this._endpoints[i].changeCompress(e);t._endpoints=n}return t},changeAdapterId:function(e){if(this._adapterId===e)return this;var t=this.getInstance().referenceFactory().copy(this);return t._adapterId=e,t._endpoints=I._emptyEndpoints,t},changeEndpoints:function(t){if(e.equals(t,this._endpoints,function(e,t){return e.equals(t)}))return this;var n=this.getInstance().referenceFactory().copy(this);return n._endpoints=t,n._adapterId="",n.applyOverrides(n._endpoints),n},changeLocator:function(e){var t=this.getInstance().locatorManager().find(e);if(null!==t&&null!==this._locatorInfo&&t.equals(this._locatorInfo))return this;var n=this.getInstance().referenceFactory().copy(this);return n._locatorInfo=t,n},changeRouter:function(e){var t=this.getInstance().routerManager().find(e);if(null!==t&&null!==this._routerInfo&&t.equals(this._routerInfo))return this;var n=this.getInstance().referenceFactory().copy(this);return n._routerInfo=t,n},changeCacheConnection:function(e){if(e===this._cacheConnection)return this;var t=this.getInstance().referenceFactory().copy(this);return t._cacheConnection=e,t},changePreferSecure:function(e){if(e===this._preferSecure)return this;var t=this.getInstance().referenceFactory().copy(this);return t._preferSecure=e,t},changeEndpointSelection:function(e){if(e===this._endpointSelection)return this;var t=this.getInstance().referenceFactory().copy(this);return t._endpointSelection=e,t},changeLocatorCacheTimeout:function(e){if(this._locatorCacheTimeout===e)return this;var t=this.getInstance().referenceFactory().copy(this);return t._locatorCacheTimeout=e,t},changeTimeout:function(e){if(this._overrideTimeout&&this._timeout===e)return this;var t=this.getInstance().referenceFactory().copy(this);if(t._timeout=e,t._overrideTimeout=!0,this._endpoints.length>0){for(var n=[],i=0;i<this._endpoints.length;i++)n[i]=this._endpoints[i].changeTimeout(e);t._endpoints=n}return t},changeConnectionId:function(e){if(this._connectionId===e)return this;var t=this.getInstance().referenceFactory().copy(this);if(t._connectionId=e,this._endpoints.length>0){for(var n=[],i=0;i<this._endpoints.length;i++)n[i]=this._endpoints[i].changeConnectionId(e);t._endpoints=n}return t},isIndirect:function(){return 0===this._endpoints.length},isWellKnown:function(){return 0===this._endpoints.length&&0===this._adapterId.length},streamWrite:function(e){if(I.prototype.streamWrite.call(this,e),e.writeSize(this._endpoints.length),this._endpoints.length>0)for(var t=0;t<this._endpoints.length;++t)e.writeShort(this._endpoints[t].type()),this._endpoints[t].streamWrite(e);else e.writeString(this._adapterId)},toString:function(){var e=[];if(e.push(I.prototype.toString.call(this)),this._endpoints.length>0)for(var t=0;t<this._endpoints.length;++t){var n=this._endpoints[t].toString();null!==n&&n.length>0&&(e.push(":"),e.push(n))}else if(this._adapterId.length>0){e.push(" @ ");var i=c.escapeString(this._adapterId,null);-1!=i.search(/[ :@]/)?(e.push('"'),e.push(i),e.push('"')):e.push(i)}return e.join("")},toProperty:function(e){var n,i=new t;if(i.set(e,this.toString()),i.set(e+".CollocationOptimized","0"),i.set(e+".ConnectionCached",this._cacheConnection?"1":"0"),i.set(e+".PreferSecure",this._preferSecure?"1":"0"),i.set(e+".EndpointSelection",this._endpointSelection===a.Random?"Random":"Ordered"),i.set(e+".LocatorCacheTimeout",""+this._locatorCacheTimeout),i.set(e+".InvocationTimeout",""+this.getInvocationTimeout()),null!==this._routerInfo){var r=this._routerInfo.getRouter(),o=r.__reference().toProperty(e+".Router");for(n=o.entries;null!==n;n=n.next)i.set(n.key,n.value)}if(null!==this._locatorInfo){var c=this._locatorInfo.getLocator(),s=c.__reference().toProperty(e+".Locator");for(n=s.entries;null!==n;n=n.next)i.set(n.key,n.value)}return i},hashCode:function(){return this._hashInitialized||(I.prototype.hashCode.call(this),this._hashValue=n.addString(this._hashValue,this._adapterId)),this._hashValue},equals:function(t){return this===t?!0:t instanceof m&&I.prototype.equals.call(this,t)&&(null===this._locatorInfo?null===t._locatorInfo:this._locatorInfo.equals(t._locatorInfo))&&(null===this._routerInfo?null===t._routerInfo:this._routerInfo.equals(t._routerInfo))?this._cacheConnection!==t._cacheConnection?!1:this._preferSecure!==t._preferSecure?!1:this._endpointSelection!==t._endpointSelection?!1:this._locatorCacheTimeout!==t._locatorCacheTimeout?!1:this._connectionId!==t._connectionId?!1:this._overrideTimeout!==t._overrideTimeout?!1:this._overrideTimeout&&this._timeout!==t._timeout?!1:e.equals(this._endpoints,t._endpoints,function(e,t){return e.equals(t)})?this._adapterId!==t._adapterId?!1:!0:!1:!1},getConnection:function(){var e=new r;if(null!==this._routerInfo){var t=this;this._routerInfo.getClientEndpoints().then(function(n){n.length>0?(t.applyOverrides(n),t.createConnection(n).then(function(t,n){e.succeed(t,n)},function(t){e.fail(t)})):t.getConnectionNoRouterInfo(e)}).exception(function(t){e.fail(t)})}else this.getConnectionNoRouterInfo(e);return e},getConnectionNoRouterInfo:function(e){if(this._endpoints.length>0)return void this.createConnection(this._endpoints).then(function(t,n){e.succeed(t,n)}).exception(function(t){e.fail(t)});var t=this;null!==this._locatorInfo?this._locatorInfo.getEndpoints(this,null,this._locatorCacheTimeout).then(function(n,i){return 0===n.length?void e.fail(new Ice.NoEndpointException(t.toString())):(t.applyOverrides(n),void t.createConnection(n).then(function(t,n){e.succeed(t,n)},function(n){if(n instanceof Ice.NoEndpointException)e.fail(n);else{if(t.getLocatorInfo().clearCache(t),i){var r=t.getInstance().traceLevels();if(r.retry>=2){var o="connection to cached endpoints failed\nremoving endpoints from cache and trying one more time\n"+n.toString();t.getInstance().initializationData().logger.trace(r.retryCat,o)}return void t.getConnectionNoRouterInfo(e)}e.fail(n)}}))}).exception(function(t){e.fail(t)}):e.fail(new Ice.NoEndpointException(this.toString()))},clone:function(){var e=new m(this.getInstance(),this.getCommunicator(),this.getIdentity(),this.getFacet(),this.getMode(),this.getSecure(),this.getProtocol(),this.getEncoding(),this._endpoints,this._adapterId,this._locatorInfo,this._routerInfo,this._cacheConnection,this._preferSecure,this._endpointSelection,this._locatorCacheTimeout,this._invocationTimeout);return this.copyMembers(e),e},copyMembers:function(e){I.prototype.copyMembers.call(this,e),e._overrideTimeout=this._overrideTimeout,e._timeout=this._timeout,e._connectionId=this._connectionId},applyOverrides:function(e){for(var t=0;t<e.length;++t)e[t]=e[t].changeConnectionId(this._connectionId),this._overrideCompress&&(e[t]=e[t].changeCompress(this._compress)),this._overrideTimeout&&(e[t]=e[t].changeTimeout(this._timeout))},filterEndpoints:function(t){for(var n=[],r=0;r<t.length;++r)t[r]instanceof i||!t[r].connectable()||n.push(t[r]);switch(this.getMode()){case o.ModeTwoway:case o.ModeOneway:case o.ModeBatchOneway:n=e.filter(n,function(e,t,n){return!e.datagram()});break;case o.ModeDatagram:case o.ModeBatchDatagram:n=e.filter(n,function(e,t,n){return e.datagram()})}switch(this.getEndpointSelection()){case a.Random:e.shuffle(n);break;case a.Ordered:}var c=this.getInstance().defaultsAndOverrides();if(c.overrideSecure?c.overrideSecureValue:this.getSecure())n=e.filter(n,function(e,t,n){return e.secure()});else{var s=this.getPreferSecure(),h=function(e,t){var n=e.secure(),i=t.secure();return n&&i||!n&&!i?0:!n&&i?s?1:-1:s?-1:1};n.sort(h)}return n},createConnection:function(e){var t=this.filterEndpoints(e);if(0===t.length)return(new r).fail(new Ice.NoEndpointException(this.toString()));var n,i=new r,o=this.getInstance().outgoingConnectionFactory();if(this.getCacheConnection()||1==t.length)n=new v(this,null,i),o.create(t,!1,this.getEndpointSelection()).then(function(e,t){n.setConnection(e,t)}).exception(function(e){n.setException(e)});else{var c=[t[0]];n=new v(this,t,i),o.create(c,!0,this.getEndpointSelection()).then(function(e,t){n.setConnection(e,t)}).exception(function(e){n.setException(e)})}return i}});Ice.RoutableReference=m;var v=p({__init__:function(e,t,n){this.ref=e,this.endpoints=t,this.promise=n,this.i=0,this.exception=null},setConnection:function(e,t){null!==this.ref.getRouterInfo()&&null!==this.ref.getRouterInfo().getAdapter()&&e.setAdapter(this.ref.getRouterInfo().getAdapter()),this.promise.succeed(e,t)},setException:function(e){if(null===this.exception&&(this.exception=e),null===this.endpoints||++this.i===this.endpoints.length)return void this.promise.fail(this.exception);var t=this.i!=this.endpoints.length-1,n=[this.endpoints[this.i]],i=this;this.ref.getInstance().outgoingConnectionFactory().create(n,t,this.ref.getEndpointSelection()).then(function(e,t){i.setConnection(e,t)}).exception(function(e){i.setException(e)})}})}(),function(){var e=(Ice.Debug,Ice.HashMap),t=Ice.ObjectPrx,n=Ice.StringUtil,i=Ice.Identity,r=Ice.Class({__init__:function(e){this._instance=e;var t=this._instance.initializationData().properties.getPropertyAsList("Ice.RetryIntervals");if(t.length>0){this._retryIntervals=[];for(var i=0;i<t.length;i++){var r;try{r=n.toInt(t[i])}catch(o){r=0}if(0===i&&-1===r)break;this._retryIntervals[i]=r>0?r:0}}else this._retryIntervals=[0]},stringToProxy:function(e){var t=this._instance.referenceFactory().createFromString(e,null);return this.referenceToProxy(t)},proxyToString:function(e){return null!==e?e.__reference().toString():""},propertyToProxy:function(e){var t=this._instance.initializationData().properties.getProperty(e),n=this._instance.referenceFactory().createFromString(t,e);return this.referenceToProxy(n)},proxyToProperty:function(t,n){return null!==t?t.__reference().toProperty(n):new e},streamToProxy:function(e,t){var n=new i;n.__read(e);var r=this._instance.referenceFactory().createFromStream(n,e);return this.referenceToProxy(r,t)},referenceToProxy:function(e,n){if(null!==e){var i=n?new n:new t;return i.__setup(e),i}return null},proxyToStream:function(e,t){if(null!==e){var n=e.__reference();n.getIdentity().__write(t),n.streamWrite(t)}else{var r=new i("","");r.__write(t)}},checkRetryAfterException:function(e,t,n,i){var r=this._instance.traceLevels(),o=this._instance.initializationData().logger;if(t.getMode()===Ice.Reference.ModeBatchOneway||t.getMode()===Ice.Reference.ModeBatchDatagram)throw e;if(e instanceof Ice.ObjectNotExistException){var c=e;if(null!==t.getRouterInfo()&&"ice_add_proxy"===c.operation)return t.getRouterInfo().clearCache(t),r.retry>=1&&o.trace(r.retryCat,"retrying operation call to add proxy to router\n"+e.toString()),null!==n&&(n.value=0),i;if(!t.isIndirect())throw e;if(t.isWellKnown()){var s=t.getLocatorInfo();null!==s&&s.clearCache(t)}}else if(e instanceof Ice.RequestFailedException)throw e;if(e instanceof Ice.MarshalException)throw e;if(e instanceof Ice.CommunicatorDestroyedException||e instanceof Ice.ObjectAdapterDeactivatedException)throw e;if(e instanceof Ice.InvocationTimeoutException||e instanceof Ice.InvocationCanceledException)throw e;++i;var a;if(i===this._retryIntervals.length+1&&e instanceof Ice.CloseConnectionException)a=0;else{if(i>this._retryIntervals.length)throw r.retry>=1&&o.trace(r.retryCat,"cannot retry operation call because retry limit has been exceeded\n"+e.toString()),e;a=this._retryIntervals[i-1]}if(r.retry>=1){var h="retrying operation call";a>0&&(h+=" in "+a+"ms"),h+=" because of exception\n"+e.toString(),o.trace(r.retryCat,h)}return n.value=a,i}});Ice.ProxyFactory=r}(),function(){var e=(Ice.AsyncResult,Ice.AsyncStatus),t=Ice.BasicStream,n=Ice.ConnectionRequestHandler,i=(Ice.Debug,Ice.ExUtil,Ice.RetryException),r=(Ice.OutgoingAsync,Ice.Protocol),o=Ice.ReferenceMode,c=(Ice.LocalException,Ice.Promise,Ice.Class({__init__:function(e,n){this._reference=e,this._connect=!0,this._response=e.getMode()===o.ModeTwoway,this._proxy=n,this._proxies=[],this._initialized=!1,this._batchRequestInProgress=!1,this._batchStream=new t(e.getInstance(),r.currentProtocolEncoding),this._connection=null,this._compress=!1,this._exception=null,this._requests=[]},connect:function(e){var t=this;e===this._proxy&&this._connect&&(this._connect=!1,this._reference.getConnection().then(function(e,n){t.setConnection(e,n)},function(e){t.setException(e)}));try{if(!this.initialized())return this._proxies.push(e),this}catch(n){throw n}return this._connectionRequestHandler?(e.__setRequestHandler(this,this._connectionRequestHandler),this._connectionRequestHandler):this},update:function(e,t){return e===this?t:this},prepareBatchRequest:function(e){return this.initialized()?void this._connection.prepareBatchRequest(e):(this._batchRequestInProgress=!0,void this._batchStream.swap(e))},finishBatchRequest:function(e){return this.initialized()?void this._connection.finishBatchRequest(e,this._compress):(this._batchRequestInProgress=!1,this._batchStream.swap(e),void this._requests.push(new s(this._batchStream)))},abortBatchRequest:function(){if(!this.initialized()){this._batchRequestInProgress=!1;var e=new t(this._reference.getInstance(),r.currentProtocolEncoding);return void this._batchStream.swap(e)}this._connection.abortBatchRequest()},sendAsyncRequest:function(t){this._initialized||t.__cancelable(this);try{if(!this.initialized())return this._requests.push(new s(t)),e.Queued}catch(n){throw new i(n)}return t.__send(this._connection,this._compress,this._response)},asyncRequestCanceled:function(e,t){if(null===this._exception){if(!this.initialized())for(var n=0;n<this._requests.length;n++)if(this._requests[n].out===e)return e.__completedEx(t),void this._requests.splice(n,1);this._connection.asyncRequestCanceled(e,t)}},getReference:function(){return this._reference},getConnection:function(){if(null!==this._exception)throw this._exception;return this._connection},setConnection:function(e,t){this._connection=e,this._compress=t;var n=this._reference.getRouterInfo();if(null!==n){var i=this;return void n.addProxy(this._proxy).then(function(){i.flushRequests()},function(e){i.setException(e)})}this.flushRequests()},setException:function(e){this._exception=e,this._proxies.length=0,this._proxy=null;try{this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this)}catch(t){}for(var n=0;n<this._requests.length;++n){var i=this._requests[n];null!==i.out&&i.out.__completedEx(this._exception)}this._requests.length=0},initialized:function(){if(this._initialized)return!0;if(null!==this._exception)throw this._exception;return this._initialized},flushRequests:function(){for(var e=null;this._requests.length>0;){var o=this._requests[0];try{if(null!==o.os){var c=new t(o.os.instance,r.currentProtocolEncoding);this._connection.prepareBatchRequest(c);try{o.os.pos=0,c.writeBlob(o.os.readBlob(o.os.size))}catch(s){throw this._connection.abortBatchRequest(),s}this._connection.finishBatchRequest(c,this._compress)}else o.out.__send(this._connection,this._compress,this._response)}catch(s){if(s instanceof i){e=s.inner;try{this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this)}catch(a){}o.out.__retryException(s.inner)}else e=s,o.out.__completedEx(s)}this._requests.shift()}if(this._reference.getCacheConnection()&&null===e){this._connectionRequestHandler=new n(this._reference,this._connection,this._compress);for(var h in this._proxies)this._proxies[h].__setRequestHandler(this,this._connectionRequestHandler)}this._exception=e,this._initialized=null===this._exception;try{this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this)}catch(a){}this._proxies.length=0,this._proxy=null}}));Ice.ConnectRequestHandler=c;var s=function(e){this.os=null,this.out=null,e instanceof t?(this.os=new t(e.instance,r.currentProtocolEncoding),this.os.swap(e)):this.out=e}}(),function(){var e=(Ice.Debug,Ice.HashMap),t=Ice.ConnectRequestHandler,n=Ice.Class({__init__:function(t){this._instance=t,this._handlers=new e(e.compareEquals)},getRequestHandler:function(e,n){if(e.getCacheConnection()){var i=this._handlers.get(e);return i?i:(i=new t(e,n),this._handlers.set(e,i),i)}return new t(e,n)},removeRequestHandler:function(e,t){e.getCacheConnection()&&this._handlers.get(e)===t&&this._handlers["delete"](e)}});Ice.RequestHandlerFactory=n}(),function(){var e=Ice.Address,t=Ice.HashUtil,n=Ice.StringUtil,i=Ice.Class,r=Ice.EndpointParseException,o=i(Ice.EndpointI,{__init__:function(e,t,n,i,r){this._instance=e,this._host=void 0===t?null:t,this._port=void 0===n?null:n,this._sourceAddr=void 0===i?null:i,this._connectionId=void 0===r?"":r},streamWrite:function(e){e.startWriteEncaps(),this.streamWriteImpl(e),e.endWriteEncaps()},getInfo:function(){var e=new Ice.IPEndpointInfo;return this.fillEndpointInfo(e),e},type:function(){return this._instance.type()},protocol:function(){return this._instance.protocol()},secure:function(){return this._instance.secure()},connectionId:function(){return this._connectionId},changeConnectionId:function(e){return e===this._connectionId?this:this.createEndpoint(this._host,this._port,e)},hashCode:function(){return void 0===this._hashCode&&(this._hashCode=this.hashInit(5381)),this._hashCode},options:function(){var e="";if(null!==this._host&&this._host.length>0){e+=" -h ";var t=-1!=this._host.indexOf(":");t&&(e+='"'),e+=this._host,t&&(e+='"')}return e+=" -p "+this._port,null!==this._sourceAddr&&this._sourceAddr.length>0&&(e+=" --sourceAddr "+this._sourceAddr),e},compareTo:function(e){return this===e?0:null===e?1:e instanceof o?this._port<e._port?-1:e._port<this._port?1:this._host!=e._host?this._host<e._host?-1:1:this._sourceAddr!=e._sourceAddr?this._sourceAddr<e._sourceAddr?-1:1:this._connectionId!=e._connectionId?this._connectionId<e._connectionId?-1:1:0:this.type()<e.type()?-1:1},getAddress:function(){return new e(this._host,this._port)},toConnectorString:function(){return this._host+":"+this._port},streamWriteImpl:function(e){e.writeString(this._host),e.writeInt(this._port)},hashInit:function(e){return e=t.addNumber(e,this.type()),e=t.addString(e,this._host),e=t.addNumber(e,this._port),e=t.addString(e,this._sourceAddr),e=t.addString(e,this._connectionId)},fillEndpointInfo:function(e){var t=this;e.type=function(){return t.type()},e.datagram=function(){return t.datagram()},e.secure=function(){return t.secure()},e.host=this._host,e.port=this._port,e.sourceAddress=this._sourceAddr},initWithOptions:function(e,t){if(Ice.EndpointI.prototype.initWithOptions.call(this,e),null===this._host||0===this._host.length)this._host=this._instance.defaultHost();else if("*"==this._host){if(!t)throw new r("`-h *' not valid for proxy endpoint `"+this+"'");this._host=""}if(null===this._host&&(this._host=""),null===this._sourceAddr)t||(this._sourceAddr=this._instance.defaultSourceAddress());else if(t)throw new r("`--sourceAddress not valid for object adapter endpoint `"+this+"'")},initWithStream:function(e){this._host=e.readString(),this._port=e.readInt()},checkOption:function(e,t,i){if("-h"===e){if(null===t)throw new r("no argument provided for -h option in endpoint "+i);this._host=t}else if("-p"===e){if(null===t)throw new r("no argument provided for -p option in endpoint "+i);try{this._port=n.toInt(t)}catch(o){throw new r("invalid port value `"+t+"' in endpoint "+i)}if(this._port<0||this._port>65535)throw new r("port value `"+t+"' out of range in endpoint "+i)}else{if("--sourceAddress"!==e)return!1;if(null===t)throw new r("no argument provided for --sourceAddress option in endpoint "+i);this._sourceAddr=t}return!0}});Ice.IPEndpointI=o}(),function(){var e=Ice.Class,t=e({__init__:function(e){this._instance=e,this._requests=[]},add:function(e,t){if(null===this._instance)throw new Ice.CommunicatorDestroyedException;var i=new n(this,e);e.__cancelable(i),i.token=this._instance.timer().schedule(function(){i.run()},t),this._requests.push(i)},destroy:function(){for(var e=0;e<this._requests.length;++e)this._instance.timer().cancel(this._requests[e].token),this._requests[e].destroy();this._requests=[],this._instance=null},remove:function(e){var t=this._requests.indexOf(e);t>=0&&this._requests.splice(t,1)},cancel:function(e){var t=this._requests.indexOf(e);return t>=0?(this._requests.splice(t,1),this._instance.timer().cancel(e.token)):!1}});Ice.RetryQueue=t;var n=e({__init__:function(e,t,n){this.queue=e,this.outAsync=t},run:function(){this.outAsync.__retry(),this.queue.remove(this)},destroy:function(){try{this.outAsync.__abort(new Ice.CommunicatorDestroyedException)}catch(e){}},asyncRequestCanceled:function(e,t){this.queue.cancel(this)&&this.outAsync.__completedEx(t)}})}(),function(){var e=Ice.ArrayUtil,t=(Ice.Debug,Ice.HashMap),n=Ice.Promise,i=Ice.Class({__init__:function(e){this._router=e,this._clientEndpoints=null,this._serverEndpoints=null,this._adapter=null,this._identities=new t(t.compareEquals),this._evictedIdentities=[]},destroy:function(){this._clientEndpoints=[],this._serverEndpoints=[],this._adapter=null,this._identities.clear()},equals:function(e){return this===e?!0:e instanceof i?this._router.equals(e._router):!1},hashCode:function(){return this._router.hashCode()},getRouter:function(){return this._router},getClientEndpoints:function(){var e=new n;if(null!==this._clientEndpoints)e.succeed(this._clientEndpoints);else{var t=this;this._router.getClientProxy().then(function(n){t.setClientEndpoints(n,e)}).exception(function(t){e.fail(t)})}return e},getServerEndpoints:function(){if(null!==this._serverEndpoints)return(new n).succeed(this._serverEndpoints);var e=this;return this._router.getServerProxy().then(function(t){return e.setServerEndpoints(t)})},addProxy:function(e){if(this._identities.has(e.ice_getIdentity()))return(new n).succeed();var t=this;return this._router.addProxies([e]).then(function(n){t.addAndEvictProxies(e,n)})},setAdapter:function(e){this._adapter=e},getAdapter:function(){return this._adapter},clearCache:function(e){this._identities["delete"](e.getIdentity())},setClientEndpoints:function(e,t){if(null===this._clientEndpoints)if(null===e)this._clientEndpoints=this._router.__reference().getEndpoints(),t.succeed(this._clientEndpoints);else{e=e.ice_router(null);var n=this;this._router.ice_getConnection().then(function(i){var r=e.ice_timeout(i.timeout());n._clientEndpoints=r.__reference().getEndpoints(),t.succeed(n._clientEndpoints)}).exception(function(e){t.fail(e)})}else t.succeed(this._clientEndpoints)},setServerEndpoints:function(e){if(null===e)throw new Ice.NoEndpointException;return e=e.ice_router(null),this._serverEndpoints=e.__reference().getEndpoints(),this._serverEndpoints},addAndEvictProxies:function(t,n){var i=e.indexOf(this._evictedIdentities,t.ice_getIdentity(),function(e,t){return e.equals(t)});i>=0?this._evictedIdentities.splice(i,1):this._identities.set(t.ice_getIdentity(),1);for(var r=0;r<n.length;++r)this._identities["delete"](n[r].ice_getIdentity())}});Ice.RouterInfo=i}(),function(){var e=Ice.HashMap,t=Ice.RouterInfo,n=Ice.RouterPrx,i=Ice.Class({__init__:function(){this._table=new e(e.compareEquals)},destroy:function(){for(var e=this._table.entries;null!==e;e=e.next)e.value.destroy();this._table.clear()},find:function(e){if(null===e)return null;var i=n.uncheckedCast(e.ice_router(null)),r=this._table.get(i);return void 0===r&&(r=new t(i),this._table.set(i,r)),r},erase:function(e){var t=null;if(null!==e){var i=n.uncheckedCast(e.ice_router(null));t=this._table.get(i),this._table["delete"](i)}return t}});Ice.RouterManager=i}(),function(){var e=Ice.AsyncResultBase,t=(Ice.Debug,Ice.Identity),n=(Ice.Promise,Ice.PropertyNames),i=Ice.ServantManager,r=(Ice.StringUtil,["ACM","AdapterId","Endpoints","Locator","Locator.EncodingVersion","Locator.EndpointSelection","Locator.ConnectionCached","Locator.PreferSecure","Locator.CollocationOptimized","Locator.Router","MessageSizeMax","PublishedEndpoints","RegisterProcess","ReplicaGroupId","Router","Router.EncodingVersion","Router.EndpointSelection","Router.ConnectionCached","Router.PreferSecure","Router.CollocationOptimized","Router.Locator","Router.Locator.EndpointSelection","Router.Locator.ConnectionCached","Router.Locator.PreferSecure","Router.Locator.CollocationOptimized","Router.Locator.LocatorCacheTimeout","Router.Locator.InvocationTimeout","Router.LocatorCacheTimeout","Router.InvocationTimeout","ProxyOptions","ThreadPool.Size","ThreadPool.SizeMax","ThreadPool.SizeWarn","ThreadPool.StackSize","ThreadPool.Serialize"]),o=0,c=5,s=6,a=Ice.Class({__init__:function(e,t,n,r,c,s,a){if(this._instance=e,this._communicator=t,this._objectAdapterFactory=n,this._servantManager=new i(e,r),this._name=r,this._routerEndpoints=[],this._routerInfo=null,this._state=o,this._noConfig=s,this._noConfig)return this._reference=this._instance.referenceFactory().createFromString("dummy -t",""),this._messageSizeMax=this._instance.messageSizeMax(),void a.succeed(this,a);var h=this._instance.initializationData().properties,u=[],l=this.filterProperties(u);if(0!==u.length&&h.getPropertyAsIntWithDefault("Ice.Warn.UnknownProperties",1)>0){for(var d=["found unknown properties for object adapter `"+r+"':"],p=0;p<u.length;++p)d.push("\n    "+u[p]);this._instance.initializationData().logger.warning(d.join(""))}if(null===c&&l){var _=new Ice.InitializationException;throw _.reason="object adapter `"+this._name+"' requires configuration",_}var f=h.getPropertyWithDefault(this._name+".ProxyOptions","-t");try{this._reference=this._instance.referenceFactory().createFromString("dummy "+f,"")}catch(I){if(I instanceof Ice.ProxyParseException){var _=new Ice.InitializationException;throw _.reason="invalid proxy options `"+f+"' for object adapter `"+r+"'",_}throw I}var g=this._instance.messageSizeMax()/1024,m=h.getPropertyAsIntWithDefault(this._name+".MessageSizeMax",g);1>m||m>2147483647/1024?this._messageSizeMax=2147483647:this._messageSizeMax=1024*m;try{if(null===c&&(c=Ice.RouterPrx.uncheckedCast(this._instance.proxyFactory().propertyToProxy(this._name+".Router"))),null!==c){if(this._routerInfo=this._instance.routerManager().find(c),null!==this._routerInfo.getAdapter())throw new Ice.AlreadyRegisteredException("object adapter with router",this._instance.identityToString(c.ice_getIdentity()));var v=this;this._routerInfo.getServerEndpoints().then(function(e){var t;for(t=0;t<e.length;++t)v._routerEndpoints.push(e[t]);for(v._routerEndpoints.sort(function(e,t){return e.compareTo(t)}),t=0;t<v._routerEndpoints.length-1;){var n=v._routerEndpoints[t],i=v._routerEndpoints[t+1];n.equals(i)?v._routerEndpoints.splice(t,1):++t}return v._routerInfo.setAdapter(v),v._instance.outgoingConnectionFactory().setRouterInfo(v._routerInfo)}).then(function(){a.succeed(v,a)},function(e){a.fail(e,a)})}else{var y=h.getProperty(this._name+".Endpoints");if(y.length>0)throw new Ice.FeatureNotSupportedException("object adapter endpoints not supported");a.succeed(this,a)}}catch(_){throw this.destroy(),_}},getName:function(){return this._noConfig?"":this._name},getCommunicator:function(){return this._communicator},activate:function(){},hold:function(){this.checkForDeactivation()},waitForHold:function(){var t=new e(this._communicator,"waitForHold",null,null,this);return this.checkForDeactivation(t)?t:t.succeed(t)},deactivate:function(){var t=new e(this._communicator,"deactivate",null,null,this);return this._state<c&&(this._state=c,this._instance.outgoingConnectionFactory().removeAdapter(this)),t.succeed(t)},waitForDeactivate:function(){var t=new e(this._communicator,"deactivate",null,null,this);return t.succeed(t)},isDeactivated:function(){return this._state>=c},destroy:function(){var t=new e(this._communicator,"destroy",null,null,this),n=this,i=function(){return n._state<s&&(n._state=s,n._servantManager.destroy(),n._objectAdapterFactory.removeObjectAdapter(n)),t.succeed(t)};return this._state<c?this.deactivate().then(i):i()},add:function(e,t){return this.addFacet(e,t,"")},addFacet:function(e,t,n){this.checkForDeactivation(),this.checkIdentity(t),this.checkServant(e);var i=t.clone();return this._servantManager.addServant(e,i,n),this.newProxy(i,n)},addWithUUID:function(e){return this.addFacetWithUUID(e,"")},addFacetWithUUID:function(e,n){return this.addFacet(e,new t(Ice.generateUUID(),""),n)},addDefaultServant:function(e,t){this.checkServant(e),this.checkForDeactivation(),this._servantManager.addDefaultServant(e,t)},remove:function(e){return this.removeFacet(e,"")},removeFacet:function(e,t){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.removeServant(e,t)},removeAllFacets:function(e){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.removeAllFacets(e)},removeDefaultServant:function(e){return this.checkForDeactivation(),this._servantManager.removeDefaultServant(e)},find:function(e){return this.findFacet(e,"")},findFacet:function(e,t){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.findServant(e,t)},findAllFacets:function(e){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.findAllFacets(e)},findByProxy:function(e){this.checkForDeactivation();var t=e.__reference();return this.findFacet(t.getIdentity(),t.getFacet())},findDefaultServant:function(e){return this.checkForDeactivation(),this._servantManager.findDefaultServant(e)},addServantLocator:function(e,t){this.checkForDeactivation(),this._servantManager.addServantLocator(e,t)},removeServantLocator:function(e){return this.checkForDeactivation(),this._servantManager.removeServantLocator(e)},findServantLocator:function(e){return this.checkForDeactivation(),this._servantManager.findServantLocator(e)},createProxy:function(e){return this.checkForDeactivation(),this.checkIdentity(e),this.newProxy(e,"")},createDirectProxy:function(e){return this.createProxy(e)},createIndirectProxy:function(e){throw new Ice.FeatureNotSupportedException("setLocator not supported")},setLocator:function(e){throw new Ice.FeatureNotSupportedException("setLocator not supported")},refreshPublishedEndpoints:function(){throw new Ice.FeatureNotSupportedException("refreshPublishedEndpoints not supported")},getEndpoints:function(){return[]},getPublishedEndpoints:function(){return[]},getServantManager:function(){return this._servantManager},messageSizeMax:function(){return this._messageSizeMax},newProxy:function(e,t){for(var n=[],i=0;i<this._routerEndpoints.length;++i)n.push(this._routerEndpoints[i]);var r=this._instance.referenceFactory().create(e,t,this._reference,n);return this._instance.proxyFactory().referenceToProxy(r)},checkForDeactivation:function(e){if(this._state>=c){var t=new Ice.ObjectAdapterDeactivatedException;if(t.name=this.getName(),void 0!==e)return e.fail(t,e),!0;throw t}return!1},checkIdentity:function(e){if(void 0===e.name||null===e.name||0===e.name.length)throw new Ice.IllegalIdentityException(e);(void 0===e.category||null===e.category)&&(e.category="")},checkServant:function(e){if(void 0===e||null===e)throw new Ice.IllegalServantException("cannot add null servant to Object Adapter")},filterProperties:function(e){var t,i=!0,o=this._name+".";for(t=0;t<n.clPropNames.length;++t)if(0===o.indexOf(n.clPropNames[t]+".")){i=!1;break}for(var c=!0,s=this._instance.initializationData().properties.getPropertiesForPrefix(o),a=s.entries;null!==a;a=a.next){var h=!1;
for(t=0;t<r.length;++t)if(a.key===o+r[t]){c=!1,h=!0;break}!h&&i&&e.push(a.key)}return c}});Ice.ObjectAdapterI=a}(),function(){var e=Ice.AsyncStatus,t=Ice.AsyncResultBase,n=Ice.BasicStream,i=Ice.ConnectionFlushBatch,r=(Ice.Debug,Ice.ExUtil),o=Ice.HashMap,c=Ice.IncomingAsync,s=Ice.RetryException,a=Ice.Promise,h=Ice.Protocol,u=Ice.SocketOperation,l=(Ice.Timer,Ice.TraceUtil),d=Ice.ProtocolVersion,p=Ice.EncodingVersion,_=Ice.ACM,f=Ice.ACMClose,I=Ice.ACMHeartbeat,g=0,m=1,v=2,y=3,w=4,S=5,E=6,x=function(e){this.stream=new n(e,h.currentProtocolEncoding),this.invokeNum=0,this.requestId=0,this.compress=!1,this.servantManager=null,this.adapter=null,this.outAsync=null,this.heartbeatCallback=null},b=Ice.Class,C=b({__init__:function(e,t,i,r,c,s,a){this._communicator=e,this._instance=t,this._monitor=i,this._transceiver=r,this._desc=r.toString(),this._type=r.type(),this._endpoint=c,this._incoming=s,this._adapter=a;var u=t.initializationData();this._logger=u.logger,this._traceLevels=t.traceLevels(),this._timer=t.timer(),this._writeTimeoutId=0,this._writeTimeoutScheduled=!1,this._readTimeoutId=0,this._readTimeoutScheduled=!1,this._hasMoreData={value:!1},this._warn=u.properties.getPropertyAsInt("Ice.Warn.Connections")>0,this._warnUdp=t.initializationData().properties.getPropertyAsInt("Ice.Warn.Datagrams")>0,this._acmLastActivity=null!==this._monitor&&this._monitor.getACM().timeout>0?Date.now():-1,this._nextRequestId=1,this._messageSizeMax=a?a.messageSizeMax():t.messageSizeMax(),this._batchAutoFlushSize=t.batchAutoFlushSize(),this._batchStream=new n(t,h.currentProtocolEncoding),this._batchStreamInUse=!1,this._batchRequestNum=0,this._batchRequestCompress=!1,this._batchMarker=0,this._sendStreams=[],this._readStream=new n(t,h.currentProtocolEncoding),this._readHeader=!1,this._writeStream=new n(t,h.currentProtocolEncoding),this._readStreamPos=-1,this._writeStreamPos=-1,this._dispatchCount=0,this._state=g,this._shutdownInitiated=!1,this._initialized=!1,this._validated=!1,this._readProtocol=new d,this._readProtocolEncoding=new p,this._asyncRequests=new o,this._exception=null,this._startPromise=null,this._closePromises=[],this._holdPromises=[],this._finishedPromises=[],null!==this._adapter?this._servantManager=this._adapter.getServantManager():this._servantManager=null,this._callback=null},start:function(){try{if(this._state>=S)return(new a).fail(this._exception);this._startPromise=new a;var e=this;this._transceiver.setCallbacks(function(){e.message(u.Write)},function(){e.message(u.Read)},function(t,n){if(e.message(u.Write),e._instance.traceLevels().network>=3&&t>0){var i=[];i.push("sent "),i.push(t),e._endpoint.datagram()||(i.push(" of "),i.push(n)),i.push(" bytes via "),i.push(e._endpoint.protocol()),i.push("\n"),i.push(this.toString()),e._instance.initializationData().logger.trace(e._instance.traceLevels().networkCat,i.join(""))}}),this.initialize()}catch(t){return t instanceof Ice.LocalException&&this.exception(t),(new a).fail(t)}return this._startPromise},activate:function(){this._state<=m||(this._acmLastActivity>0&&(this._acmLastActivity=Date.now()),this.setState(v))},hold:function(){this._state<=m||this.setState(y)},destroy:function(e){switch(e){case C.ObjectAdapterDeactivated:this.setState(w,new Ice.ObjectAdapterDeactivatedException);break;case C.CommunicatorDestroyed:this.setState(w,new Ice.CommunicatorDestroyedException)}},close:function(e){var n=new t(this._communicator,"close",this,null,null);return e?(this.setState(S,new Ice.ForcedCloseConnectionException),n.succeed(n)):(this._closePromises.push(n),this.checkClose()),n},checkClose:function(){if(0===this._asyncRequests.size&&this._closePromises.length>0){this.setState(w,new Ice.CloseConnectionException);for(var e=0;e<this._closePromises.length;++e)this._closePromises[e].succeed(this._closePromises[e]);this._closePromises=[]}},isActiveOrHolding:function(){return this._state>m&&this._state<w},isFinished:function(){return this._state!==E||0!==this._dispatchCount?!1:!0},throwException:function(){if(null!==this._exception)throw this._exception},waitUntilHolding:function(){var e=new a;return this._holdPromises.push(e),this.checkState(),e},waitUntilFinished:function(){var e=new a;return this._finishedPromises.push(e),this.checkState(),e},monitor:function(e,t){this._state===v&&((t.heartbeat==Ice.ACMHeartbeat.HeartbeatAlways||t.heartbeat!=Ice.ACMHeartbeat.HeartbeatOff&&this._writeStream.isEmpty()&&e>=this._acmLastActivity+t.timeout/4)&&(t.heartbeat!=Ice.ACMHeartbeat.HeartbeatOnInvocation||this._dispatchCount>0)&&this.heartbeat(),this._readStream.size>h.headerSize||!this._writeStream.isEmpty()||t.close!=Ice.ACMClose.CloseOff&&e>=this._acmLastActivity+t.timeout&&(t.close==Ice.ACMClose.CloseOnIdleForceful||t.close!=Ice.ACMClose.CloseOnIdle&&this._asyncRequests.size>0?this.setState(S,new Ice.ConnectionTimeoutException):t.close!=Ice.ACMClose.CloseOnInvocation&&0===this._dispatchCount&&this._batchStream.isEmpty()&&0===this._asyncRequests.size&&this.setState(w,new Ice.ConnectionTimeoutException)))},sendAsyncRequest:function(e,t,n){var i=0,r=e.__os();if(null!==this._exception)throw new s(this._exception);this._transceiver.checkSendSize(r),e.__cancelable(this),n&&(i=this._nextRequestId++,0>=i&&(this._nextRequestId=1,i=this._nextRequestId++),r.pos=h.headerSize,r.writeInt(i));var o;try{o=this.sendMessage(P.create(e,e.__os(),t,i))}catch(c){throw c instanceof Ice.LocalException?(this.setState(S,c),this._exception):c}return n&&this._asyncRequests.set(i,e),o},prepareBatchRequest:function(e){if(null!==this._exception)throw this._batchStream.isEmpty()?new s(this._exception):this._exception;if(this._batchStream.isEmpty())try{this._batchStream.writeBlob(h.requestBatchHdr)}catch(t){throw t instanceof Ice.LocalException&&this.setState(S,t),t}this._batchStreamInUse=!0,this._batchMarker=this._batchStream.size,this._batchStream.swap(e)},finishBatchRequest:function(e,t){try{if(this._batchStream.swap(e),null!==this._exception)return;var i=!1;if(this._batchAutoFlushSize>0){this._batchStream.size>this._batchAutoFlushSize&&(i=!0);try{this._transceiver.checkSendSize(this._batchStream.buffer)}catch(r){if(!(r instanceof Ice.LocalException))throw r;if(!(this._batchRequestNum>0))throw r;i=!0}}if(i){var o=this._batchStream.size-this._batchMarker;this._batchStream.pos=this._batchMarker;var c=this._batchStream.readBlob(o);this._batchStream.resize(this._batchMarker,!1);try{this._batchStream.pos=h.headerSize,this._batchStream.writeInt(this._batchRequestNum),this.sendMessage(P.createForStream(this._batchStream,this._batchRequestCompress,!0))}catch(r){throw r instanceof Ice.LocalException?(this.setState(S,r),this._exception):r}this._batchStream=new n(this._instance,h.currentProtocolEncoding),this._batchRequestNum=0,this._batchRequestCompress=!1,this._batchMarker=0,this._batchStream.writeBlob(h.requestBatchHdr),this._batchStream.writeBlob(c)}++this._batchRequestNum,t&&(this._batchRequestCompress=!0),this._batchStreamInUse=!1}catch(r){throw r instanceof Ice.LocalException&&this.abortBatchRequest(),r}},abortBatchRequest:function(){this._batchStream=new n(this._instance,h.currentProtocolEncoding),this._batchRequestNum=0,this._batchRequestCompress=!1,this._batchMarker=0,this._batchStreamInUse=!1},flushBatchRequests:function(){var e=new i(this,this._communicator,"flushBatchRequests");return e.__invoke(),e},flushAsyncBatchRequests:function(t){if(null!==this._exception)throw this._exception;var i;if(0===this._batchRequestNum)return t.__sent(),e.Sent;t.__cancelable(this),this._batchStream.pos=h.headerSize,this._batchStream.writeInt(this._batchRequestNum),this._batchStream.swap(t.__os());try{i=this.sendMessage(P.create(t,t.__os(),this._batchRequestCompress,0))}catch(r){throw r instanceof Ice.LocalException?(this.setState(S,r),this._exception):r}return this._batchStream=new n(this._instance,h.currentProtocolEncoding),this._batchRequestNum=0,this._batchRequestCompress=!1,this._batchMarker=0,i},setCallback:function(e){if(this._state>=S){if(null!==e){var t=this;setTimeout(function(){try{e.closed(this)}catch(n){t._logger.error("connection callback exception:\n"+n+"\n"+t._desc)}},0)}}else this._callback=e},setACM:function(e,t,n){null===this._monitor||this._state>=S||(this._state==v&&this._monitor.remove(this),this._monitor=this._monitor.acm(e,t,n),this._state==v&&this._monitor.add(this),this._monitor.getACM().timeout<=0?this._acmLastActivity=-1:this._state==v&&-1==this._acmLastActivity&&(this._acmLastActivity=Date.now()))},getACM:function(){return null!==this._monitor?this._monitor.getACM():new _(0,f.CloseOff,I.HeartbeatOff)},asyncRequestCanceled:function(e,t){for(var n=0;n<this._sendStreams.length;n++){var i=this._sendStreams[n];if(i.outAsync===e)return i.requestId>0&&this._asyncRequests["delete"](i.requestId),i.canceled(),0!==n&&this._sendStreams.splice(n,1),void e.__completedEx(t)}if(e instanceof Ice.OutgoingAsync)for(var r=this._asyncRequests.entries;null!==r;r=r.next)if(r.value===e)return this._asyncRequests["delete"](r.key),void e.__completedEx(t)},sendResponse:function(e,t){try{if(0===--this._dispatchCount&&(this._state===E&&this.reap(),this.checkState()),this._state>=S)throw this._exception;this.sendMessage(P.createForStream(e,0!==t,!0)),this._state===w&&0===this._dispatchCount&&this.initiateShutdown()}catch(n){if(!(n instanceof Ice.LocalException))throw n;this.setState(S,n)}},sendNoResponse:function(){try{if(0===--this._dispatchCount&&(this._state===E&&this.reap(),this.checkState()),this._state>=S)throw this._exception;this._state===w&&0===this._dispatchCount&&this.initiateShutdown()}catch(e){if(!(e instanceof Ice.LocalException))throw e;this.setState(S,e)}},endpoint:function(){return this._endpoint},setAdapter:function(e){this._state<=m||this._state>=w||(this._adapter=e,null!==this._adapter?(this._servantManager=this._adapter.getServantManager(),null===this._servantManager&&(this._adapter=null)):this._servantManager=null)},getAdapter:function(){return this._adapter},getEndpoint:function(){return this._endpoint},createProxy:function(e){return this._instance.proxyFactory().referenceToProxy(this._instance.referenceFactory().createFixed(e,this))},message:function(e){if(!(this._state>=S)){this.unscheduleTimeout(e),this._hasMoreData.value=0!==(e&u.Read);var t=null;try{if(0!==(e&u.Write)&&this._writeStream.buffer.remaining>0&&!this.write(this._writeStream.buffer))return void this.scheduleTimeout(u.Write,this._endpoint.timeout());if(0!==(e&u.Read)&&!this._readStream.isEmpty()){if(this._readHeader){if(!this.read(this._readStream.buffer))return;this._readHeader=!1;var n=this._readStream.pos;if(n<h.headerSize)throw new Ice.IllegalMessageSizeException;this._readStream.pos=0;var i=this._readStream.readByte(),o=this._readStream.readByte(),c=this._readStream.readByte(),s=this._readStream.readByte();if(i!==h.magic[0]||o!==h.magic[1]||c!==h.magic[2]||s!==h.magic[3]){var a=new Ice.BadMagicException;throw a.badMagic=Ice.Buffer.createNative([i,o,c,s]),a}this._readProtocol.__read(this._readStream),h.checkSupportedProtocol(this._readProtocol),this._readProtocolEncoding.__read(this._readStream),h.checkSupportedProtocolEncoding(this._readProtocolEncoding),this._readStream.readByte(),this._readStream.readByte();var l=this._readStream.readInt();if(l<h.headerSize)throw new Ice.IllegalMessageSizeException;l>this._messageSizeMax&&r.throwMemoryLimitException(l,this._messageSizeMax),l>this._readStream.size&&this._readStream.resize(l),this._readStream.pos=n}if(this._readStream.pos!=this._readStream.size){if(this._endpoint.datagram())throw new Ice.DatagramLimitException;if(!this.read(this._readStream.buffer))return void this.scheduleTimeout(u.Read,this._endpoint.timeout())}}if(this._state<=m){if(this._state===g&&!this.initialize())return;if(this._state<=m&&!this.validate())return;this._transceiver.unregister(),this.setState(y),null!==this._startPromise&&++this._dispatchCount}else 0!==(e&u.Read)&&(t=this.parseMessage()),0!==(e&u.Write)&&this.sendNextMessage()}catch(d){if(d instanceof Ice.DatagramLimitException)return this._warnUdp&&this._logger.warning("maximum datagram size of "+this._readStream.pos+" exceeded"),this._readStream.resize(h.headerSize),this._readStream.pos=0,void(this._readHeader=!0);if(d instanceof Ice.SocketException)return void this.setState(S,d);if(d instanceof Ice.LocalException)return void(this._endpoint.datagram()?(this._warn&&this._logger.warning("datagram connection exception:\n"+d+"\n"+this._desc),this._readStream.resize(h.headerSize),this._readStream.pos=0,this._readHeader=!0):this.setState(S,d));throw d}if(this._acmLastActivity>0&&(this._acmLastActivity=Date.now()),this.dispatch(t),this._hasMoreData.value){var p=this;setTimeout(function(){p.message(u.Read)},0)}}},dispatch:function(e){var t=0;if(null!==this._startPromise&&(this._startPromise.succeed(),this._startPromise=null,++t),null!==e&&(null!==e.outAsync&&(e.outAsync.__completed(e.stream),++t),e.invokeNum>0&&this.invokeAll(e.stream,e.invokeNum,e.requestId,e.compress,e.servantManager,e.adapter),e.heartbeatCallback)){try{e.heartbeatCallback.heartbeat(this)}catch(n){this._logger.error("connection callback exception:\n"+n+"\n"+this._desc)}e.heartbeatCallback=null,++t}if(t>0&&(this._dispatchCount-=t,0===this._dispatchCount)){if(this._state!==w||this._shutdownInitiated)this._state===E&&this.reap();else try{this.initiateShutdown()}catch(n){if(!(n instanceof Ice.LocalException))throw n;this.setState(S,n)}this.checkState()}},finish:function(){this.unscheduleTimeout(u.Read|u.Write|u.Connect);var e,t=this._instance.traceLevels();if(this._initialized?t.network>=1&&(e=[],e.push("closed "),e.push(this._endpoint.protocol()),e.push(" connection\n"),e.push(this.toString()),this._exception instanceof Ice.CloseConnectionException||this._exception instanceof Ice.ForcedCloseConnectionException||this._exception instanceof Ice.ConnectionTimeoutException||this._exception instanceof Ice.CommunicatorDestroyedException||this._exception instanceof Ice.ObjectAdapterDeactivatedException||(e.push("\n"),e.push(this._exception.toString())),this._instance.initializationData().logger.trace(t.networkCat,e.join(""))):t.network>=2&&(e=[],e.push("failed to establish "),e.push(this._endpoint.protocol()),e.push(" connection\n"),e.push(this.toString()),e.push("\n"),e.push(this._exception.toString()),this._instance.initializationData().logger.trace(t.networkCat,e.join(""))),null!==this._startPromise&&(this._startPromise.fail(this._exception),this._startPromise=null),this._sendStreams.length>0){if(!this._writeStream.isEmpty()){var n=this._sendStreams[0];this._writeStream.swap(n.stream)}for(var i=0;i<this._sendStreams.length;++i){var r=this._sendStreams[i];r.requestId>0&&this._asyncRequests["delete"](r.requestId),r.completed(this._exception)}this._sendStreams=[]}for(var o=this._asyncRequests.entries;null!==o;o=o.next)o.value.__completedEx(this._exception);if(this._asyncRequests.clear(),null!==this._callback){try{this._callback.closed(this)}catch(c){this._logger.error("connection callback exception:\n"+c+"\n"+this._desc)}this._callback=null}0===this._dispatchCount&&this.reap(),this.setState(E)},toString:function(){return this._desc},timedOut:function(e){this._state<=m?this.setState(S,new Ice.ConnectTimeoutException):this._state<w?this.setState(S,new Ice.TimeoutException):this._state===w&&this.setState(S,new Ice.CloseTimeoutException)},type:function(){return this._type},timeout:function(){return this._endpoint.timeout()},getInfo:function(){if(this._state>=S)throw this._exception;var e=this._transceiver.getInfo();return e.adapterName=null!==this._adapter?this._adapter.getName():"",e.incoming=this._incoming,e},exception:function(e){this.setState(S,e)},invokeException:function(e,t){this.setState(S,e),t>0&&(this._dispatchCount-=t,0===this._dispatchCount&&(this._state===E&&this.reap(),this.checkState()))},setState:function(e,t){if(void 0!==t){if(this._state===e)return;null===this._exception&&(this._exception=t,this._warn&&this._validated&&(this._exception instanceof Ice.CloseConnectionException||this._exception instanceof Ice.ForcedCloseConnectionException||this._exception instanceof Ice.ConnectionTimeoutException||this._exception instanceof Ice.CommunicatorDestroyedException||this._exception instanceof Ice.ObjectAdapterDeactivatedException||this._exception instanceof Ice.ConnectionLostException&&this._state===w||this.warning("connection exception",this._exception)))}if(this._endpoint.datagram()&&e===w&&(e=S),this._state<=m&&e===w&&(e=S),this._state!==e){try{switch(e){case g:break;case m:if(this._state!==g)return;this._endpoint.datagram()||this._incoming||this._transceiver.register();break;case v:if(this._state!==y&&this._state!==m)return;this._transceiver.register();break;case y:if(this._state!==v&&this._state!==m)return;this._state===v&&this._transceiver.unregister();break;case w:if(this._state>=S)return;this._state===y&&this._transceiver.register();break;case S:if(this._state===E)return;this._transceiver.unregister();break;case E:this._transceiver.close(),this._communicator=null}}catch(t){if(!(t instanceof Ice.LocalException))throw t;var n="unexpected connection exception:\n "+this._desc+"\n"+t.toString();this._instance.initializationData().logger.error(n)}if(null!==this._monitor&&(e===v?(this._monitor.add(this),this._acmLastActivity>0&&(this._acmLastActivity=Date.now())):this._state===v&&this._monitor.remove(this)),this._state=e,this._state===w&&0===this._dispatchCount)try{this.initiateShutdown()}catch(t){if(!(t instanceof Ice.LocalException))throw t;this.setState(S,t)}else this._state===S&&this.finish();this.checkState()}},initiateShutdown:function(){if(!this._endpoint.datagram()){var t=new n(this._instance,h.currentProtocolEncoding);t.writeBlob(h.magic),h.currentProtocol.__write(t),h.currentProtocolEncoding.__write(t),t.writeByte(h.closeConnectionMsg),t.writeByte(0),t.writeInt(h.headerSize);var i=this.sendMessage(P.createForStream(t,!1,!1));(i&e.Sent)>0&&this.scheduleTimeout(u.Write,this.closeTimeout())}},heartbeat:function(){if(!this._endpoint.datagram()){var e=new n(this._instance,h.currentProtocolEncoding);e.writeBlob(h.magic),h.currentProtocol.__write(e),h.currentProtocolEncoding.__write(e),e.writeByte(h.validateConnectionMsg),e.writeByte(0),e.writeInt(h.headerSize);try{this.sendMessage(P.createForStream(e,!1,!1))}catch(t){this.setState(S,t)}}},initialize:function(){var e=this._transceiver.initialize(this._readStream.buffer,this._writeStream.buffer);return e!=u.None?(this.scheduleTimeout(e,this.connectTimeout()),!1):(this._desc=this._transceiver.toString(),this._initialized=!0,this.setState(m),!0)},validate:function(){if(!this._endpoint.datagram())if(null!==this._adapter){if(0===this._writeStream.size&&(this._writeStream.writeBlob(h.magic),h.currentProtocol.__write(this._writeStream),h.currentProtocolEncoding.__write(this._writeStream),this._writeStream.writeByte(h.validateConnectionMsg),this._writeStream.writeByte(0),this._writeStream.writeInt(h.headerSize),l.traceSend(this._writeStream,this._logger,this._traceLevels),this._writeStream.prepareWrite()),this._writeStream.pos!=this._writeStream.size&&!this.write(this._writeStream.buffer))return this.scheduleTimeout(u.Write,this.connectTimeout()),!1}else{if(0===this._readStream.size&&(this._readStream.resize(h.headerSize),this._readStream.pos=0),this._readStream.pos!==this._readStream.size&&!this.read(this._readStream.buffer))return this.scheduleTimeout(u.Read,this.connectTimeout()),!1;this._readStream.pos=0;var e=this._readStream.readBlob(4);if(e[0]!==h.magic[0]||e[1]!==h.magic[1]||e[2]!==h.magic[2]||e[3]!==h.magic[3]){var t=new Ice.BadMagicException;throw t.badMagic=e,t}this._readProtocol.__read(this._readStream),h.checkSupportedProtocol(this._readProtocol),this._readProtocolEncoding.__read(this._readStream),h.checkSupportedProtocolEncoding(this._readProtocolEncoding);var n=this._readStream.readByte();if(n!==h.validateConnectionMsg)throw new Ice.ConnectionNotValidatedException;this._readStream.readByte();var i=this._readStream.readInt();if(i!==h.headerSize)throw new Ice.IllegalMessageSizeException;l.traceRecv(this._readStream,this._logger,this._traceLevels),this._validated=!0}this._writeStream.resize(0),this._writeStream.pos=0,this._readStream.resize(h.headerSize),this._readHeader=!0,this._readStream.pos=0;var r=this._instance.traceLevels();if(r.network>=1){var o=[];this._endpoint.datagram()?(o.push("starting to send "),o.push(this._endpoint.protocol()),o.push(" messages\n"),o.push(this._transceiver.toDetailedString())):(o=[],o.push("established "),o.push(this._endpoint.protocol()),o.push(" connection\n"),o.push(this.toString())),this._instance.initializationData().logger.trace(r.networkCat,o.join(""))}return!0},sendNextMessage:function(){if(0!==this._sendStreams.length){try{for(;;){var e=this._sendStreams.shift();if(this._writeStream.swap(e.stream),e.sent(),0===this._sendStreams.length)break;if(this._state>=S)return;e=this._sendStreams[0];var t=e.stream;if(t.pos=10,t.writeInt(t.size),t.prepareWrite(),e.prepared=!0,null!==e.outAsync?l.trace("sending asynchronous request",t,this._logger,this._traceLevels):l.traceSend(t,this._logger,this._traceLevels),this._writeStream.swap(e.stream),this._writeStream.pos!=this._writeStream.size&&!this.write(this._writeStream.buffer))return void this.scheduleTimeout(u.Write,this._endpoint.timeout())}}catch(n){if(n instanceof Ice.LocalException)return void this.setState(S,n);throw n}this._state===w&&this.scheduleTimeout(u.Write,this.closeTimeout())}},sendMessage:function(t){if(this._sendStreams.length>0)return t.doAdopt(),this._sendStreams.push(t),e.Queued;var n=t.stream;return n.pos=10,n.writeInt(n.size),n.prepareWrite(),t.prepared=!0,t.outAsync?l.trace("sending asynchronous request",t.stream,this._logger,this._traceLevels):l.traceSend(t.stream,this._logger,this._traceLevels),this.write(t.stream.buffer)?(t.sent(),this._acmLastActivity>0&&(this._acmLastActivity=Date.now()),e.Sent):(t.doAdopt(),this._writeStream.swap(t.stream),this._sendStreams.push(t),this.scheduleTimeout(u.Write,this._endpoint.timeout()),e.Queued)},parseMessage:function(){var e=new x(this._instance);this._readStream.swap(e.stream),this._readStream.resize(h.headerSize),this._readStream.pos=0,this._readHeader=!0,this._validated=!0;try{e.stream.pos=8;var t=e.stream.readByte();if(e.compress=e.stream.readByte(),2===e.compress){var n=new Ice.FeatureNotSupportedException;throw n.unsupportedFeature="Cannot uncompress compressed message",n}switch(e.stream.pos=h.headerSize,t){case h.closeConnectionMsg:l.traceRecv(e.stream,this._logger,this._traceLevels),this._endpoint.datagram()?this._warn&&this._logger.warning("ignoring close connection message for datagram connection:\n"+this._desc):this.setState(S,new Ice.CloseConnectionException);break;case h.requestMsg:this._state===w?l.trace("received request during closing\n(ignored by server, client will retry)",e.stream,this._logger,this._traceLevels):(l.traceRecv(e.stream,this._logger,this._traceLevels),e.requestId=e.stream.readInt(),e.invokeNum=1,e.servantManager=this._servantManager,e.adapter=this._adapter,++this._dispatchCount);break;case h.requestBatchMsg:if(this._state===w)l.trace("received batch request during closing\n(ignored by server, client will retry)",e.stream,this._logger,this._traceLevels);else{if(l.traceRecv(e.stream,this._logger,this._traceLevels),e.invokeNum=e.stream.readInt(),e.invokeNum<0)throw e.invokeNum=0,new Ice.UnmarshalOutOfBoundsException;e.servantManager=this._servantManager,e.adapter=this._adapter,this._dispatchCount+=e.invokeNum}break;case h.replyMsg:l.traceRecv(e.stream,this._logger,this._traceLevels),e.requestId=e.stream.readInt(),e.outAsync=this._asyncRequests.get(e.requestId),e.outAsync?(this._asyncRequests["delete"](e.requestId),++this._dispatchCount):e=null,this.checkClose();break;case h.validateConnectionMsg:l.traceRecv(e.stream,this._logger,this._traceLevels),null!==this._callback&&(e.heartbeatCallback=this._callback,++this._dispatchCount);break;default:throw l.trace("received unknown message\n(invalid, closing connection)",e.stream,this._logger,this._traceLevels),new Ice.UnknownMessageException}}catch(n){if(!(n instanceof Ice.LocalException))throw n;this._endpoint.datagram()?this._warn&&this._logger.warning("datagram connection exception:\n"+n+"\n"+this._desc):this.setState(S,n)}return e},invokeAll:function(e,t,n,i,r,o){var s=null;try{for(;t>0;){var a=!this._endpoint.datagram()&&0!==n;s=new c(this._instance,this,o,a,i,n),s.invoke(r,e),--t,s=null}e.clear()}catch(h){if(!(h instanceof Ice.LocalException))throw h;this.invokeException(h,t)}},scheduleTimeout:function(e,t){if(!(0>t)){var n=this;0!==(e&u.Read)&&(this._readTimeoutId=this._timer.schedule(function(){n.timedOut()},t),this._readTimeoutScheduled=!0),0!==(e&(u.Write|u.Connect))&&(this._writeTimeoutId=this._timer.schedule(function(){n.timedOut()},t),this._writeTimeoutScheduled=!0)}},unscheduleTimeout:function(e){0!==(e&u.Read)&&this._readTimeoutScheduled&&(this._timer.cancel(this._readTimeoutId),this._readTimeoutScheduled=!1),0!==(e&(u.Write|u.Connect))&&this._writeTimeoutScheduled&&(this._timer.cancel(this._writeTimeoutId),this._writeTimeoutScheduled=!1)},connectTimeout:function(){var e=this._instance.defaultsAndOverrides();return e.overrideConnectTimeout?e.overrideConnectTimeoutValue:this._endpoint.timeout()},closeTimeout:function(){var e=this._instance.defaultsAndOverrides();return e.overrideCloseTimeout?e.overrideCloseTimeoutValue:this._endpoint.timeout()},warning:function(e,t){this._logger.warning(e+":\n"+this._desc+"\n"+t.toString())},checkState:function(){if(!(this._state<y||this._dispatchCount>0)){var e;if(this._holdPromises.length>0){for(e=0;e<this._holdPromises.length;++e)this._holdPromises[e].succeed();this._holdPromises=[]}if(this._state===E&&this._finishedPromises.length>0){for(this._adapter=null,e=0;e<this._finishedPromises.length;++e)this._finishedPromises[e].succeed();this._finishedPromises=[]}}},reap:function(){null!==this._monitor&&this._monitor.reap(this)},read:function(e){var t=e.position,n=this._transceiver.read(e,this._hasMoreData);if(this._instance.traceLevels().network>=3&&e.position!=t){var i=[];i.push("received "),this._endpoint.datagram()?i.push(e.limit):(i.push(e.position-t),i.push(" of "),i.push(e.limit-t)),i.push(" bytes via "),i.push(this._endpoint.protocol()),i.push("\n"),i.push(this.toString()),this._instance.initializationData().logger.trace(this._instance.traceLevels().networkCat,i.join(""))}return n},write:function(e){var t=e.position,n=this._transceiver.write(e);if(this._instance.traceLevels().network>=3&&e.position!=t){var i=[];i.push("sent "),i.push(e.position-t),this._endpoint.datagram()||(i.push(" of "),i.push(e.limit-t)),i.push(" bytes via "),i.push(this._endpoint.protocol()),i.push("\n"),i.push(this.toString()),this._instance.initializationData().logger.trace(this._instance.traceLevels().networkCat,i.join(""))}return n}});C.ObjectAdapterDeactivated=0,C.CommunicatorDestroyed=1,Ice.ConnectionI=C;var P=b({__init__:function(){this.stream=null,this.outAsync=null,this.compress=!1,this.requestId=0,this.prepared=!1},canceled:function(){this.outAsync=null},doAdopt:function(){if(this.adopt){var e=new n(this.stream.instance,h.currentProtocolEncoding);e.swap(this.stream),this.stream=e,this.adopt=!1}},sent:function(){null!==this.outAsync&&this.outAsync.__sent()},completed:function(e){null!==this.outAsync&&this.outAsync.__completedEx(e)}});P.createForStream=function(e,t,n){var i=new P;return i.stream=e,i.compress=t,i.adopt=n,i.isSent=!1,i.requestId=0,i.outAsync=null,i},P.create=function(e,t,n,i){var r=new P;return r.stream=t,r.compress=n,r.outAsync=e,r.requestId=i,r.isSent=!1,r.adopt=!1,r}}(),function(){var e=Ice.HashMap,t=Ice.LocatorInfo,n=Ice.LocatorTable,i=Ice.LocatorPrx,r=Ice.Class({__init__:function(t){this._background=t.getPropertyAsInt("Ice.BackgroundLocatorCacheUpdates")>0,this._table=new e(e.compareEquals),this._locatorTables=new e(e.compareEquals)},destroy:function(){for(var e=this._table.entries;null!==e;e=e.next)e.value.destroy();this._table.clear(),this._locatorTables.clear()},find:function(e){if(null===e)return null;var r=i.uncheckedCast(e.ice_locator(null)),o=this._table.get(r);if(void 0===o){var c=this._locatorTables.get(r.ice_getIdentity());void 0===c&&(c=new n,this._locatorTables.set(r.ice_getIdentity(),c)),o=new t(r,c,this._background),this._table.set(r,o)}return o}});Ice.LocatorManager=r}(),function(){Object.defineProperty(IceSSL,"EndpointType",{value:2}),IceSSL.EndpointInfo=Slice.defineLocalObject(function(e,t,n,i,r){Ice.IPEndpointInfo.call(this,e,t,n,i,r)},Ice.IPEndpointInfo)}(),function(){function e(e){return"local address = <not available>\nremote address = "+e.host+":"+e.port}function t(e,t){return o>e?new Ice.ConnectFailedException(t.code,t):1e3===t.code||1006===t.code?new Ice.ConnectionLostException:new Ice.SocketException(t.code,t)}var n=(Ice.Debug,Ice.ExUtil,Ice.Network,Ice.SocketOperation),i=(Ice.Connection,Ice.LocalException,Ice.SocketException,0),r=1,o=2,c=3,s=4,a=-1!==navigator.userAgent.indexOf("Firefox"),h=Ice.Class({__init__:function(e){this._logger=e.logger(),this._readBuffers=[],this._readPosition=0,this._maxSendPacketSize=e.properties().getPropertyAsIntWithDefault("Ice.TCP.SndSize",524288)},setCallbacks:function(e,t,n){this._connectedCallback=e,this._bytesAvailableCallback=t;var i=this;this._bytesWrittenCallback=function(e,t){i._fd&&(i._fd.bufferedAmount<1024||this._exception?n(e,t):setTimeout(function(){i._bytesWrittenCallback(e,t)},50))}},initialize:function(c,s){try{if(this._exception)throw this._exception;if(this._state===i){this._state=r,this._fd=new WebSocket(this._url,"ice.zeroc.com"),this._fd.binaryType="arraybuffer";var a=this;return this._fd.onopen=function(e){a.socketConnected(e)},this._fd.onmessage=function(e){a.socketBytesAvailable(e.data)},this._fd.onclose=function(e){a.socketClosed(e)},n.Connect}this._state===r&&(this._desc=e(this._addr),this._state=o)}catch(h){throw this._exception||(this._exception=t(this._state,h)),this._exception}return n.None},register:function(){this._registered=!0,(this._hasBytesAvailable||this._exception)&&(this._bytesAvailableCallback(),this._hasBytesAvailable=!1)},unregister:function(){this._registered=!1},close:function(){if(null!==this._fd){if(this._fd.readyState===WebSocket.CONNECTING&&a)return void(this._state=c);try{this._state=s,this._fd.close()}catch(e){throw t(this._state,e)}finally{this._fd=null}}},write:function(e){function t(e){e._bytesWrittenCallback(0,0)}if(this._exception)throw this._exception;if(0===e.remaining)return!0;var n=this;if(this._fd.bufferedAmount>1024)return setTimeout(function(){n._bytesWrittenCallback(0,0)},50),!1;var i=e.remaining;for(this._maxSendPacketSize>0&&i>this._maxSendPacketSize&&(i=this._maxSendPacketSize);i>0;){var r=e.b.slice(e.position,e.position+i);if(this._fd.send(r),e.position=e.position+i,i=this._maxSendPacketSize>0&&e.remaining>this._maxSendPacketSize?this._maxSendPacketSize:e.remaining,this._fd.bufferedAmount>0&&i>0)return setTimeout(t(n),50),!1}return!0},read:function(e,t){if(this._exception)throw this._exception;if(t.value=!1,0===this._readBuffers.length)return!1;var n=this._readBuffers[0].byteLength-this._readPosition;for(e.remaining;e.remaining>0;)if(n>e.remaining&&(n=e.remaining),new Uint8Array(e.b).set(new Uint8Array(this._readBuffers[0],this._readPosition,n),e.position),e.position+=n,this._readPosition+=n,this._readPosition===this._readBuffers[0].byteLength){if(this._readPosition=0,this._readBuffers.shift(),0===this._readBuffers.length)break;n=this._readBuffers[0].byteLength}return t.value=this._readBuffers.byteLength>0,0===e.remaining},type:function(){return this._secure?"wss":"ws"},getInfo:function(){var e=this.createInfo();return e.localAddress="",e.localPort=-1,e.remoteAddress=this._addr.host,e.remotePort=this._addr.port,e},createInfo:function(){return new Ice.WSConnectionInfo},checkSendSize:function(e){},toString:function(){return this._desc},socketConnected:function(e){return this._state==c?void this.close():void this._connectedCallback()},socketBytesAvailable:function(e){e.byteLength>0&&(this._readBuffers.push(e),this._registered?this._bytesAvailableCallback():this._hasBytesAvailable||(this._hasBytesAvailable=!0))
},socketClosed:function(e){return this._state==c?void this.close():(this._exception=t(this._state,e),void(this._state<o?this._connectedCallback():this._registered&&this._bytesAvailableCallback()))}});h.createOutgoing=function(e,t,n,r){var o=new h(e),c=t?"wss":"ws";return c+="://"+n.host,80!==n.port&&(c+=":"+n.port),c+=r?r:"/",o._url=c,o._fd=null,o._addr=n,o._desc="local address = <not available>\nremote address = "+n.host+":"+n.port,o._state=i,o._secure=t,o._exception=null,o},Ice.WSTransceiver=h}(),function(){var e=(Ice.Debug,Ice.HashUtil),t=Ice.StringUtil,n="undefined"!=typeof Ice.TcpTransceiver?Ice.TcpTransceiver:null,i=Ice.Class,r=i(Ice.IPEndpointI,{__init__:function(e,t,n,i,r,o,c){Ice.IPEndpointI.call(this,e,t,n,i,o),this._timeout=void 0===r?e?e.defaultTimeout():void 0:r,this._compress=void 0===c?!1:c},getInfo:function(){var e=this.secure()?new IceSSL.EndpointInfo:new Ice.TCPEndpointInfo;return this.fillEndpointInfo(e),e},timeout:function(){return this._timeout},changeTimeout:function(e){return e===this._timeout?this:new r(this._instance,this._host,this._port,this._sourceAddr,e,this._connectionId,this._compress)},changeConnectionId:function(e){return e===this._connectionId?this:new r(this._instance,this._host,this._port,this._sourceAddr,this._timeout,e,this._compress)},compress:function(){return this._compress},changeCompress:function(e){return e===this._compress?this:new r(this._instance,this._host,this._port,this._sourceAddr,this._timeout,this._connectionId,e)},datagram:function(){return!1},connectable:function(){return!this.secure()},connect:function(){return n.createOutgoing(this._instance,this.getAddress(),this._sourceAddr)},options:function(){var e=Ice.IPEndpointI.prototype.options.call(this);return e+=-1==this._timeout?" -t infinite":" -t "+this._timeout,this._compress&&(e+=" -z"),e},compareTo:function(e){return this===e?0:null===e?1:e instanceof r?this._timeout<e._timeout?-1:e._timeout<this._timeout?1:!this._compress&&e._compress?-1:!e._compress&&this._compress?1:Ice.IPEndpointI.prototype.compareTo.call(this,e):this.type()<e.type()?-1:1},streamWriteImpl:function(e){Ice.IPEndpointI.prototype.streamWriteImpl.call(this,e),e.writeInt(this._timeout),e.writeBool(this._compress)},hashInit:function(t){return t=Ice.IPEndpointI.prototype.hashInit.call(this,t),t=e.addNumber(t,this._timeout),t=e.addBoolean(t,this._compress)},fillEndpointInfo:function(e){Ice.IPEndpointI.prototype.fillEndpointInfo.call(this,e),e.timeout=this._timeout,e.compress=this._compress},initWithStream:function(e){Ice.IPEndpointI.prototype.initWithStream.call(this,e),this._timeout=e.readInt(),this._compress=e.readBool()},checkOption:function(e,n,i){if(Ice.IPEndpointI.prototype.checkOption.call(this,e,n,i))return!0;if("-t"===e){if(null===n)throw new Ice.EndpointParseException("no argument provided for -t option in endpoint "+i);if("infinite"==n)this._timeout=-1;else{var r=!1;try{this._timeout=t.toInt(n)}catch(o){r=!0}if(r||this._timeout<1)throw new Ice.EndpointParseException("invalid timeout value `"+n+"' in endpoint "+i)}}else{if("-z"!==e)return!1;if(null!==n)throw new Ice.EndpointParseException("unexpected argument `"+n+"' provided for -z option in "+i);this._compress=!0}return!0},createEndpoint:function(e,t,n){return new r(this._instance,e,t,this._sourceAddr,this._timeout,n,this._compress)}});Ice.TcpEndpointI=r}(),function(){var e=Ice.TcpEndpointI,t=Ice.Class({__init__:function(e){this._instance=e},type:function(){return this._instance.type()},protocol:function(){return this._instance.protocol()},create:function(t,n){var i=new e(this._instance);return i.initWithOptions(t,n),i},read:function(t){var n=new e(this._instance);return n.initWithStream(t),n},destroy:function(){this._instance=null},clone:function(e){return new t(e)}});Ice.TcpEndpointFactory=t}(),function(){var e=Ice.Class,t=(Ice.Debug,e({__init__:function(e,t,n,i){if(void 0===e)return this.timeout=6e4,this.heartbeat=Ice.ACMHeartbeat.HeartbeatOnInvocation,void(this.close=Ice.ACMClose.CloseOnInvocationAndIdle);var r;r="Ice.ACM.Client"!=n&&"Ice.ACM.Server"!=n||0!==e.getProperty(n+".Timeout").length?n+".Timeout":n,this.timeout=1e3*e.getPropertyAsIntWithDefault(r,i.timeout/1e3);var o=e.getPropertyAsIntWithDefault(n+".Heartbeat",i.heartbeat.value);o>=0&&o<=Ice.ACMHeartbeat.maxValue?this.heartbeat=Ice.ACMHeartbeat.valueOf(o):(t.warning("invalid value for property `"+n+".Heartbeat', default value will be used instead"),this.heartbeat=i.heartbeat);var c=e.getPropertyAsIntWithDefault(n+".Close",i.close.value);c>=0&&c<=Ice.ACMClose.maxValue?this.close=Ice.ACMClose.valueOf(c):(t.warning("invalid value for property `"+n+".Close', default value will be used instead"),this.close=i.close)}})),n=e({add:function(e){},remove:function(e){},reap:function(e){},acm:function(e){return null},getACM:function(){return 0}}),i=e(n,{__init__:function(e,t){this._instance=e,this._config=t,this._reapedConnections=[],this._connections=[]},destroy:function(){null!==this._instance&&(this._instance=null,this._connections=null)},add:function(e){if(0!==this._config.timeout&&(this._connections.push(e),1==this._connections.length)){var t=this;this._timerToken=this._instance.timer().scheduleRepeated(function(){t.runTimerTask()},this._config.timeout/2)}},remove:function(e){if(0!==this._config.timeout){var t=this._connections.indexOf(e);return this._connections.splice(t,1),0===this._connections.length?void this._instance.timer().cancel(this._timerToken):void 0}},reap:function(e){this._reapedConnections.push(e)},acm:function(e,n,i){var o=new t;return o.timeout=this._config.timeout,o.close=this._config.close,o.heartbeat=this._config.heartbeat,void 0!==e&&(o.timeout=1e3*e),void 0!==n&&(o.close=n),void 0!==i&&(o.heartbeat=i),new r(this,this._instance.timer(),o)},getACM:function(){return new Ice.ACM(this._config.timeout/1e3,this._config.close,this._config.heartbeat)},swapReapedConnections:function(){if(0===this._reapedConnections.length)return null;var e=this._reapedConnections;return this._reapedConnections=[],e},runTimerTask:function(){if(null!==this._instance)for(var e=Date.now(),t=0;t<this._connections.length;t++)try{this._connections[t].monitor(e,this._config)}catch(n){this.handleException(n)}},handleException:function(e){null!==this._instance&&this._instance.initializationData().logger.error("exception in connection monitor:\n"+e)}}),r=e(n,{__init__:function(e,t,n){this._parent=e,this._timer=t,this._config=n,this._connection=null},add:function(e){if(this._connection=e,this._config.timeout>0){var t=this;this._timerToken=this._timer.scheduleRepeated(function(){t.runTimerTask()},this._config.timeout/2)}},remove:function(e){this._connection=null,this._config.timeout>0&&this._timer.cancel(this._timerToken)},reap:function(e){this._parent.reap(e)},acm:function(e,t,n){return this._parent.acm(e,t,n)},getACM:function(){return new Ice.ACM(this._config.timeout/1e3,this._config.close,this._config.heartbeat)},runTimerTask:function(){try{this.connection.monitor(Date.now(),this._config)}catch(e){this._parent.handleException(e)}}});Ice.FactoryACMMonitor=i,Ice.ACMConfig=t}(),function(){Ice.TraceLevels=function(e){var t="Network",n="Protocol",i="Retry",r="Locator",o="Slicing",c="Ice.Trace.",s=e.getPropertyAsInt(c+t),a=e.getPropertyAsInt(c+n),h=e.getPropertyAsInt(c+i),u=e.getPropertyAsInt(c+r),l=e.getPropertyAsInt(c+o);return e.getPropertyAsInt(c+"ThreadPool"),Object.create(null,{network:{get:function(){return s}},networkCat:{get:function(){return t}},protocol:{get:function(){return a}},protocolCat:{get:function(){return n}},retry:{get:function(){return h}},retryCat:{get:function(){return i}},location:{get:function(){return u}},locationCat:{get:function(){return r}},slicing:{get:function(){return l}},slicingCat:{get:function(){return o}}})}}(),function(){var e=(Ice.ArrayUtil,Ice.AsyncResultBase),t=Ice.ConnectionI,n=(Ice.ConnectionReaper,Ice.Debug,Ice.HashMap),i=Ice.Promise,r=(Ice.EndpointSelectionType,Ice.FactoryACMMonitor),o=Ice.Class,c=o({__init__:function(e,t){this._communicator=e,this._instance=t,this._destroyed=!1,this._monitor=new r(this._instance,this._instance.clientACM()),this._connectionsByEndpoint=new s,this._pending=new n(n.compareEquals),this._pendingConnectCount=0,this._waitPromise=null},destroy:function(){this._destroyed||(this._connectionsByEndpoint.forEach(function(e){e.destroy(t.CommunicatorDestroyed)}),this._destroyed=!0,this._communicator=null,this.checkFinished())},waitUntilFinished:function(){return this._waitPromise=new i,this.checkFinished(),this._waitPromise},create:function(e,t,n){var r=this.applyOverrides(e);try{var o={value:!1},c=this.findConnectionByEndpoint(r,o);if(null!==c)return(new i).succeed(c,o.value)}catch(s){return(new i).fail(s)}var h=new a(this,r,t,n);return h.start()},setRouterInfo:function(e){var t=this;return Ice.Promise["try"](function(){if(t._destroyed)throw new Ice.CommunicatorDestroyedException;return e.getClientEndpoints()}).then(function(n){for(var i=e.getAdapter(),r=t._instance.defaultsAndOverrides(),o=0;o<n.length;++o){var c=n[o];r.overrideTimeout&&(c=c.changeTimeout(r.overrideTimeoutValue)),c=c.changeCompress(!1);for(var s=0;s<t._connectionsByEndpoint.length;++s){var a=t._connectionsByEndpoint[s];a.endpoint().equals(c)&&a.setAdapter(i)}}})},removeAdapter:function(e){this._destroyed||this._connectionsByEndpoint.forEach(function(t){t.getAdapter()===e&&t.setAdapter(null)})},flushAsyncBatchRequests:function(){var t=new e(this._communicator,"flushBatchRequests",null,null,null);return this._destroyed?void t.succeed():(i.all(this._connectionsByEndpoint.map(function(e){return e.isActiveOrHolding()?e.flushBatchRequests().exception(function(e){if(!(e instanceof Ice.LocalException))throw e}):void 0})).then(function(){t.succeed(t)},function(e){t.fail(e,t)}),t)},applyOverrides:function(e){for(var t=this._instance.defaultsAndOverrides(),n=[],i=0;i<e.length;++i){var r=e[i];t.overrideTimeout?n.push(r.changeTimeout(t.overrideTimeoutValue)):n.push(r)}return n},findConnectionByEndpoint:function(e,t){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;for(var n=this._instance.defaultsAndOverrides(),i=0;i<e.length;++i){var r=e[i];if(!this._pending.has(r)){var o=this._connectionsByEndpoint.get(r);if(void 0!==o)for(var c=0;c<o.length;++c)if(o[c].isActiveOrHolding())return n.overrideCompress?t.value=n.overrideCompressValue:t.value=r.compress(),o[c]}}return null},incPendingConnectCount:function(){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;++this._pendingConnectCount},decPendingConnectCount:function(){--this._pendingConnectCount,this._destroyed&&0===this._pendingConnectCount&&this.checkFinished()},getConnection:function(e,t,n){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;var i=this._monitor.swapReapedConnections();if(null!==i)for(var r=0;r<i.length;++r){var o=i[r];this._connectionsByEndpoint.removeConnection(o.endpoint(),o),this._connectionsByEndpoint.removeConnection(o.endpoint().changeCompress(!0),o)}for(;;){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;var c=this.findConnectionByEndpoint(e,n);if(null!==c)return c;if(this.addToPending(t,e))return null;break}return t.nextEndpoint(),null},createConnection:function(e,n){var i=null;try{if(this._destroyed)throw new Ice.CommunicatorDestroyedException;i=new t(this._communicator,this._instance,this._monitor,e,n.changeCompress(!1),!1,null)}catch(r){if(r instanceof Ice.LocalException)try{e.close()}catch(o){}throw r}return this._connectionsByEndpoint.set(i.endpoint(),i),this._connectionsByEndpoint.set(i.endpoint().changeCompress(!0),i),i},finishGetConnection:function(e,t,n,i){var r=[];null!==i&&r.push(i);var o,c,s=[];for(o=0;o<e.length;++o){var a=e[o],h=this._pending.get(a);if(void 0!==h){this._pending["delete"](a);for(var u=0;u<h.length;++u)c=h[u],c.hasEndpoint(t)?-1===r.indexOf(c)&&r.push(c):-1===s.indexOf(c)&&s.push(c)}}for(o=0;o<r.length;++o){c=r[o],c.removeFromPending();var l=s.indexOf(c);-1!==l&&s.splice(l,1)}for(o=0;o<s.length;++o)c=s[o],c.removeFromPending();var d,p=this._instance.defaultsAndOverrides();for(d=p.overrideCompress?p.overrideCompressValue:t.compress(),o=0;o<s.length;++o)c=s[o],c.getConnection();for(o=0;o<r.length;++o)c=r[o],c.setConnection(n,d);this.checkFinished()},finishGetConnectionEx:function(e,t,n){var i=[];null!==n&&i.push(n);var r,o,c=[];for(r=0;r<e.length;++r){var s=e[r],a=this._pending.get(s);if(void 0!==a){this._pending["delete"](s);for(var h=0;h<a.length;++h)o=a[h],o.removeEndpoints(e)?-1===i.indexOf(o)&&i.push(o):-1===c.indexOf(o)&&c.push(o)}}for(r=0;r<c.length;++r)o=c[r],o.removeFromPending();for(this.checkFinished(),r=0;r<c.length;++r)o=c[r],o.getConnection();for(r=0;r<i.length;++r)o=i[r],o.setException(t)},addToPending:function(e,t){var n,i,r=!1;if(null!==e)for(i=0;i<t.length;++i){n=t[i];var o=this._pending.get(n);void 0!==o&&(r=!0,-1===o.indexOf(e)&&o.push(e))}if(r)return!0;for(i=0;i<t.length;++i)n=t[i],this._pending.has(n)||this._pending.set(n,[]);return!1},removeFromPending:function(e,t){for(var n=0;n<t.length;++n){var i=t[n],r=this._pending.get(i);if(void 0!==r){var o=r.indexOf(e);-1!==o&&r.splice(o,1)}}},handleConnectionException:function(e,t){var n=this._instance.traceLevels();if(n.retry>=2){var i=[];i.push("connection to endpoint failed"),e instanceof Ice.CommunicatorDestroyedException?i.push("\n"):t?i.push(", trying next endpoint\n"):i.push(" and no more endpoints to try\n"),i.push(e.toString()),this._instance.initializationData().logger.trace(n.retryCat,i.join(""))}},handleException:function(e,t){var n=this._instance.traceLevels();if(n.retry>=2){var i=[];i.push("couldn't resolve endpoint host"),e instanceof Ice.CommunicatorDestroyedException?i.push("\n"):t?i.push(", trying next endpoint\n"):i.push(" and no more endpoints to try\n"),i.push(e.toString()),this._instance.initializationData().logger.trace(n.retryCat,i.join(""))}},checkFinished:function(){if(!(!this._waitPromise||!this._destroyed||this._pending.size>0||this._pendingConnectCount>0)){var e=this;i.all(e._connectionsByEndpoint.map(function(e){return e.waitUntilFinished().exception(function(e){})})).then(function(){var t=e._monitor.swapReapedConnections();if(null!==t){for(var n=[],i=e._connectionsByEndpoint.entries;null!==i;i=i.next)for(var r=i.value,o=0;o<r.length;++o)-1===n.indexOf(r[o])&&n.push(r[o]);e._connectionsByEndpoint.clear()}e._waitPromise.succeed(),e._monitor.destroy()})}}});Ice.OutgoingConnectionFactory=c;var s=o(n,{__init__:function(e){n.call(this,e||n.compareEquals)},set:function(e,t){var i=this.get(e);void 0===i&&(i=[],n.prototype.set.call(this,e,i)),i.push(t)},removeConnection:function(e,t){var n=this.get(e),i=n.indexOf(t);n.splice(i,1),0===n.length&&this["delete"](e)},map:function(e){var t=[];return this.forEach(function(n){t.push(e(n))}),t},forEach:function(e){for(var t=this._head;null!==t;t=t._next)for(var n=0;n<t.value.length;++n)e(t.value[n])}}),a=o({__init__:function(e,t,n,r){this._factory=e,this._endpoints=t,this._hasMore=n,this._selType=r,this._promise=new i,this._index=0,this._current=null},connectionStartCompleted:function(e){e.activate(),this._factory.finishGetConnection(this._endpoints,this._current,e,this)},connectionStartFailed:function(e,t){t instanceof Ice.LocalException?(this._factory.handleConnectionException(t,this._hasMore||this._index<this._endpoints.length),t instanceof Ice.CommunicatorDestroyedException?this._factory.finishGetConnectionEx(this._endpoints,t,this):this._index<this._endpoints.length?this.nextEndpoint():this._factory.finishGetConnectionEx(this._endpoints,t,this)):this._factory.finishGetConnectionEx(this._endpoints,t,this)},setConnection:function(e,t){this._promise.succeed(e,t),this._factory.decPendingConnectCount()},setException:function(e){this._promise.fail(e),this._factory.decPendingConnectCount()},hasEndpoint:function(e){return-1!==this.findEndpoint(e)},findEndpoint:function(e){for(var t=0;t<this._endpoints.length;++t)if(e.equals(this._endpoints[t]))return t;return-1},removeEndpoints:function(e){for(var t=0;t<e.length;++t){var n=this.findEndpoint(e[t]);-1!==n&&this._endpoints.splice(n,1)}return this._index=0,0===this._endpoints.length},removeFromPending:function(){this._factory.removeFromPending(this,this._endpoints)},start:function(){try{this._factory.incPendingConnectCount()}catch(e){return void this._promise.fail(e)}return this.getConnection(),this._promise},getConnection:function(){try{var e={value:!1},t=this._factory.getConnection(this._endpoints,this,e);if(null===t)return;this._promise.succeed(t,e.value),this._factory.decPendingConnectCount()}catch(n){this._promise.fail(n),this._factory.decPendingConnectCount()}},nextEndpoint:function(){var e=null,t=this._factory._instance.traceLevels();try{if(this._current=this._endpoints[this._index++],t.network>=2){var n=[];n.push("trying to establish "),n.push(this._current.protocol()),n.push(" connection to "),n.push(this._current.toConnectorString()),this._factory._instance.initializationData().logger.trace(t.networkCat,n.join(""))}e=this._factory.createConnection(this._current.connect(),this._current);var i=this;e.start().then(function(){i.connectionStartCompleted(e)},function(t){i.connectionStartFailed(e,t)})}catch(r){if(t.network>=2){var n=[];n.push("failed to establish "),n.push(this._current.protocol()),n.push(" connection to "),n.push(this._current.toString()),n.push(r.toString()),this._factory._instance.initializationData().logger.trace(t.networkCat,n.join(""))}this.connectionStartFailed(e,r)}}})}(),function(){var e=(Ice.AsyncResultBase,Ice.ObjectAdapterI),t=Ice.Promise,n=Ice.Class({__init__:function(e,n){this._instance=e,this._communicator=n,this._adapters=[],this._adapterNamesInUse=[],this._shutdownPromise=new t},shutdown:function(){return null===this._instance?this._shutdownPromise:(this._instance=null,this._communicator=null,this._shutdownPromise=t.all(this._adapters.map(function(e){return e.deactivate()})),this._shutdownPromise)},waitForShutdown:function(){var e=this;return this._shutdownPromise.then(function(){return t.all(e._adapters.map(function(e){return e.waitForDeactivate()}))})},isShutdown:function(){return null===this._instance},destroy:function(){var e=this;return this.waitForShutdown().then(function(){return t.all(e._adapters.map(function(e){return e.destroy()}))})},createObjectAdapter:function(t,n,i){if(null===this._instance)throw new Ice.ObjectAdapterDeactivatedException;var r=null;try{if(0===t.length){var o=Ice.generateUUID();r=new e(this._instance,this._communicator,this,o,null,!0,i)}else{if(-1!==this._adapterNamesInUse.indexOf(t))throw new Ice.AlreadyRegisteredException("object adapter",t);r=new e(this._instance,this._communicator,this,t,n,!1,i),this._adapterNamesInUse.push(t)}this._adapters.push(r)}catch(c){i.fail(c,i)}},removeObjectAdapter:function(e){if(null!==this._instance){var t=this._adapters.indexOf(e);-1!==t&&this._adapters.splice(t,1),t=this._adapterNamesInUse.indexOf(e.getName()),-1!==t&&this._adapterNamesInUse.splice(t,1)}}});Ice.ObjectAdapterFactory=n}(),function(){var e=Ice.HashUtil,t=(Ice.StringUtil,Ice.EndpointI),n=Ice.Class,i=n(t,{__init__:function(e,t,n){this._instance=e,this._delegate=t,this._resource=void 0===n?"":n},getInfo:function(){var e=new Ice.WSEndpointInfo;return e.resource=this._resource,this._delegate.fillEndpointInfo(e),e},type:function(){return this._delegate.type()},protocol:function(){return this._delegate.protocol()},streamWrite:function(e){e.startWriteEncaps(),this._delegate.streamWriteImpl(e),e.writeString(this._resource),e.endWriteEncaps()},timeout:function(){return this._delegate.timeout()},changeTimeout:function(e){return e===this._delegate.timeout()?this:new i(this._instance,this._delegate.changeTimeout(e),this._resource)},changeConnectionId:function(e){return e===this._delegate.connectionId()?this:new i(this._instance,this._delegate.changeConnectionId(e),this._resource)},compress:function(){return this._delegate.compress()},changeCompress:function(e){return e===this._delegate.compress()?this:new i(this._instance,this._delegate.changeCompress(e),this._resource)},datagram:function(){return this._delegate.datagram()},secure:function(){return this._delegate.secure()},connect:function(){return Ice.WSTransceiver.createOutgoing(this._instance,this._delegate.secure(),this._delegate.getAddress(),this._resource)},hashCode:function(){return void 0===this._hashCode&&(this._hashCode=this._delegate.hashCode(),this._hashCode=e.addString(this._hashCode,this._resource)),this._hashCode},compareTo:function(e){if(this===e)return 0;if(null===e)return 1;if(!(e instanceof i))return this.type()<e.type()?-1:1;var t=this._delegate.compareTo(e._delegate);return 0!==t?t:this._resource!==e._resource?this._resource<e._resource?-1:1:0},options:function(){var e=this._delegate.options();return null!==this._resource&&this._resource.length>0&&(e+=" -r ",e+=-1!==this._resource.indexOf(":")?'"'+this._resource+'"':this._resource),e},toConnectorString:function(){return this._delegate.toConnectorString()},initWithStream:function(e){this._resource=e.readString()},checkOption:function(e,t,n){if("-r"!==e)return!1;if(null===t)throw new Ice.EndpointParseException("no argument provided for -r option in endpoint "+n);return this._resource=t,!0}});"undefined"!=typeof Ice.WSTransceiver?i.prototype.connectable=function(){return!0}:i.prototype.connectable=function(){return!1},Ice.WSEndpoint=i}(),function(){Slice.defineDictionary(IceMX,"StringIntDict","StringIntDictHelper","Ice.StringHelper","Ice.IntHelper",!1,void 0,void 0),IceMX.Metrics=Slice.defineObject(function(e,t,n,i,r){Ice.Object.call(this),this.id=void 0!==e?e:null,this.total=void 0!==t?t:new Ice.Long(0,0),this.current=void 0!==n?n:0,this.totalLifetime=void 0!==i?i:new Ice.Long(0,0),this.failures=void 0!==r?r:0},Ice.Object,void 0,1,["::Ice::Object","::IceMX::Metrics"],-1,function(e){e.writeString(this.id),e.writeLong(this.total),e.writeInt(this.current),e.writeLong(this.totalLifetime),e.writeInt(this.failures)},function(e){this.id=e.readString(),this.total=e.readLong(),this.current=e.readInt(),this.totalLifetime=e.readLong(),this.failures=e.readInt()},!1),IceMX.MetricsPrx=Slice.defineProxy(Ice.ObjectPrx,IceMX.Metrics.ice_staticId,void 0),Slice.defineOperations(IceMX.Metrics,IceMX.MetricsPrx),IceMX.MetricsFailures=Slice.defineStruct(function(e,t){this.id=void 0!==e?e:null,this.failures=void 0!==t?t:null},!1,function(e){e.writeString(this.id),IceMX.StringIntDictHelper.write(e,this.failures)},function(e){this.id=e.readString(),this.failures=IceMX.StringIntDictHelper.read(e)},2,!1),Slice.defineSequence(IceMX,"MetricsFailuresSeqHelper","IceMX.MetricsFailures",!1),Slice.defineSequence(IceMX,"MetricsMapHelper","Ice.ObjectHelper",!1,"IceMX.Metrics"),Slice.defineDictionary(IceMX,"MetricsView","MetricsViewHelper","Ice.StringHelper","IceMX.MetricsMapHelper",!1,void 0,void 0,Ice.ArrayUtil.equals),IceMX.UnknownMetricsView=Slice.defineUserException(function(e){Ice.UserException.call(this,e)},Ice.UserException,"IceMX::UnknownMetricsView",void 0,void 0,!1,!1),IceMX.MetricsAdmin=Slice.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::IceMX::MetricsAdmin"],-1,void 0,void 0,!1),IceMX.MetricsAdminPrx=Slice.defineProxy(Ice.ObjectPrx,IceMX.MetricsAdmin.ice_staticId,void 0),Slice.defineOperations(IceMX.MetricsAdmin,IceMX.MetricsAdminPrx,{getMetricsViewNames:[,,,,2,["Ice.StringSeqHelper"],,[["Ice.StringSeqHelper"]],,,],enableMetricsView:[,,,,2,,[[7]],,[IceMX.UnknownMetricsView],,],disableMetricsView:[,,,,2,,[[7]],,[IceMX.UnknownMetricsView],,],getMetricsView:[,,,,2,["IceMX.MetricsViewHelper"],[[7]],[[4]],[IceMX.UnknownMetricsView],,!0],getMapMetricsFailures:[,,,,2,["IceMX.MetricsFailuresSeqHelper"],[[7],[7]],,[IceMX.UnknownMetricsView],,],getMetricsFailures:[,,,,2,[IceMX.MetricsFailures],[[7],[7],[7]],,[IceMX.UnknownMetricsView],,]}),IceMX.ThreadMetrics=Slice.defineObject(function(e,t,n,i,r,o,c,s){IceMX.Metrics.call(this,e,t,n,i,r),this.inUseForIO=void 0!==o?o:0,this.inUseForUser=void 0!==c?c:0,this.inUseForOther=void 0!==s?s:0},IceMX.Metrics,void 0,2,["::Ice::Object","::IceMX::Metrics","::IceMX::ThreadMetrics"],-1,function(e){e.writeInt(this.inUseForIO),e.writeInt(this.inUseForUser),e.writeInt(this.inUseForOther)},function(e){this.inUseForIO=e.readInt(),this.inUseForUser=e.readInt(),this.inUseForOther=e.readInt()},!1),IceMX.ThreadMetricsPrx=Slice.defineProxy(IceMX.MetricsPrx,IceMX.ThreadMetrics.ice_staticId,void 0),Slice.defineOperations(IceMX.ThreadMetrics,IceMX.ThreadMetricsPrx),IceMX.DispatchMetrics=Slice.defineObject(function(e,t,n,i,r,o,c,s){IceMX.Metrics.call(this,e,t,n,i,r),this.userException=void 0!==o?o:0,this.size=void 0!==c?c:new Ice.Long(0,0),this.replySize=void 0!==s?s:new Ice.Long(0,0)},IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::DispatchMetrics","::IceMX::Metrics"],-1,function(e){e.writeInt(this.userException),e.writeLong(this.size),e.writeLong(this.replySize)},function(e){this.userException=e.readInt(),this.size=e.readLong(),this.replySize=e.readLong()},!1),IceMX.DispatchMetricsPrx=Slice.defineProxy(IceMX.MetricsPrx,IceMX.DispatchMetrics.ice_staticId,void 0),Slice.defineOperations(IceMX.DispatchMetrics,IceMX.DispatchMetricsPrx),IceMX.ChildInvocationMetrics=Slice.defineObject(function(e,t,n,i,r,o,c){IceMX.Metrics.call(this,e,t,n,i,r),this.size=void 0!==o?o:new Ice.Long(0,0),this.replySize=void 0!==c?c:new Ice.Long(0,0)},IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::Metrics"],-1,function(e){e.writeLong(this.size),e.writeLong(this.replySize)},function(e){this.size=e.readLong(),this.replySize=e.readLong()},!1),IceMX.ChildInvocationMetricsPrx=Slice.defineProxy(IceMX.MetricsPrx,IceMX.ChildInvocationMetrics.ice_staticId,void 0),Slice.defineOperations(IceMX.ChildInvocationMetrics,IceMX.ChildInvocationMetricsPrx),IceMX.CollocatedMetrics=Slice.defineObject(function(e,t,n,i,r,o,c){IceMX.ChildInvocationMetrics.call(this,e,t,n,i,r,o,c)},IceMX.ChildInvocationMetrics,void 0,2,["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::CollocatedMetrics","::IceMX::Metrics"],-1,void 0,void 0,!1),IceMX.CollocatedMetricsPrx=Slice.defineProxy(IceMX.ChildInvocationMetricsPrx,IceMX.CollocatedMetrics.ice_staticId,void 0),Slice.defineOperations(IceMX.CollocatedMetrics,IceMX.CollocatedMetricsPrx),IceMX.RemoteMetrics=Slice.defineObject(function(e,t,n,i,r,o,c){IceMX.ChildInvocationMetrics.call(this,e,t,n,i,r,o,c)},IceMX.ChildInvocationMetrics,void 0,3,["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::Metrics","::IceMX::RemoteMetrics"],-1,void 0,void 0,!1),IceMX.RemoteMetricsPrx=Slice.defineProxy(IceMX.ChildInvocationMetricsPrx,IceMX.RemoteMetrics.ice_staticId,void 0),Slice.defineOperations(IceMX.RemoteMetrics,IceMX.RemoteMetricsPrx),IceMX.InvocationMetrics=Slice.defineObject(function(e,t,n,i,r,o,c,s,a){IceMX.Metrics.call(this,e,t,n,i,r),this.retry=void 0!==o?o:0,this.userException=void 0!==c?c:0,this.remotes=void 0!==s?s:null,this.collocated=void 0!==a?a:null},IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::InvocationMetrics","::IceMX::Metrics"],-1,function(e){e.writeInt(this.retry),e.writeInt(this.userException),IceMX.MetricsMapHelper.write(e,this.remotes),IceMX.MetricsMapHelper.write(e,this.collocated)},function(e){this.retry=e.readInt(),this.userException=e.readInt(),this.remotes=IceMX.MetricsMapHelper.read(e),this.collocated=IceMX.MetricsMapHelper.read(e)},!1),IceMX.InvocationMetricsPrx=Slice.defineProxy(IceMX.MetricsPrx,IceMX.InvocationMetrics.ice_staticId,void 0),Slice.defineOperations(IceMX.InvocationMetrics,IceMX.InvocationMetricsPrx),IceMX.ConnectionMetrics=Slice.defineObject(function(e,t,n,i,r,o,c){IceMX.Metrics.call(this,e,t,n,i,r),this.receivedBytes=void 0!==o?o:new Ice.Long(0,0),this.sentBytes=void 0!==c?c:new Ice.Long(0,0)},IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::ConnectionMetrics","::IceMX::Metrics"],-1,function(e){e.writeLong(this.receivedBytes),e.writeLong(this.sentBytes)},function(e){this.receivedBytes=e.readLong(),this.sentBytes=e.readLong()},!1),IceMX.ConnectionMetricsPrx=Slice.defineProxy(IceMX.MetricsPrx,IceMX.ConnectionMetrics.ice_staticId,void 0),Slice.defineOperations(IceMX.ConnectionMetrics,IceMX.ConnectionMetricsPrx)}(),function(){var e=Ice.WSEndpoint,t=Ice.Class({__init__:function(e,t){this._instance=e,this._delegate=t},type:function(){return this._instance.type()},protocol:function(){return this._instance.protocol()},create:function(t,n){var i=new e(this._instance,this._delegate.create(t,n));return i.initWithOptions(t),i},read:function(t){var n=new e(this._instance,this._delegate.read(t));return n.initWithStream(t),n},destroy:function(){this._delegate.destroy(),this._instance=null}});Ice.WSEndpointFactory=t}(),function(){var e=Ice.AsyncResultBase,t=(Ice.Debug,Ice.DefaultsAndOverrides),n=Ice.EndpointFactoryManager,i=(Ice.HashMap,Ice.ImplicitContextI),r=Ice.LocatorManager,o=(Ice.Logger,Ice.ObjectAdapterFactory),c=Ice.ObjectFactoryManager,s=Ice.OutgoingConnectionFactory,a=(Ice.Promise,Ice.Properties),h=Ice.ProxyFactory,u=Ice.RetryQueue,l=Ice.RouterManager,d=Ice.Timer,p=Ice.TraceLevels,_=Ice.ReferenceFactory,f=Ice.RequestHandlerFactory,I=Ice.ACMConfig,g=0,m=1,v=2,y=Ice.Class({__init__:function(e){this._state=g,this._initData=e,this._traceLevels=null,this._defaultsAndOverrides=null,this._messageSizeMax=0,this._batchAutoFlushSize=0,this._clientACM=null,this._implicitContext=null,this._routerManager=null,this._locatorManager=null,this._referenceFactory=null,this._requestHandlerFactory=null,this._proxyFactory=null,this._outgoingConnectionFactory=null,this._servantFactoryManager=null,this._objectAdapterFactory=null,this._retryQueue=null,this._endpointHostResolver=null,this._endpointFactoryManager=null},initializationData:function(){return this._initData},traceLevels:function(){return this._traceLevels},defaultsAndOverrides:function(){return this._defaultsAndOverrides},routerManager:function(){if(this._state===v)throw new Ice.CommunicatorDestroyedException;return this._routerManager},locatorManager:function(){if(this._state===v)throw new Ice.CommunicatorDestroyedException;return this._locatorManager},referenceFactory:function(){if(this._state===v)throw new Ice.CommunicatorDestroyedException;return this._referenceFactory},requestHandlerFactory:function(){if(this._state===v)throw new Ice.CommunicatorDestroyedException;return this._requestHandlerFactory},proxyFactory:function(){if(this._state===v)throw new Ice.CommunicatorDestroyedException;return this._proxyFactory},outgoingConnectionFactory:function(){if(this._state===v)throw new Ice.CommunicatorDestroyedException;return this._outgoingConnectionFactory},servantFactoryManager:function(){if(this._state===v)throw new Ice.CommunicatorDestroyedException;return this._servantFactoryManager},objectAdapterFactory:function(){if(this._state===v)throw new Ice.CommunicatorDestroyedException;return this._objectAdapterFactory},retryQueue:function(){if(this._state===v)throw new Ice.CommunicatorDestroyedException;return this._retryQueue},timer:function(){if(this._state===v)throw new Ice.CommunicatorDestroyedException;return this._timer},endpointFactoryManager:function(){if(this._state===v)throw new Ice.CommunicatorDestroyedException;return this._endpointFactoryManager},messageSizeMax:function(){return this._messageSizeMax},batchAutoFlushSize:function(){return this._batchAutoFlushSize},clientACM:function(){return this._clientACM},getImplicitContext:function(){return this._implicitContext},stringToIdentity:function(e){return Ice.stringToIdentity(e)},identityToString:function(e){return Ice.identityToString(e)},setDefaultLocator:function(e){if(this._state==v)throw new Ice.CommunicatorDestroyedException;this._referenceFactory=this._referenceFactory.setDefaultLocator(e)},setDefaultRouter:function(e){if(this._state==v)throw new Ice.CommunicatorDestroyedException;this._referenceFactory=this._referenceFactory.setDefaultRouter(e)},setLogger:function(e){this._initData.logger=e},finishSetup:function(e,g){try{null===this._initData.properties&&(this._initData.properties=a.createProperties()),void 0===Ice.__oneOfDone&&(Ice.__printStackTraces=this._initData.properties.getPropertyAsIntWithDefault("Ice.PrintStackTraces",0)>0,Ice.__oneOfDone=!0),null===this._initData.logger&&(this._initData.logger=Ice.getProcessLogger()),this._traceLevels=new p(this._initData.properties),this._defaultsAndOverrides=new t(this._initData.properties,this._initData.logger);
var m=1024,v=this._initData.properties.getPropertyAsIntWithDefault("Ice.MessageSizeMax",m);1>v||v>2147483647/1024?this._messageSizeMax=2147483647:this._messageSizeMax=1024*v,0===this._initData.properties.getProperty("Ice.BatchAutoFlushSize").length&&this._initData.properties.getProperty("Ice.BatchAutoFlush").length>0?this._initData.properties.getPropertyAsInt("Ice.BatchAutoFlush")>0&&(this._batchAutoFlushSize=this._messageSizeMax):(v=this._initData.properties.getPropertyAsIntWithDefault("Ice.BatchAutoFlushSize",1024),1>v?this._batchAutoFlushSize=v:v>2147483647/1024?this._batchAutoFlushSize=2147483647:this._batchAutoFlushSize=1024*v),this._clientACM=new I(this._initData.properties,this._initData.logger,"Ice.ACM.Client",new I(this._initData.properties,this._initData.logger,"Ice.ACM",new I)),this._implicitContext=i.create(this._initData.properties.getProperty("Ice.ImplicitContext")),this._routerManager=new l,this._locatorManager=new r(this._initData.properties),this._referenceFactory=new _(this,e),this._requestHandlerFactory=new f(this,e),this._proxyFactory=new h(this),this._endpointFactoryManager=new n(this);var y=new Ice.ProtocolInstance(this,Ice.TCPEndpointType,"tcp",!1),w=new Ice.TcpEndpointFactory(y);this._endpointFactoryManager.add(w);var S=new Ice.ProtocolInstance(this,Ice.WSEndpointType,"ws",!1),E=new Ice.WSEndpointFactory(S,w.clone(S));this._endpointFactoryManager.add(E);var x=new Ice.ProtocolInstance(this,IceSSL.EndpointType,"ssl",!0),b=new Ice.TcpEndpointFactory(x);this._endpointFactoryManager.add(b);var C=new Ice.ProtocolInstance(this,Ice.WSSEndpointType,"wss",!0),P=new Ice.WSEndpointFactory(C,b.clone(C));this._endpointFactoryManager.add(P),this._outgoingConnectionFactory=new s(e,this),this._servantFactoryManager=new c,this._objectAdapterFactory=new o(this,e),this._retryQueue=new u(this),this._timer=new d(this._initData.logger);var M=Ice.RouterPrx.uncheckedCast(this._proxyFactory.propertyToProxy("Ice.Default.Router"));null!==M&&(this._referenceFactory=this._referenceFactory.setDefaultRouter(M));var O=Ice.LocatorPrx.uncheckedCast(this._proxyFactory.propertyToProxy("Ice.Default.Locator"));null!==O&&(this._referenceFactory=this._referenceFactory.setDefaultLocator(O)),null!==g&&g.succeed(e)}catch(k){if(null===g)throw k instanceof Ice.LocalException&&this.destroy(),k;k instanceof Ice.LocalException?this.destroy()["finally"](function(){g.fail(k)}):g.fail(k)}},destroy:function(){var t=new e(null,"destroy",null,this,null);if(this._state==m)return this._destroyPromises||(this._destroyPromises=[]),this._destroyPromises.push(t),t;this._state=m;var n=this;return Ice.Promise["try"](function(){return n._objectAdapterFactory?n._objectAdapterFactory.shutdown():void 0}).then(function(){return null!==n._outgoingConnectionFactory&&n._outgoingConnectionFactory.destroy(),null!==n._objectAdapterFactory?n._objectAdapterFactory.destroy():void 0}).then(function(){return null!==n._outgoingConnectionFactory?n._outgoingConnectionFactory.waitUntilFinished():void 0}).then(function(){n._retryQueue&&n._retryQueue.destroy(),n._timer&&n._timer.destroy(),n._servantFactoryManager&&n._servantFactoryManager.destroy(),n._routerManager&&n._routerManager.destroy(),n._locatorManager&&n._locatorManager.destroy(),n._endpointFactoryManager&&n._endpointFactoryManager.destroy();var e;if(n._initData.properties.getPropertyAsInt("Ice.Warn.UnusedProperties")>0){var i=n._initData.properties.getUnusedProperties();if(i.length>0){var r=[];for(r.push("The following properties were set but never read:"),e=0;e<i.length;++e)r.push("\n    "),r.push(i[e]);n._initData.logger.warning(r.join(""))}}if(n._objectAdapterFactory=null,n._outgoingConnectionFactory=null,n._retryQueue=null,n._timer=null,n._servantFactoryManager=null,n._referenceFactory=null,n._requestHandlerFactory=null,n._proxyFactory=null,n._routerManager=null,n._locatorManager=null,n._endpointFactoryManager=null,n._state=v,this._destroyPromises)for(e=0;e<this._destroyPromises.length;++e)this._destroyPromises[e].succeed(this._destroyPromises[e]);t.succeed(t)}).exception(function(e){if(this._destroyPromises)for(var n=0;n<this._destroyPromises.length;++n)this._destroyPromises[n].fail(e,this._destroyPromises[n]);t.fail(e,t)}),t}});Ice.Instance=y}(),function(){var e=Ice.Instance,t=(Ice.Promise,Ice.Class({__init__:function(t){this._instance=new e(t)},finishSetup:function(e){this._instance.finishSetup(this,e)},destroy:function(){return this._instance.destroy()},shutdown:function(){this._instance.objectAdapterFactory().shutdown()},waitForShutdown:function(){return this._instance.objectAdapterFactory().waitForShutdown()},isShutdown:function(){return this._instance.objectAdapterFactory().isShutdown()},stringToProxy:function(e){return this._instance.proxyFactory().stringToProxy(e)},proxyToString:function(e){return this._instance.proxyFactory().proxyToString(e)},propertyToProxy:function(e){return this._instance.proxyFactory().propertyToProxy(e)},proxyToProperty:function(e,t){return this._instance.proxyFactory().proxyToProperty(e,t)},stringToIdentity:function(e){return this._instance.stringToIdentity(e)},identityToString:function(e){return this._instance.identityToString(e)},createObjectAdapter:function(e){var t=new Ice.AsyncResultBase(this,"createObjectAdapter",this,null,null);return this._instance.objectAdapterFactory().createObjectAdapter(e,null,t),t},createObjectAdapterWithEndpoints:function(e,t){0===e.length&&(e=Ice.generateUUID()),this.getProperties().setProperty(e+".Endpoints",t);var n=new Ice.AsyncResultBase(this,"createObjectAdapterWithEndpoints",this,null,null);return this._instance.objectAdapterFactory().createObjectAdapter(e,null,n),n},createObjectAdapterWithRouter:function(e,t){0===e.length&&(e=Ice.generateUUID());for(var n=new Ice.AsyncResultBase(this,"createObjectAdapterWithRouter",this,null,null),i=this.proxyToProperty(t,e+".Router"),r=i.entries;null!==r;r=r.next)this.getProperties().setProperty(r.key,r.value);return this._instance.objectAdapterFactory().createObjectAdapter(e,t,n),n},addObjectFactory:function(e,t){this._instance.servantFactoryManager().add(e,t)},findObjectFactory:function(e){return this._instance.servantFactoryManager().find(e)},getImplicitContext:function(){return this._instance.getImplicitContext()},getProperties:function(){return this._instance.initializationData().properties},getLogger:function(){return this._instance.initializationData().logger},getDefaultRouter:function(){return this._instance.referenceFactory().getDefaultRouter()},setDefaultRouter:function(e){this._instance.setDefaultRouter(e)},getDefaultLocator:function(){return this._instance.referenceFactory().getDefaultLocator()},setDefaultLocator:function(e){this._instance.setDefaultLocator(e)},flushBatchRequests:function(){return this._instance.outgoingConnectionFactory().flushAsyncBatchRequests()}}));Object.defineProperty(t.prototype,"instance",{get:function(){return this._instance}}),Ice.Communicator=t}(),function(){var e=Ice.Protocol;Ice.InitializationData=function(){this.properties=null,this.logger=null},Ice.InitializationData.prototype.clone=function(){var e=new Ice.InitializationData;return e.properties=this.properties,e.logger=this.logger,e},Ice.initialize=function(e,t){var n=null,i=null;if(e instanceof Array)n=e;else if(e instanceof Ice.InitializationData)i=e;else if(void 0!==e&&null!==e)throw new Ice.InitializationException("invalid argument to initialize");if(void 0!==t&&null!==t){if(!(t instanceof Ice.InitializationData&&null===i))throw new Ice.InitializationException("invalid argument to initialize");i=t}i=null===i?new Ice.InitializationData:i.clone(),i.properties=Ice.createProperties(n,i.properties);var r=new Ice.Communicator(i);return r.finishSetup(null),r},Ice.createProperties=function(e,t){return new Ice.Properties(e,t)},Ice.currentProtocol=function(){return e.currentProtocol.clone()},Ice.currentEncoding=function(){return e.currentEncoding.clone()}}(),window.Ice=Ice,window.IceMX=IceMX,window.IceSSL=IceSSL}(),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=i.Slice,c=r.module("LuckyGroupShopping");o.defineSequence(c,"PersonalDiscountListHelper","Ice.DoubleHelper",!0),c.GroupShoppingClient=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::LuckyGroupShopping::GroupShoppingClient"],-1,void 0,void 0,!1),c.GroupShoppingClientPrx=o.defineProxy(i.ObjectPrx,c.GroupShoppingClient.ice_staticId,void 0),o.defineOperations(c.GroupShoppingClient,c.GroupShoppingClientPrx,{setCommodityInfo:[,,,,,,[[7],[3],[3],[6],["LuckyGroupShopping.PersonalDiscountListHelper"],[6],[3],[3],[7]],,,,],signInByOthers:[,,,,,,,,,,],unsignIn:[,,,,,,,,,,],orderError:[,,,,,,,,,,]}),c.GroupShoppingServer=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::LuckyGroupShopping::GroupShoppingServer"],-1,void 0,void 0,!1),c.GroupShoppingServerPrx=o.defineProxy(i.ObjectPrx,c.GroupShoppingServer.ice_staticId,void 0),o.defineOperations(c.GroupShoppingServer,c.GroupShoppingServerPrx,{getDiscountResult:[,,,,,[6],[[7],[7],[3],[3]],,,,]}),c.Session=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::LuckyGroupShopping::Session"],-1,void 0,void 0,!1),c.SessionPrx=o.defineProxy(i.ObjectPrx,c.Session.ice_staticId,void 0),o.defineOperations(c.Session,c.SessionPrx,{refresh:[,2,2,,,,,,,,],getName:[,2,2,,,[7],,,,,],destroy:[,,,,,[1],[[7]],,,,],destroyByReconnect:[,,,,,,,,,,],destroyByConnect:[,,,,,,,,,,],updateBusiness:[,,,,,[1],[[7],[1]],,,,]}),c.SessionManager=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::LuckyGroupShopping::SessionManager"],-1,void 0,void 0,!1),c.SessionManagerPrx=o.defineProxy(i.ObjectPrx,c.SessionManager.ice_staticId,void 0),o.defineOperations(c.SessionManager,c.SessionManagerPrx,{createSession:[,,,,,["LuckyGroupShopping.GroupShoppingServerPrx"],[[i.Identity],[7],[7],[7],[3]],,,,],destroy:[,,,,,[1],[[7],[7]],,,,],refresh:[,,,,,,[[7],[7]],,,,],updateBusiness:[,,,,,[1],[[7],[7],[1]],,,,]}),n.LuckyGroupShopping=c}("undefined"!=typeof global&&"undefined"!=typeof global.process?module:void 0,"undefined"!=typeof global&&"undefined"!=typeof global.process?require:window.Ice.__require,"undefined"!=typeof global&&"undefined"!=typeof global.process?exports:window);var hostIndex=0,LuckyGroupShoppingC;!function(e){var t=Ice.Class(LuckyGroupShopping.GroupShoppingClient,{setCommodityInfo:function(t,n,i,r,o,c,s,a,h,u){e.LuckyGroupShoppingClient.prototype.setCommodityName(t),e.LuckyGroupShoppingClient.prototype.setGroupCount(n),e.LuckyGroupShoppingClient.prototype.setCurrentGroupCount(i),e.LuckyGroupShoppingClient.prototype.setTotalDiscount(r),e.LuckyGroupShoppingClient.prototype.setPersonalDiscountList(o),e.LuckyGroupShoppingClient.prototype.setGroupPrice(c),e.LuckyGroupShoppingClient.prototype.setCurrentLevel(s),e.LuckyGroupShoppingClient.prototype.setGameMode(a),e.LuckyGroupShoppingClient.prototype.setTimeSpan(h),ConsoleMyLog("set groupshopping info success: ")},signInByOthers:function(t){ConsoleMyLog("signinbyothers"),e.LuckyGroupShoppingClient.prototype.setSignAgain(1)},unsignIn:function(t){ConsoleMyLog("unsignin"),e.LuckyGroupShoppingClient.prototype.setUnsignIn(1)},orderError:function(t){ConsoleMyLog("orderError"),e.LuckyGroupShoppingClient.prototype.setOrderError(1)}});e.GroupShoppingClientI=t}(LuckyGroupShoppingC||(LuckyGroupShoppingC={}));var LuckyGroupShoppingC;!function(e){function t(){var s=0,a=!1,h=0,u=0,l=0,d=0,p=0,_=0,f=0,I=0,g=0,m="",v=[],y=0,w=!1,S=0,E=0,x="",b=0,C=-1,P="",M=window.parent.app,O=t,k=O.prototype;if("undefined"==typeof A){var A={};A.NORMAL=1}k.isApp=function(){try{return M.core.isApp()}catch(e){ConsoleMyLog(e)}return!1},k.connectInit=function(t,a,h,u,l){var d=new Ice.InitializationData;d.properties=Ice.createProperties(),d.properties.setProperty("Ice.ACM.Client.Close","0"),d.properties.setProperty("Ice.ACM.Client.Heartbeat","3"),d.properties.setProperty("Ice.ACM.Client.Timeout","30"),i=Ice.initialize(d);var p="",_="ws -p 10008";0==hostIndex?p="192.168.1.122":1==hostIndex?p="dev.xingyunmao.cn":2==hostIndex&&(p="gamegsapi.xingyunmao.cn",l?(_="wss -p 10009",ConsoleMyLog("wss")):ConsoleMyLog("ws"));var f=i.stringToProxy("luckygroupshopping:"+_+" -h "+p);ConsoleMyLog(p);var I=LuckyGroupShopping.SessionManagerPrx;Ice.Promise["try"](function(){I.checkedCast(f).then(function(l){o=l.ice_invocationTimeout(3e4),i.createObjectAdapter("").then(function(i){var l=i.addWithUUID(new e.GroupShoppingClientI);n=f.ice_getCachedConnection(),n.setAdapter(i),c=l.ice_getIdentity(),u==A.NORMAL&&o.createSession(c,t,a,h,u).then(function(e){e&&(r=e.ice_timeout(3e3),r=e.ice_invocationTimeout(3e3),r=r.ice_endpoints(o.ice_getEndpoints()),s=1)})})}).exception(function(e){ConsoleMyLog("connectInit error."),ConsoleMyLog(e),s=2})})},k.refresh=function(e,t){null!=o&&1==s?Ice.Promise["try"](function(){o.refresh(e,t).exception(function(e){ConsoleMyLog("refresh error."),0==y&&(s=2)})}):ConsoleMyLog("refresh2 error")},k.getDiscountResult=function(e,t,n,i){null!=r?Ice.Promise["try"](function(){r.getDiscountResult(e,t,n,i).then(function(e){S=e}).exception(function(e){ConsoleMyLog("getDiscountResult error."),0==y&&(s=2)})}):ConsoleMyLog("getDiscountResult2 error")},k.setIdentifyingCode=function(e){try{0==b&&(b=1,M.core.scnc("GASX",e,function(e){0==e&&(b=0)}))}catch(t){ConsoleMyLog(t)}},k.checkActivate=function(){try{if(0==M.core.$rootScope.loginUser.UserStatus)return!0}catch(e){ConsoleMyLog(e)}return!1},k.submitDatas=function(e,t){try{M.core.bcn(e,t,function(e){0==e.ok?(C=0,P=e.msg):C=1})}catch(n){ConsoleMyLog(n)}},k.updateBusiness=function(e,t,n,i,r,c,a,h){null!=o?Ice.Promise["try"](function(){o.updateBusiness(e,t,!0).then(function(e){e&&0==k.getIsWoopra()&&(k.updateWoopra(n,i,r,c,a,h),k.setIsWoopra(!0))}).exception(function(e){ConsoleMyLog("updateBusiness error."),0==y&&(s=2)})}):ConsoleMyLog("updateBusiness2 error")},k.destroyServer=function(e,t,n,i,r,c,s,a){null!=o?Ice.Promise["try"](function(){o.destroy(e,t).then(function(e){1==e?(0==k.getIsWoopra()&&(k.updateWoopra(n,i,r,c,s,a),k.setIsWoopra(!0)),k.destroyClient(),d=1,ConsoleMyLog("destroyClient: "+d)):(d=-1,ConsoleMyLog("destroy server fail"))}).exception(function(e){d=-1,ConsoleMyLog("destroyServer error.")})}):(d=-1,ConsoleMyLog("destroyServer2 error"))},k.destroyClient=function(){r&&(r=null),o&&(o=null),n&&(n.close(!1),n=null),i&&(i.destroy(),i=null)},k.closeGame=function(e,t,n,i,r){var o={auth:e,mode:t,orderid:n,state:i};try{M.allowSleepAgain()}catch(c){ConsoleMyLog(c)}try{window.parent.postMessage(o,r)}catch(c){ConsoleMyLog(c)}ConsoleMyLog("closeGame")},k.startGame=function(){try{M.keepAwake()}catch(e){ConsoleMyLog(e)}try{M.main.gameStarted()}catch(e){ConsoleMyLog(e)}try{window.parent.postMessage(!0,"*")}catch(e){ConsoleMyLog(e)}},k.updateWoopra=function(e,t,n,i,r,o){try{var c=M.core.woopraService;ConsoleMyLog(c)}catch(s){ConsoleMyLog(s)}},k.getAddressMessage=function(){try{var e=M.$("GP");return e}catch(t){ConsoleMyLog(t)}},k.GetRound=function(e){return Math.round(100*e)/100},k.getHostIndex=function(){return hostIndex},k.getCloseGameState=function(){return d},k.resumeCloseGameState=function(){d=2},k.getIsWoopra=function(){return a},k.setIsWoopra=function(e){a=e},k.getCommodityName=function(){return m},k.setCommodityName=function(e){m=e},k.getGroupPrice=function(){return _},k.setGroupPrice=function(e){_=e},k.getIsConnect=function(){return s},k.setIsConnect=function(e){s=e},k.lostPackage=function(){s=0},k.getGroupCount=function(){return I},k.setGroupCount=function(e){I=e},k.getCurrentGroupCount=function(){return g},k.setCurrentGroupCount=function(e){g=e},k.getTotalDiscount=function(){return f},k.setTotalDiscount=function(e){f=e},k.getUnsignIn=function(){return h},k.setUnsignIn=function(e){h=e},k.getSignAgain=function(){return u},k.setSignAgain=function(e){u=e},k.getOrderError=function(){return l},k.setOrderError=function(e){l=e},k.getGameMode=function(){return p},k.setGameMode=function(e){p=e},k.getIsReConnect=function(){return y},k.setIsReConnect=function(e){y=e},k.getIsSignIn=function(){return w},k.setIsSignIn=function(e){w=e},k.getPersonalDiscountList=function(){return v},k.setPersonalDiscountList=function(e){v=e},k.getDiscount=function(){return S},k.resumeDiscount=function(){S=0},k.getCurrentLevel=function(){return E},k.setCurrentLevel=function(e){E=e},k.getTimeSpan=function(){return x},k.setTimeSpan=function(e){x=e},k.getSubmitResult=function(){return C},k.resumeSubmitResult=function(){C=-1},k.getSubmitMsg=function(){return P}}var n=null,i=null,r=null,o=null,c=null;e.LuckyGroupShoppingClient=t}(LuckyGroupShoppingC||(LuckyGroupShoppingC={}));